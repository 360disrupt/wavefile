/*
 byte-data
 Pack and unpack binary data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

 wavefile
 Read & write wave files with 4, 8, 11, 12, 16, 20, 24, 32 & 64-bit data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/wavefile

 bitdepth
 Change the resolution of samples to and from 8, 11, 12, 16, 20, 24, 32, 48 & 64-bit.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/bitdepth

 riff-chunks
 Read and write the chunks of RIFF and RIFX files.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/riff-chunks

 generic-integer
 Pack and unpack any integer from 1 to 53-Bit.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/generic-integer

 endianness
 Swap endianness in byte arrays.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/endianness

 imaadpcm
 JavaScript IMA ADPCM codec.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/imaadpcm

 References:
 http://www.cs.columbia.edu/~hgs/audio/dvi/
 https://github.com/acida/pyima
 https://wiki.multimedia.cx/index.php/IMA_ADPCM

 alawmulaw
 JavaScript A-Law and mu-Law codecs.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/alawmulaw

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var d=function(){};d.prototype=a;return new d};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},d={};try{return d.__proto__=a,d.a}catch(g){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,d){a.__proto__=d;if(a.__proto__!==d)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,d){a.prototype=$jscomp.objectCreate(d.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var g=$jscomp.setPrototypeOf;g(a,d)}else for(g in d)if("prototype"!=g)if(Object.defineProperties){var m=Object.getOwnPropertyDescriptor(d,g);m&&Object.defineProperty(a,g,m)}else a[g]=d[g];a.superClass_=d.prototype};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,g){a!=Array.prototype&&a!=Object.prototype&&(a[d]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,g,m){if(d){g=$jscomp.global;a=a.split(".");for(m=0;m<a.length-1;m++){var c=a[m];c in g||(g[c]={});g=g[c]}a=a[a.length-1];m=g[a];d=d(m);d!=m&&null!=d&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,g){var d=this;d instanceof String&&(d=String(d));var c=d.length;for(g=g||0;g<c;g++)if(d[g]==a||Object.is(d[g],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,d,g){if(null==a)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,g){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,g||0)}},"es6","es3");
$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,g){for(var d=1;d<arguments.length;d++){var c=arguments[d];if(c)for(var b in c)$jscomp.owns(c,b)&&(a[b]=c[b])}return a}},"es6","es3");
(function(a){function d(m){if(g[m])return g[m].exports;var c=g[m]={i:m,l:!1,exports:{}};a[m].call(c.exports,c,c.exports,d);c.l=!0;return c.exports}var g={};d.m=a;d.c=g;d.d=function(a,c,b){d.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:b})};d.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(c,"a",c);return c};d.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};d.p="";return d(d.s=3)})([function(a,d){a.exports={format:"Not a supported format.",
wave:"Could not find the 'WAVE' format identifier","fmt ":"Could not find the 'fmt ' chunk",data:"Could not find the 'data' chunk",fact:"Could not find the 'fact' chunk",bitDepth:"Invalid bit depth.",numChannels:"Invalid number of channels.",sampleRate:"Invalid sample rate."}},function(a,d,g){function m(a,c,k){k=void 0===k?10:k;var e=[];c.char?e=c.char?a.slice(0,c.offset):a:Array.isArray(a)||(e=[a]);return b.toBytes(e,b.getType(c,k))}function c(a,c,k){k=void 0===k?10:k;a=b.fromBytes(a.slice(0,c.offset),
b.getType(c,k));return a=c.char?a.slice(0,c.bits/8):a[0]}var b=g(6),f=g(2);a.exports.pack=m;a.exports.unpack=c;a.exports.packArray=function(a,c,k){return b.toBytes(a,b.getType(c,void 0===k?10:k))};a.exports.unpackArray=function(a,c,k){return b.fromBytes(a,b.getType(c,void 0===k?10:k))};a.exports.unpackStruct=function(a,b,k){k=void 0===k?10:k;for(var e=a.length,n=0,f=0;f<b.length;f++)n+=b[f].offset;if(e<n)return[];e=[];for(f=n=0;n<b.length;)e=e.concat(c(a.slice(f,f+b[n].offset),b[n],k)),f+=b[n].offset,
n++;return e};a.exports.packStruct=function(a,b,c){c=void 0===c?10:c;if(a.length<b.length)return[];for(var e=[],k=0;k<b.length;k++)e=e.concat(m(a[k],b[k],c));return e};a.exports.findString=function(a,b){for(var k,e=0;e<a.length;e++)if(k=c(a.slice(e,e+b.length+1),new f({bits:8*b.length,"char":!0})),k==b)return e;return-1};a.exports.Type=f;a.exports.chr=new f({bits:8,"char":!0});a.exports.fourCC=new f({bits:32,"char":!0});a.exports.bool=new f({bits:1});a.exports.int2=new f({bits:2,signed:!0});a.exports.uInt2=
new f({bits:2});a.exports.int4=new f({bits:4,signed:!0});a.exports.uInt4=new f({bits:4});a.exports.int8=new f({bits:8,signed:!0});a.exports.uInt8=new f({bits:8});a.exports.int16=new f({bits:16,signed:!0});a.exports.uInt16=new f({bits:16});a.exports.float16=new f({bits:16,"float":!0});a.exports.int24=new f({bits:24,signed:!0});a.exports.uInt24=new f({bits:24});a.exports.int32=new f({bits:32,signed:!0});a.exports.uInt32=new f({bits:32});a.exports.float32=new f({bits:32,"float":!0});a.exports.int40=
new f({bits:40,signed:!0});a.exports.uInt40=new f({bits:40});a.exports.int48=new f({bits:48,signed:!0});a.exports.uInt48=new f({bits:48});a.exports.float64=new f({bits:64,"float":!0});a.exports.int16BE=new f({bits:16,signed:!0,be:!0});a.exports.uInt16BE=new f({bits:16,be:!0});a.exports.float16BE=new f({bits:16,"float":!0,be:!0});a.exports.int24BE=new f({bits:24,signed:!0,be:!0});a.exports.uInt24BE=new f({bits:24,be:!0});a.exports.int32BE=new f({bits:32,signed:!0,be:!0});a.exports.uInt32BE=new f({bits:32,
be:!0});a.exports.float32BE=new f({bits:32,"float":!0,be:!0});a.exports.int40BE=new f({bits:40,signed:!0,be:!0});a.exports.uInt40BE=new f({bits:40,be:!0});a.exports.int48BE=new f({bits:48,signed:!0,be:!0});a.exports.uInt48BE=new f({bits:48,be:!0});a.exports.float64BE=new f({bits:64,"float":!0,be:!0})},function(a,d,g){var m=new Float32Array(1),c=new Int32Array(m.buffer),b=new Float64Array(1),f=new Uint32Array(b.buffer),l=g(7),h=function(a){var e=l.call(this,a)||this;e.char=a["char"];e.float=a["float"];
e.base=a.base?a.base:10;e.buildType_();return e};$jscomp.inherits(h,l);h.decodeSample=l.decodeSample;h.encodeSample=l.encodeSample;h.mulaw=l.mulaw;h.alaw=l.alaw;h.decodeBlock=l.decodeBlock;h.encodeBlock=l.encodeBlock;h.decode=l.decode;h.encode=l.encode;h.prototype.read16F_=function(a,e){a=this.read(a,e,{bits:16,offset:2});e=(a&31744)>>10;var b=a&1023;return(e?Math.pow(2,e-15)*(1+b/1024):b/1024*.00006103515625)*(a>>15?-1:1)};h.prototype.read32F_=function(a,e){c[0]=this.read(a,e,{bits:32,offset:4});
return m[0]};h.prototype.read64F_=function(a,e){var c=new h({bits:32,offset:4});f[0]=c.read(a,e,{bits:32,offset:4});f[1]=c.read(a,e+4,{bits:32,offset:4});return b[0]};h.prototype.readChar_=function(a,e){for(var b="",c=0;c<this.offset;)b+=String.fromCharCode(a[e+c]),c++;return b};h.prototype.write64F_=function(a,e,c){b[0]=e;e=new h({bits:32,offset:4,lastByteMask:255});c=e.write(a,f[0],c);return e.write(a,f[1],c)};h.prototype.write32F_=function(a,e,b){m[0]=e;return b=this.write(a,c[0],b)};h.prototype.write16F_=
function(a,e,b){m[0]=e;var f=c[0];e=f>>16&32768;var g=f>>12&2047;f=f>>23&255;103<=f&&(e=(e|f-112<<10|g>>1)+(g&1));a[b++]=e&255;a[b++]=e>>>8&255;return b};h.prototype.writeChar_=function(a,e,b){a[b++]=e.charCodeAt(0);return b};h.prototype.buildType_=function(){this.setReader_();this.setWriter_();this.float&&(this.min=-Infinity,this.max=Infinity)};h.prototype.setReader_=function(){this.float?16==this.bits?this.reader=this.read16F_:32==this.bits?this.reader=this.read32F_:64==this.bits&&(this.reader=
this.read64F_):this.char&&(this.reader=this.readChar_)};h.prototype.setWriter_=function(){this.float?16==this.bits?this.writer=this.write16F_:32==this.bits?this.writer=this.write32F_:64==this.bits&&(this.writer=this.write64F_):this.char&&(this.writer=this.writeChar_)};a.exports=h},function(a,d,g){var m=g(0),c=g(4),b=g(5),f=g(9),l=g(10),h=g(13);a=function(a){var e=h.call(this)||this;a&&e.fromBuffer(a);return e};$jscomp.inherits(a,h);a.prototype.fromScratch=function(a,e,b,c,f){f=void 0===f?{}:f;f.container||
(f.container="RIFF");var g=((parseInt(b,10)-1|7)+1)/8;this.clearFactChunk_();this.chunkSize=36+c.length*g;this.fmtChunkSize=16;this.byteRate=a*g*e;this.blockAlign=a*g;this.chunkId=f.container;this.format="WAVE";this.fmtChunkId="fmt ";this.audioFormat=this.headerFormats_[b]?this.headerFormats_[b]:65534;this.numChannels=a;this.sampleRate=e;this.bitsPerSample=parseInt(b,10);this.dataChunkId="data";this.dataChunkSize=c.length*g;this.samples=c;this.bitDepth=b;"4"==b&&(this.chunkSize=44+c.length,this.fmtChunkSize=
20,this.byteRate=4055,this.blockAlign=256,this.bitsPerSample=4,this.dataChunkSize=c.length,this.cbSize=2,this.validBitsPerSample=505,this.factChunkId="fact",this.factChunkSize=4,this.dwSampleLength=2*c.length);if("8a"==b||"8m"==b)this.chunkSize=44+c.length,this.fmtChunkSize=20,this.cbSize=2,this.validBitsPerSample=8,this.factChunkId="fact",this.factChunkSize=4,this.dwSampleLength=c.length;8<parseInt(b,10)&&parseInt(b,10)%8&&(this.chunkSize=60+c.length*g,this.fmtChunkSize=40,this.bitsPerSample=(parseInt(b,
10)-1|7)+1,this.cbSize=22,this.validBitsPerSample=parseInt(b,10),this.dwChannelMask=0,this.subformat1=1,this.subformat2=1048576,this.subformat3=2852126848,this.subformat4=1905997824)};a.prototype.fromBuffer=function(a){this.readRIFFChunk_(a);var e="RIFX"==this.chunkId;a=b.read(a,e);this.readFmtChunk_(a.subChunks);this.readFactChunk_(a.subChunks);this.readBextChunk_(a.subChunks);this.readCueChunk_(a.subChunks);this.readDataChunk_(a.subChunks,{be:e,single:!0});this.bitDepth=3==this.audioFormat&&32==
this.bitsPerSample?"32f":6==this.audioFormat?"8a":7==this.audioFormat?"8m":this.bitsPerSample.toString()};a.prototype.toBuffer=function(){this.checkWriteInput_();return new Uint8Array(this.createWaveFile_())};a.prototype.toRIFF=function(){this.chunkId="RIFF";this.LEorBE_()};a.prototype.toRIFX=function(){this.chunkId="RIFX";this.LEorBE_()};a.prototype.toBitDepth=function(a,e){var b=a,f=this.bitDepth;void 0===e||e||(b=this.realBitDepth_(a),f=this.realBitDepth_(this.bitDepth));c.toBitDepth(this.samples,
f,b);this.fromScratch(this.numChannels,this.sampleRate,a,this.samples,{container:this.chunkId})};a.prototype.interleave=function(){for(var a=[],e=this.samples[0].length,b=0;b<e;b++)for(var c=0;c<this.samples.length;c++)a.push(this.samples[c][b]);this.samples=a};a.prototype.deInterleave=function(){var a=[],e;for(e=0;e<this.numChannels;e++)a[e]=[];e=0;for(var b;e<this.samples.length;){for(b=0;b<this.numChannels;b++)a[b].push(this.samples[e+b]);e+=b}this.samples=a};a.prototype.toIMAADPCM=function(){this.fromScratch(this.numChannels,
this.sampleRate,"4",f.encode(this.samples),{container:this.chunkId})};a.prototype.fromIMAADPCM=function(){this.fromScratch(this.numChannels,this.sampleRate,"16",f.decode(this.samples,this.blockAlign),{container:this.chunkId})};a.prototype.toALaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"8a",l.alaw.encode(this.samples),{container:this.chunkId})};a.prototype.fromALaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"16",l.alaw.decode(this.samples),{container:this.chunkId})};
a.prototype.toMuLaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"8m",l.mulaw.encode(this.samples),{container:this.chunkId})};a.prototype.fromMuLaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"16",l.mulaw.decode(this.samples),{container:this.chunkId})};a.prototype.realBitDepth_=function(a){"32f"!=a&&(a=((parseInt(a,10)-1|7)+1).toString());return a};a.prototype.checkWriteInput_=function(){this.validateBitDepth_();this.validateNumChannels_();this.validateSampleRate_()};
a.prototype.validateBitDepth_=function(){if(!this.headerFormats_[this.bitDepth]){if(8<parseInt(this.bitDepth,10)&&32>parseInt(this.bitDepth,10))return!0;throw Error(m.bitDepth);}return!0};a.prototype.validateNumChannels_=function(){var a=this.numChannels*this.bitsPerSample/8;if(1>this.numChannels||65535<a)throw Error(m.numChannels);return!0};a.prototype.validateSampleRate_=function(){var a=this.bitsPerSample/8*this.numChannels*this.sampleRate;if(1>this.sampleRate||4294967295<a)throw Error(m.sampleRate);
return!0};a.prototype.clearFactChunk_=function(){this.validBitsPerSample=this.cbSize=0;this.factChunkId="";this.dwSampleLength=this.factChunkSize=0};window.WaveFile=a},function(a,d){var g=new Float32Array(1),m={intToInt:function(a,b){return a=0<a?parseInt(a/b.oldPositive*b.newPositive,10):parseInt(a/b.oldNegative*b.newNegative,10)},floatToInt:function(a,b){return 0<a?a*b.newPositive:a*b.newNegative},intToFloat:function(a,b){return 0<a?a/b.oldPositive:a/b.oldNegative},floatToFloat:function(a,b){"64"==
b.original&&"32f"==b.target&&(g[0]=a,a=g[0]);return a}};a.exports.toBitDepth=function(a,b,f){for(var c=[],g=8;49>g;g++)c.push(g.toString());c.push("32f");c.push("64");if(-1==c.indexOf(b)||-1==c.indexOf(f))throw Error("Invalid bit depth.");c=["32f","64"].includes(b)?"float":"int";g=["32f","64"].includes(f)?"Float":"Int";c=m[c+"To"+g];g=a.length;for(var d=0;d<g;d++){var e=d,n=a[d];"8"==b&&(n-=128);a[e]=n;a[d]=c(a[d],{oldNegative:parseInt(Math.pow(2,parseInt(b,10))/2,10),newNegative:parseInt(Math.pow(2,
parseInt(f,10))/2,10),oldPositive:parseInt(Math.pow(2,parseInt(b,10))/2-1,10),newPositive:parseInt(Math.pow(2,parseInt(f,10))/2-1,10),original:b,target:f});e=d;n=a[d];"8"==f&&(n+=128);a[e]=n}}},function(a,d,g){function m(a){k.be="RIFX"===a.chunkId;var e=l.packArray(a.chunkId,h).concat(l.pack(a.chunkSize,k),l.packArray(a.format,h),c(a.subChunks));if("RIFF"===a.chunkId||"RIFX"===a.chunkId)e=new Uint8Array(e);return e}function c(a){for(var e=[],b=0;b<a.length;)e="LIST"===a[b].chunkId?e.concat(m(a[b])):
e.concat(l.packArray(a[b].chunkId,h),l.pack(a[b].chunkSize,k),a[b].chunkData),b++;return e}function b(a){for(var b=[],e=12;e<a.length;)b.push(f(a,e)),e+=8+b[b.length-1].chunkSize;return b}function f(a,c){var e={chunkId:l.unpackArray(a.slice(c,c+4),h),chunkSize:l.unpack(a.slice(c+4,c+8),k)};"LIST"===e.chunkId?(e.format=l.unpackArray(a.slice(8,12),h),e.subChunks=b(a.slice(c,c+e.chunkSize))):e.chunkData=a.slice(c+8,c+8+e.chunkSize);return e}var l=g(1),h=l.chr,k=l.uInt32;a.exports.read=function(a){a=
[].slice.call(a);var e=l.unpackArray(a.slice(0,4),h);k.be="RIFX"===e;return{chunkId:e,chunkSize:l.unpack(a.slice(4,8),k),format:l.unpackArray(a.slice(8,12),h),subChunks:b(a)}};a.exports.write=m},function(a,d,g){var m=g(2),c=g(8);a.exports.getType=function(a,c){a=Object.assign(new m({}),a);a.base=c;return a};a.exports.toBytes=function(a,f){for(var b=0,g=0,d=a.length,e=[];b<d;)g=f.writer(e,a[b++],g);f.be&&c(e,f.offset);if(10!=f.base){a=f.base;b=0;for(g=e.length;b<g;)e[b]=e[b].toString(a),b++;a=0;b=
e.length;for(f=(2==f.base?8:2)+1;a<b;)e[a]=Array(f-e[a].length).join("0")+e[a],a++}return e};a.exports.fromBytes=function(a,f){f.be&&c(a,f.offset);if(10!=f.base)for(var b=f.base,g=0,d=a.length;g<d;)a[g]=parseInt(a[g],b),g++;b=[];g=0;for(d=a.length-(f.offset-1);g<d;)b.push(f.reader(a,g)),g+=f.offset;f.char&&(b=b.join(""));return b}},function(a,d){d=function(a){this.bits=a.bits;this.be=a.be;this.signed=a.signed;this.reader=this.read;this.writer=this.write;this.offset=0;this.min=-Infinity;this.max=Infinity;
this.realBits_=this.bits;this.lastByteMask_=255;this.build_()};d.prototype.read=function(a,d){d=void 0===d?0:d;if(32<this.bits)return this.readBits_(a,d);for(var c=0,b=this.offset-1;0<b;)c|=a[b+d]<<8*b,b--;c=(a[d]|c)>>>0;return this.overflow_(this.sign_(c))};d.prototype.write=function(a,d,c){c=void 0===c?0:c;d=this.overflow_(d);var b=255;c=this.writeFirstByte_(a,d,c);for(var f=2;f<=this.offset;f++)f==this.offset&&(b=this.lastByteMask_),a[c++]=Math.floor(d/Math.pow(2,8*(f-1)))&b;return c};d.prototype.readBits_=
function(a,d){d=void 0===d?0:d;for(var c="",b=0;b<this.offset;){var f=a[d+b].toString(2);c=Array(9-f.length).join("0")+f+c;b++}return this.overflow_(this.sign_(parseInt(c,2)))};d.prototype.build_=function(){this.validateWordSize_();this.setRealBits_();this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?1:Math.ceil(this.realBits_/8)};d.prototype.sign_=function(a){a>this.max&&(a-=2*this.max+2);return a};d.prototype.overflow_=function(a){a>this.max?a=this.max:a<this.min&&(a=this.min);return a};
d.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};d.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");};d.prototype.setRealBits_=function(){8<this.bits&&(this.realBits_=(this.bits-1|7)+1)};d.prototype.setLastByteMask_=function(){var a=8-(this.realBits_-this.bits);this.lastByteMask_=Math.pow(2,0<a?a:8)-1};d.prototype.writeFirstByte_=function(a,d,c){8>this.bits?a[c++]=
0>d?d+Math.pow(2,this.bits):d:a[c++]=d&255;return c};a.exports=d},function(a,d){a.exports=function(a,d){for(var c=a.length,b=0;b<c;){for(var f=a,g=b,h=0,k=d-1,e=parseInt(d/2,10);h<e;){var m=f[g+h];f[g+h]=f[g+k];f[g+k]=m;h++;k--}b+=d}}},function(a,d){function g(a){return 32768<a?a-65536:a}function m(a){var b=a-k;0<=b?a=0:(a=8,b=-b);var c=h[e],d=c>>3;b>c&&(a|=4,b-=c,d+=c);c>>=1;b>c&&(a|=2,b-=c,d+=c);c>>=1;b>c&&(a|=1,d+=c);b=a;k=b&8?k-d:k+d;-32768>k?k=-32768:32767<k&&(k=32767);e+=l[b&7];0>e?e=0:88<e&&
(e=88);return a}function c(a){var b=0;a&4&&(b+=q);a&2&&(b+=q>>1);a&1&&(b+=q>>2);b+=q>>3;a&8&&(b=-b);n+=b;32767<n?n=32767:-32767>n&&(n=-32767);p+=l[a];0>p?p=0:88<p&&(p=88);q=h[p];return n}function b(a){var b=a[0];m(b);var c=[];c.push(b&255);c.push(b>>8&255);c.push(e);c.push(0);for(b=3;b<a.length;b+=2){var d=m(a[b]),f=m(a[b+1]);c.push(f<<4|d)}for(;256>c.length;)c.push(0);return c}function f(a){n=g(a[1]<<8|a[0]);p=a[2];q=h[p];for(var b=[n,g(a[3]<<8|a[2])],e=4;e<a.length;e++){var d=a[e],f=d>>4;b.push(c(f<<
4^d));b.push(c(f))}return b}var l=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],h=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],k=0,e=0,n=0,p=0,q=7;a.exports.encode=function(a){for(var e=
[],c=[],d=0;d<a.length;d++)if(c.push(a[d]),0==d%505&&0!=d||d==a.length-1)e=e.concat(b(c)),c=[];return e};a.exports.decode=function(a,b){b=void 0===b?256:b;for(var e=[],c=[],d=0;d<a.length;d++)0==d%b&&0!=d&&(e=e.concat(f(c)),c=[]),c.push(a[d]);return e};a.exports.encodeBlock=b;a.exports.decodeBlock=f},function(a,d,g){a.exports.alaw=g(11);a.exports.mulaw=g(12)},function(a,d){function g(a){var b=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],c;a=-32768==a?-32767:a;(c=~a>>8&128)||(a*=-1);32635<a&&(a=32635);256<=a?(b=b[a>>8&127],a=b<<4|a>>b+3&15):a>>=4;return a^c^85}function m(a){var b=0;a^=85;a&128&&(a&=-129,b=-1);var c=((a&240)>>4)+4;a=4!=c?1<<c|(a&15)<<c-4|1<<c-5:a<<1|1;return-8*(0===b?a:-a)}a.exports.encodeSample=g;a.exports.decodeSample=m;a.exports.encode=function(a){for(var b=[],
c=0;c<a.length;c++)b.push(g(a[c]));return b};a.exports.decode=function(a){for(var b=[],c=0;c<a.length;c++)b.push(m(a[c]));return b}},function(a,d){function g(a){if(0>a){a=132-a;var b=127}else a+=132,b=255;32767<a&&(a=32767);var c=0;var d=a>>7;d&240&&(d>>=4,c+=4);d&12&&(d>>=2,c+=2);d&2&&(c+=1);d=c;return(d<<4|a>>d+3&15)^b}function m(a){a=~a;var b=((a&15)<<3)+132<<((a&112)>>4);return a&128?132-b:b-132}a.exports.encodeSample=g;a.exports.decodeSample=m;a.exports.encode=function(a){for(var b=[],c=0;c<
a.length;c++)b.push(g(a[c]));return b};a.exports.decode=function(a){for(var b=[],c=0;c<a.length;c++)b.push(m(a[c]));return b}},function(a,d,g){var m=g(0),c=g(14),b=g(1),f=b.uInt8,l=b.uInt16,h=b.uInt32,k=b.chr;d=function(){var a=c.call(this)||this;a.samples=[];a.headerFormats_={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3};a.head_=0;return a};$jscomp.inherits(d,c);d.prototype.readRIFFChunk_=function(a){this.chunkId=b.unpackArray(a.slice(0,4),k);if("RIFF"!=this.chunkId&&"RIFX"!=this.chunkId)throw Error(m.format);
this.LEorBE_();this.chunkSize=b.unpack(a.slice(4,8),h);this.format=b.unpackArray(a.slice(8,12),k);if("WAVE"!=this.format)throw Error(m.wave);};d.prototype.LEorBE_=function(){var a="RIFX"==this.chunkId;f.be=a;l.be=a;return h.be=a};d.prototype.readFmtChunk_=function(a){if(a=this.findChunk_(a,"fmt "))this.fmtChunkId="fmt ",this.fmtChunkSize=a.chunkSize,this.audioFormat=b.unpack(a.chunkData.slice(0,2),l),this.numChannels=b.unpack(a.chunkData.slice(2,4),l),this.sampleRate=b.unpack(a.chunkData.slice(4,
8),h),this.byteRate=b.unpack(a.chunkData.slice(8,12),h),this.blockAlign=b.unpack(a.chunkData.slice(12,14),l),this.bitsPerSample=b.unpack(a.chunkData.slice(14,16),l),this.readFmtExtension_(a);else throw Error(m["fmt "]);};d.prototype.readFmtExtension_=function(a){16<this.fmtChunkSize&&(this.cbSize=b.unpack(a.chunkData.slice(16,18),l),18<this.fmtChunkSize&&(this.validBitsPerSample=b.unpack(a.chunkData.slice(18,20),l),20<this.fmtChunkSize&&(this.dwChannelMask=b.unpack(a.chunkData.slice(20,24),h),this.subformat1=
b.unpack(a.chunkData.slice(24,28),h),this.subformat2=b.unpack(a.chunkData.slice(28,32),h),this.subformat3=b.unpack(a.chunkData.slice(32,36),h),this.subformat4=b.unpack(a.chunkData.slice(36,40),h))))};d.prototype.readFactChunk_=function(a){if(a=this.findChunk_(a,"fact"))this.factChunkId="fact",this.factChunkSize=a.chunkSize,this.dwSampleLength=b.unpack(a.chunkData.slice(0,4),h);else if(this.enforceFact)throw Error(m.fact);};d.prototype.readBextChunk_=function(a){if(a=this.findChunk_(a,"bext"))this.bextChunkId=
"bext",this.bextChunkSize=a.chunkSize,this.bextChunkData_=a.chunkData,this.readBextChunkFields_()};d.prototype.readBextChunkFields_=function(){this.head_=0;this.bextChunkFields={description:this.readVariableSizeString_(this.bextChunkData_,256),originator:this.readVariableSizeString_(this.bextChunkData_,32),originatorReference:this.readVariableSizeString_(this.bextChunkData_,32),originationDate:this.readVariableSizeString_(this.bextChunkData_,10),originationTime:this.readVariableSizeString_(this.bextChunkData_,
8),timeReference:this.readBytes_(this.bextChunkData_,8),version:this.readFromChunk_(this.bextChunkData_,l),UMID:this.readVariableSizeString_(this.bextChunkData_,64),loudnessValue:this.readFromChunk_(this.bextChunkData_,l),loudnessRange:this.readFromChunk_(this.bextChunkData_,l),maxTruePeakLevel:this.readFromChunk_(this.bextChunkData_,l),maxMomentaryLoudness:this.readFromChunk_(this.bextChunkData_,l),maxShortTermLoudness:this.readFromChunk_(this.bextChunkData_,l),reserved:this.readVariableSizeString_(this.bextChunkData_,
180),codingHistory:this.readVariableSizeString_(this.bextChunkData_,this.bextChunkData_.length-602)}};d.prototype.readBytes_=function(a,b){var e=this.head_;this.head_+=b;return a.slice(e,this.head_)};d.prototype.readVariableSizeString_=function(a,c){for(var e="",d=0;d<c;d++)e+=b.unpack([a[this.head_]],k),this.head_++;return e};d.prototype.readFromChunk_=function(a,c){var e=c.bits/8;a=b.unpack(a.slice(this.head_,this.head_+e),c);this.head_+=e;return a};d.prototype.writeVariableSizeString_=function(a,
c){a=b.packArray(a,k);for(var e=a.length;e<c;e++)a.push(0);return a};d.prototype.readCueChunk_=function(a){if(a=this.findChunk_(a,"cue "))this.cueChunkId="cue ",this.cueChunkSize=a.chunkSize,this.cueChunkData_=a.chunkData};d.prototype.readDataChunk_=function(a,b){if(a=this.findChunk_(a,"data"))this.dataChunkId="data",this.dataChunkSize=a.chunkSize,this.samplesFromBytes_(a.chunkData,b);else throw Error(m.data);};d.prototype.samplesFromBytes_=function(a,c){c.bits=4==this.bitsPerSample?8:this.bitsPerSample;
c.signed=8==c.bits?!1:!0;c.float=3==this.audioFormat||64==this.bitsPerSample?!0:!1;c.single=!1;this.samples=b.unpackArray(a,new b.Type(c))};d.prototype.findChunk_=function(a,b){for(var c=0;c<a.length;c++)if(a[c].chunkId==b)return a[c];return null};d.prototype.samplesToBytes_=function(a){a.bits=4==this.bitsPerSample?8:this.bitsPerSample;a.signed=8==a.bits?!1:!0;a.float=3==this.audioFormat||64==this.bitsPerSample?!0:!1;a=b.packArray(this.samples,new b.Type(a));a.length%2&&a.push(0);return a};d.prototype.getBextBytes_=
function(){if(this.bextChunkId){var a=[].concat(this.writeVariableSizeString_(this.bextChunkFields.description,256));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originator,32));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originatorReference,32));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originationDate,10));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originationTime,8));a=a.concat(this.bextChunkFields.timeReference);a=a.concat(b.pack(this.bextChunkFields.version,
l));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.UMID,64));a=a.concat(b.pack(this.bextChunkFields.loudnessValue,l));a=a.concat(b.pack(this.bextChunkFields.loudnessRange,l));a=a.concat(b.pack(this.bextChunkFields.maxTruePeakLevel,l));a=a.concat(b.pack(this.bextChunkFields.maxMomentaryLoudness,l));a=a.concat(b.pack(this.bextChunkFields.maxShortTermLoudness,l));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.reserved,180));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.codingHistory,
this.bextChunkData_.length-602));return[].concat(b.packArray(this.bextChunkId,k),b.pack(a.length,h),a)}return[]};d.prototype.getCueBytes_=function(){return this.cueChunkId?[].concat(b.packArray(this.cueChunkId,k),b.pack(this.cueChunkSize,h),this.cueChunkData_):[]};d.prototype.getFactBytes_=function(){return this.factChunkId?[].concat(b.packArray(this.factChunkId,k),b.pack(this.factChunkSize,h),b.pack(this.dwSampleLength,h)):[]};d.prototype.getCbSizeBytes_=function(){return 16<this.fmtChunkSize?b.pack(this.cbSize,
l):[]};d.prototype.getValidBitsPerSampleBytes_=function(){return 18<this.fmtChunkSize?b.pack(this.validBitsPerSample,l):[]};d.prototype.getFmtExtensionBytes_=function(){return 20<this.fmtChunkSize?b.pack(this.dwChannelMask,h).concat(b.pack(this.subformat1,h),b.pack(this.subformat2,h),b.pack(this.subformat3,h),b.pack(this.subformat4,h)):[]};d.prototype.createWaveFile_=function(){var a={be:this.LEorBE_()};return b.packArray(this.chunkId,k).concat(b.pack(this.chunkSize,h),b.packArray(this.format,k),
this.getBextBytes_(),b.packArray(this.fmtChunkId,k),b.pack(this.fmtChunkSize,h),b.pack(this.audioFormat,l),b.pack(this.numChannels,l),b.pack(this.sampleRate,h),b.pack(this.byteRate,h),b.pack(this.blockAlign,l),b.pack(this.bitsPerSample,l),this.getCbSizeBytes_(),this.getValidBitsPerSampleBytes_(),this.getFmtExtensionBytes_(),this.getFactBytes_(),b.packArray(this.dataChunkId,k),b.pack(this.dataChunkSize,h),this.samplesToBytes_(a),this.getCueBytes_())};a.exports=d},function(a,d){a.exports=function(){this.chunkId=
"";this.chunkSize=0;this.fmtChunkId=this.format="";this.subformat4=this.subformat3=this.subformat2=this.subformat1=this.dwChannelMask=this.validBitsPerSample=this.cbSize=this.bitsPerSample=this.blockAlign=this.byteRate=this.sampleRate=this.numChannels=this.audioFormat=this.fmtChunkSize=0;this.factChunkId="";this.dwSampleLength=this.factChunkSize=0;this.cueChunkId="";this.cueChunkSize=-1;this.cueChunkData_=[];this.bextChunkId="";this.bextChunkSize=0;this.bextChunkFields={description:"",originator:"",
originatorReference:"",originationDate:"",originationTime:"",timeReference:[],version:"",UMID:"",loudnessValue:"",loudnessRange:"",maxTruePeakLevel:"",maxMomentaryLoudness:"",maxShortTermLoudness:"",reserved:"",codingHistory:""};this.ds64={riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0,tableLength:0,table:[]};this.dataChunkId="";this.dataChunkSize=0;this.bextChunkData_=[]}}]);
