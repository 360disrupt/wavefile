/*
 wavefile
 Read & write wave files with 4, 8, 11, 12, 16, 20, 24, 32 & 64-bit data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/wavefile

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,g){a!=Array.prototype&&a!=Object.prototype&&(a[b]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,g,h){if(b){g=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var e=a[h];e in g||(g[e]={});g=g[e]}a=a[a.length-1];h=g[a];b=b(h);b!=h&&null!=b&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(b,a){return b===a?0!==b||1/b===1/a:b!==b&&a!==a}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,g){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(g=g||0;g<e;g++)if(b[g]==a||Object.is(b[g],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,g){if(null==a)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return a+""};
(function(a){function b(h){if(g[h])return g[h].exports;var e=g[h]={i:h,l:!1,exports:{}};a[h].call(e.exports,e,e.exports,b);e.l=!0;return e.exports}var g={};b.m=a;b.c=g;b.d=function(a,e,g){b.o(a,e)||Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:g})};b.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};b.d(e,"a",e);return e};b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};b.p="";return b(b.s=1)})([function(a,b,g){function h(a,
d,b){var e=[];if(void 0===a)return e;l.assureType_(d,void 0===b?10:b);a.constructor==String?a.length>=d.offset&&(e=l.toBytes_(a.slice(0,d.offset),d)):e=l.toBytes_([a],d);return e}function e(a,d,b){l.assureType_(d,void 0===b?10:b);a=l.fromBytes_(a.slice(0,d.offset),d);return a=d["char"]?a.slice(0,d.offset):a?a[0]:null}var l=g(5);a.exports.pack=h;a.exports.unpack=e;a.exports.packArray=function(a,d,b){l.assureType_(d,void 0===b?10:b);return l.toBytes_(a,d)};a.exports.unpackArray=function(a,d,b){l.assureType_(d,
void 0===b?10:b);return l.fromBytes_(a,d)};a.exports.unpackStruct=function(a,d,b){b=void 0===b?10:b;if(a.length<l.getStructDefSize_(d))return[];for(var g=[],f=0,c=0;c<d.length;c++)g=g.concat(e(a.slice(f,f+d[c].offset),d[c],b)),f+=d[c].offset;return g};a.exports.packStruct=function(a,d,b){b=void 0===b?10:b;if(a.length<d.length)return[];for(var e=[],f=0;f<d.length;f++)e=e.concat(h(a[f],d[f],b));return e};a.exports.chr={bits:8,"char":!0};a.exports.fourCC={bits:32,"char":!0};a.exports.bool={bits:1};a.exports.int2=
{bits:2,signed:!0};a.exports.uInt2={bits:2};a.exports.int4={bits:4,signed:!0};a.exports.uInt4={bits:4};a.exports.int8={bits:8,signed:!0};a.exports.uInt8={bits:8};a.exports.int16={bits:16,signed:!0};a.exports.uInt16={bits:16};a.exports.float16={bits:16,"float":!0};a.exports.int24={bits:24,signed:!0};a.exports.uInt24={bits:24};a.exports.int32={bits:32,signed:!0};a.exports.uInt32={bits:32};a.exports.float32={bits:32,"float":!0};a.exports.int40={bits:40,signed:!0};a.exports.uInt40={bits:40};a.exports.int48=
{bits:48,signed:!0};a.exports.uInt48={bits:48};a.exports.float64={bits:64,"float":!0};a.exports.int16BE={bits:16,signed:!0,be:!0};a.exports.uInt16BE={bits:16,be:!0};a.exports.float16BE={bits:16,"float":!0,be:!0};a.exports.int24BE={bits:24,signed:!0,be:!0};a.exports.uInt24BE={bits:24,be:!0};a.exports.int32BE={bits:32,signed:!0,be:!0};a.exports.uInt32BE={bits:32,be:!0};a.exports.float32BE={bits:32,"float":!0,be:!0};a.exports.int40BE={bits:40,signed:!0,be:!0};a.exports.uInt40BE={bits:40,be:!0};a.exports.int48BE=
{bits:48,signed:!0,be:!0};a.exports.uInt48BE={bits:48,be:!0};a.exports.float64BE={bits:64,"float":!0,be:!0}},function(a,b,g){a=g(2);window.WaveFile=a},function(a,b,g){var h=g(3),e=g(4),l=g(8),n=g(9),d=g(0),m=g(0).uInt8,k=g(0).uInt16,f=g(0).uInt32;b=function(c){this.container="";this.chunkSize=0;this.format="";this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]};this.fact={chunkId:"",
chunkSize:0,dwSampleLength:0};this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]};this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""};this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,
sampleCountLow:0,tableLength:0,table:[]};this.data={chunkId:"",chunkSize:0,samples:[]};this.bitDepth="0";this.audioFormats_={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,40:65534,48:65534,64:3};this.head_=0;this.enforceFact_=!1;this.isInterleaved=!0;c&&this.fromBuffer(c)};b.prototype.fromScratch=function(c,d,a,b,f){f=void 0===f?{}:f;f.container||(f.container="RIFF");var e=((parseInt(a,10)-1|7)+1)/8;this.clearHeader_();this.bitDepth=a;this.container=f.container;this.chunkSize=36+b.length*e;this.format=
"WAVE";this.fmt.chunkId="fmt ";this.fmt.chunkSize=16;this.fmt.byteRate=c*e*d;this.fmt.blockAlign=c*e;this.fmt.audioFormat=this.audioFormats_[a]?this.audioFormats_[a]:65534;this.fmt.numChannels=c;this.fmt.sampleRate=d;this.fmt.bitsPerSample=parseInt(a,10);this.data.chunkId="data";this.data.samples=b;0<b.length&&b[0].constructor===Array&&(this.isInterleaved=!1,this.interleave());this.data.chunkSize=b.length*e;"4"==a&&(this.chunkSize=44+b.length,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=
256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact.chunkId="fact",this.fact.chunkSize=4,this.fact.dwSampleLength=2*b.length,this.data.chunkSize=b.length);if("8a"==a||"8m"==a)this.chunkSize=44+b.length,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact.chunkId="fact",this.fact.chunkSize=4,this.fact.dwSampleLength=b.length;65534==this.fmt.audioFormat&&(this.chunkSize=60+b.length*e,this.fmt.chunkSize=40,this.fmt.bitsPerSample=(parseInt(a,
10)-1|7)+1,this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(a,10),this.fmt.dwChannelMask=0,this.fmt.subformat=[1,1048576,2852126848,1905997824])};b.prototype.fromBuffer=function(c){this.readRIFFChunk_(c);var d="RIFX"==this.container;c=e.read(c,d);this.readDs64Chunk_(c.subChunks);this.readFmtChunk_(c.subChunks);this.readFactChunk_(c.subChunks);this.readBextChunk_(c.subChunks);this.readCueChunk_(c.subChunks);this.readDataChunk_(c.subChunks,{be:d,single:!0});this.bitDepth=3==this.fmt.audioFormat&&
32==this.fmt.bitsPerSample?"32f":6==this.fmt.audioFormat?"8a":7==this.fmt.audioFormat?"8m":this.fmt.bitsPerSample.toString()};b.prototype.toBuffer=function(){this.checkWriteInput_();this.assureInterleaved_();return this.createWaveFile_()};b.prototype.toRIFF=function(){"RF64"==this.container?this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,this.data.samples):(this.container="RIFF",this.LEorBE_())};b.prototype.toRIFX=function(){"RF64"==this.container?this.fromScratch(this.fmt.numChannels,
this.fmt.sampleRate,this.bitDepth,this.data.samples,{container:"RIFX"}):(this.container="RIFX",this.LEorBE_())};b.prototype.toBitDepth=function(c,d){var a=c,b=this.bitDepth;void 0===d||d||(a=this.realBitDepth_(c),b=this.realBitDepth_(this.bitDepth));this.assureInterleaved_();h.toBitDepth(this.data.samples,b,a);this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,c,this.data.samples,{container:this.correctContainer_()})};b.prototype.correctContainer_=function(){return"RF64"==this.container?"RIFF":
this.container};b.prototype.interleave=function(){if(!this.isInterleaved){for(var c=[],d=this.data.samples[0].length,a=0;a<d;a++)for(var b=0;b<this.data.samples.length;b++)c.push(this.data.samples[b][a]);this.data.samples=c;this.isInterleaved=!0}};b.prototype.deInterleave=function(){if(this.isInterleaved){var c=[],d;for(d=0;d<this.fmt.numChannels;d++)c[d]=[];d=0;for(var a;d<this.data.samples.length;){for(a=0;a<this.fmt.numChannels;a++)c[a].push(this.data.samples[d+a]);d+=a}this.data.samples=c;this.isInterleaved=
!1}};b.prototype.toIMAADPCM=function(){if(8E3!=this.fmt.sampleRate)throw Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!=this.fmt.numChannels)throw Error("Only mono files can be compressed as IMA-ADPCM.");this.assure16Bit_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"4",l.encode(this.data.samples),{container:this.correctContainer_()})};b.prototype.fromIMAADPCM=function(){this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",l.decode(this.data.samples,this.fmt.blockAlign),
{container:this.correctContainer_()})};b.prototype.toALaw=function(){this.assure16Bit_();this.assureInterleaved_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"8a",n.alaw.encode(this.data.samples),{container:this.correctContainer_()})};b.prototype.fromALaw=function(){this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",n.alaw.decode(this.data.samples),{container:this.correctContainer_()})};b.prototype.toMuLaw=function(){this.assure16Bit_();this.assureInterleaved_();this.fromScratch(this.fmt.numChannels,
this.fmt.sampleRate,"8m",n.mulaw.encode(this.data.samples),{container:this.correctContainer_()})};b.prototype.fromMuLaw=function(){this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",n.mulaw.decode(this.data.samples),{container:this.correctContainer_()})};b.prototype.realBitDepth_=function(c){"32f"!=c&&(c=((parseInt(c,10)-1|7)+1).toString());return c};b.prototype.checkWriteInput_=function(){this.validateBitDepth_();this.validateNumChannels_();this.validateSampleRate_()};b.prototype.validateBitDepth_=
function(){if(!this.audioFormats_[this.bitDepth]){if(8<parseInt(this.bitDepth,10)&&54>parseInt(this.bitDepth,10))return!0;throw Error("Invalid bit depth.");}return!0};b.prototype.validateNumChannels_=function(){var c=this.fmt.numChannels*this.fmt.bitsPerSample/8;if(1>this.fmt.numChannels||65535<c)throw Error("Invalid number of channels.");return!0};b.prototype.validateSampleRate_=function(){var c=this.fmt.bitsPerSample/8*this.fmt.numChannels*this.fmt.sampleRate;if(1>this.fmt.sampleRate||4294967295<
c)throw Error("Invalid sample rate.");return!0};b.prototype.clearHeader_=function(){this.fmt.cbSize=0;this.fmt.validBitsPerSample=0;this.fact.chunkId="";this.ds64.chunkId=""};b.prototype.assure16Bit_=function(){this.assureUncompressed_();"16"!=this.bitDepth&&this.toBitDepth("16")};b.prototype.assureUncompressed_=function(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()};b.prototype.assureInterleaved_=function(){this.isInterleaved||
this.interleave()};b.prototype.LEorBE_=function(){var c="RIFX"===this.container;m.be=c;k.be=c;return f.be=c};b.prototype.findChunk_=function(c,d){for(var a=0;a<c.length;a++)if(c[a].chunkId===d)return c[a];return null};b.prototype.readRIFFChunk_=function(c){this.container=d.unpackArray(c.slice(0,4),d.chr);if(-1===["RIFF","RIFX","RF64"].indexOf(this.container))throw Error("Not a supported format.");this.LEorBE_();this.chunkSize=d.unpack(c.slice(4,8),f);this.format=d.unpackArray(c.slice(8,12),d.chr);
if("WAVE"!=this.format)throw Error("Could not find the 'WAVE' format identifier");};b.prototype.readFmtChunk_=function(c){if(c=this.findChunk_(c,"fmt "))this.fmt.chunkId="fmt ",this.fmt.chunkSize=c.chunkSize,this.fmt.audioFormat=d.unpack(c.chunkData.slice(0,2),k),this.fmt.numChannels=d.unpack(c.chunkData.slice(2,4),k),this.fmt.sampleRate=d.unpack(c.chunkData.slice(4,8),f),this.fmt.byteRate=d.unpack(c.chunkData.slice(8,12),f),this.fmt.blockAlign=d.unpack(c.chunkData.slice(12,14),k),this.fmt.bitsPerSample=
d.unpack(c.chunkData.slice(14,16),k),this.readFmtExtension_(c);else throw Error("Could not find the 'fmt ' chunk");};b.prototype.readFmtExtension_=function(c){c=c.chunkData;16<this.fmt.chunkSize&&(this.fmt.cbSize=d.unpack(c.slice(16,18),k),18<this.fmt.chunkSize&&(this.fmt.validBitsPerSample=d.unpack(c.slice(18,20),k),20<this.fmt.chunkSize&&(this.fmt.dwChannelMask=d.unpack(c.slice(20,24),f),this.fmt.subformat=[d.unpack(c.slice(24,28),f),d.unpack(c.slice(28,32),f),d.unpack(c.slice(32,36),f),d.unpack(c.slice(36,
40),f)])))};b.prototype.readFactChunk_=function(c){if(c=this.findChunk_(c,"fact"))this.fact.chunkId="fact",this.fact.chunkSize=c.chunkSize,this.fact.dwSampleLength=d.unpack(c.chunkData.slice(0,4),f);else if(this.enforceFact_)throw Error("Could not find the 'fact' chunk");};b.prototype.readCueChunk_=function(c){var a=this.findChunk_(c,"cue ");if(a)for(c=a.chunkData,this.cue.chunkId="cue ",this.cue.chunkSize=a.chunkSize,this.cue.dwCuePoints=d.unpack(c.slice(0,4),f),a=0;a<this.cue.dwCuePoints;a++){var b=
4+24*a;this.cue.points.push({dwName:d.unpack(c.slice(b,b+4),f),dwPosition:d.unpack(c.slice(b+4,b+8),f),fccChunk:d.unpack(c.slice(b+8,b+12),d.fourCC),dwChunkStart:d.unpack(c.slice(b+12,b+16),f),dwBlockStart:d.unpack(c.slice(b+16,b+20),f),dwSampleOffset:d.unpack(c.slice(b+20,b+24),f)})}};b.prototype.readDataChunk_=function(c,d){if(c=this.findChunk_(c,"data"))this.data.chunkId="data",this.data.chunkSize=c.chunkSize,this.samplesFromBytes_(c.chunkData,d);else throw Error("Could not find the 'data' chunk");
};b.prototype.readBextChunk_=function(c){if(c=this.findChunk_(c,"bext"))c=c.chunkData,this.head_=0,this.bext={chunkId:"bext",chunkSize:c.length,description:this.readString_(c,256),originator:this.readString_(c,32),originatorReference:this.readString_(c,32),originationDate:this.readString_(c,10),originationTime:this.readString_(c,8),timeReference:[this.readFromChunk_(c,f),this.readFromChunk_(c,f)],version:this.readFromChunk_(c,k),UMID:this.readString_(c,64),loudnessValue:this.readFromChunk_(c,k),loudnessRange:this.readFromChunk_(c,
k),maxTruePeakLevel:this.readFromChunk_(c,k),maxMomentaryLoudness:this.readFromChunk_(c,k),maxShortTermLoudness:this.readFromChunk_(c,k),reserved:this.readString_(c,180),codingHistory:this.readString_(c,c.length-602)}};b.prototype.readDs64Chunk_=function(c){if(c=this.findChunk_(c,"ds64")){var a=c.chunkData;this.ds64.chunkId=c.chunkId;this.ds64.chunkSize=c.chunkSize;this.ds64.riffSizeHigh=d.unpack(a.slice(0,4),f);this.ds64.riffSizeLow=d.unpack(a.slice(4,8),f);this.ds64.dataSizeHigh=d.unpack(a.slice(8,
12),f);this.ds64.dataSizeLow=d.unpack(a.slice(12,16),f);this.ds64.originationTime=d.unpack(a.slice(16,20),f);this.ds64.sampleCountHigh=d.unpack(a.slice(20,24),f);this.ds64.sampleCountLow=d.unpack(a.slice(24,28),f)}else if("RF64"==this.container)throw Error("Could not find the 'ds64' chunk");};b.prototype.readString_=function(c,a){for(var b="",f=0;f<a;f++)b+=d.unpack([c[this.head_]],d.chr),this.head_++;return b};b.prototype.readFromChunk_=function(c,a){var b=a.bits/8;c=d.unpack(c.slice(this.head_,
this.head_+b),a);this.head_+=b;return c};b.prototype.writeString_=function(c,a){c=d.packArray(c,d.chr);for(var b=c.length;b<a;b++)c.push(0);return c};b.prototype.samplesToBytes_=function(c){c.bits=4==this.fmt.bitsPerSample?8:this.fmt.bitsPerSample;c.signed=8==c.bits?!1:!0;c.float=3==this.fmt.audioFormat||64==this.fmt.bitsPerSample?!0:!1;c=d.packArray(this.data.samples,c);c.length%2&&c.push(0);return c};b.prototype.samplesFromBytes_=function(c,a){a.bits=4==this.fmt.bitsPerSample?8:this.fmt.bitsPerSample;
a.signed=8==a.bits?!1:!0;a.float=3==this.fmt.audioFormat||64==this.fmt.bitsPerSample?!0:!1;a.single=!1;this.data.samples=d.unpackArray(c,a)};b.prototype.getBextBytes_=function(){return this.bext.chunkId?[].concat(d.packArray(this.bext.chunkId,d.chr),d.pack(this.bext.chunkSize,f),this.writeString_(this.bext.description,256),this.writeString_(this.bext.originator,32),this.writeString_(this.bext.originatorReference,32),this.writeString_(this.bext.originationDate,10),this.writeString_(this.bext.originationTime,
8),d.pack(this.bext.timeReference[0],f),d.pack(this.bext.timeReference[1],f),d.pack(this.bext.version,k),this.writeString_(this.bext.UMID,64),d.pack(this.bext.loudnessValue,k),d.pack(this.bext.loudnessRange,k),d.pack(this.bext.maxTruePeakLevel,k),d.pack(this.bext.maxMomentaryLoudness,k),d.pack(this.bext.maxShortTermLoudness,k),this.writeString_(this.bext.reserved,180),this.writeString_(this.bext.codingHistory,this.bext.chunkSize-602)):[]};b.prototype.getDs64Bytes_=function(){var c=[];this.ds64.chunkId&&
(c=c.concat(d.packArray(this.ds64.chunkId,d.chr),d.pack(this.ds64.chunkSize,f),d.pack(this.ds64.riffSizeHigh,f),d.pack(this.ds64.riffSizeLow,f),d.pack(this.ds64.dataSizeHigh,f),d.pack(this.ds64.dataSizeLow,f),d.pack(this.ds64.originationTime,f),d.pack(this.ds64.sampleCountHigh,f),d.pack(this.ds64.sampleCountLow,f)));return c};b.prototype.getCueBytes_=function(){return this.cue.chunkId?[].concat(d.packArray(this.cue.chunkId,d.chr),d.pack(this.cue.chunkSize,f),d.pack(this.cue.dwCuePoints,f),this.getCuePointsBytes_()):
[]};b.prototype.getCuePointsBytes_=function(){for(var c=[],a=0;a<this.cue.dwCuePoints;a++)c=c.concat(d.pack(this.cue.points[a].dwName,f),d.pack(this.cue.points[a].dwPosition,f),d.pack(this.cue.points[a].fccChunk,d.fourCC),d.pack(this.cue.points[a].dwChunkStart,f),d.pack(this.cue.points[a].dwBlockStart,f),d.pack(this.cue.points[a].dwSampleOffset,f));return c};b.prototype.getFactBytes_=function(){return this.fact.chunkId?[].concat(d.packArray(this.fact.chunkId,d.chr),d.pack(this.fact.chunkSize,f),d.pack(this.fact.dwSampleLength,
f)):[]};b.prototype.getFmtBytes_=function(){if(this.fmt.chunkId)return[].concat(d.packArray(this.fmt.chunkId,d.chr),d.pack(this.fmt.chunkSize,f),d.pack(this.fmt.audioFormat,k),d.pack(this.fmt.numChannels,k),d.pack(this.fmt.sampleRate,f),d.pack(this.fmt.byteRate,f),d.pack(this.fmt.blockAlign,k),d.pack(this.fmt.bitsPerSample,k),this.getFmtExtensionBytes_());throw Error("Could not find the 'fmt ' chunk");};b.prototype.getFmtExtensionBytes_=function(){var c=[];16<this.fmt.chunkSize&&(c=c.concat(d.pack(this.fmt.cbSize,
k)));18<this.fmt.chunkSize&&(c=c.concat(d.pack(this.fmt.validBitsPerSample,k)));20<this.fmt.chunkSize&&(c=c.concat(d.pack(this.fmt.dwChannelMask,f)));24<this.fmt.chunkSize&&(c=c.concat(d.pack(this.fmt.subformat[0],f),d.pack(this.fmt.subformat[1],f),d.pack(this.fmt.subformat[2],f),d.pack(this.fmt.subformat[3],f)));return c};b.prototype.createWaveFile_=function(){var c={be:this.LEorBE_()};return new Uint8Array([].concat(d.packArray(this.container,d.chr),d.pack(this.chunkSize,f),d.packArray(this.format,
d.chr),this.getDs64Bytes_(),this.getBextBytes_(),this.getFmtBytes_(),this.getFactBytes_(),d.packArray(this.data.chunkId,d.chr),d.pack(this.data.chunkSize,f),this.samplesToBytes_(c),this.getCueBytes_()))};a.exports=b},function(a,b){function g(a,c,b){if(c!=b){m(c);m(b);var f=["32f","64"].includes(c)?["32f","64"].includes(b)?d:l:["32f","64"].includes(b)?n:e;var g={oldMin:Math.pow(2,parseInt(c,10))/2,newMin:Math.pow(2,parseInt(b,10))/2,oldMax:Math.pow(2,parseInt(c,10))/2-1,newMax:Math.pow(2,parseInt(b,
10))/2-1};h(a,c,!1);for(c=0;c<a.length;c++)a[c]=f(a[c],g);h(a,b,!0)}}function h(a,c,d){if("8"==c)if(d)for(c=0;c<a.length;c++)a[c]+=128;else for(c=0;c<a.length;c++)a[c]-=128}function e(a,c){return a=0<a?parseInt(a/c.oldMax*c.newMax,10):parseInt(a/c.oldMin*c.newMin,10)}function l(a,c){return parseInt(0<a?a*c.newMax:a*c.newMin,10)}function n(a,c){return 0<a?a/c.oldMax:a/c.oldMin}function d(a){k[0]=a;return a=k[0]}function m(a){if("32f"!=a&&"64"!=a&&("8">parseInt(a,10)||"53"<parseInt(a,10)))throw Error("Invalid bit depth.");
return!0}var k=new Float32Array(1);a.exports=g;a.exports.toBitDepth=g},function(a,b,g){function h(a){m.be="RIFX"===a.chunkId;var b=d.packArray(a.chunkId,d.chr).concat(d.pack(a.chunkSize,m),d.packArray(a.format,d.chr),e(a.subChunks));if("RIFF"===a.chunkId||"RIFX"===a.chunkId)b=new Uint8Array(b);return b}function e(a){for(var b=[],c=0;c<a.length;)b="LIST"===a[c].chunkId?b.concat(h(a[c])):b.concat(d.packArray(a[c].chunkId,d.chr),d.pack(a[c].chunkSize,m),a[c].chunkData),c++;return b}function l(a){for(var b=
[],c=12;c<a.length;)b.push(n(a,c)),c+=8+b[b.length-1].chunkSize;return b}function n(a,b){var c={chunkId:d.unpackArray(a.slice(b,b+4),d.chr),chunkSize:d.unpack(a.slice(b+4,b+8),m)};"LIST"===c.chunkId?(c.format=d.unpackArray(a.slice(8,12),d.chr),c.subChunks=l(a.slice(b,b+c.chunkSize))):c.chunkData=a.slice(b+8,b+8+c.chunkSize);return c}var d=g(0),m=d.uInt32;a.exports.read=function(a){a=[].slice.call(a);var b=d.unpackArray(a.slice(0,4),d.chr);m.be="RIFX"===b;return{chunkId:b,chunkSize:d.unpack(a.slice(4,
8),m),format:d.unpackArray(a.slice(8,12),d.chr),subChunks:l(a)}};a.exports.write=h},function(a,b,g){function h(a,c){return p.read(a,c)}function e(a,c){a=p.read(a,c);c=(a&31744)>>10;var b=a&1023;return(c?Math.pow(2,c-15)*(1+b/1024):b/1024*.00006103515625)*(a>>15?-1:1)}function l(a,c){x[0]=p.read(a,c);return y[0]}function n(a,c){w[0]=p.read(a,c);w[1]=p.read(a,c+4);return z[0]}function d(a,c){for(var b="",d=0;d<p.offset;d++)b+=String.fromCharCode(a[c+d]);return b}function m(a,c,b){return p.write(a,c,
b)}function k(a,c,b){y[0]=c;var d=x[0];c=d>>16&32768;var e=d>>12&2047;d=d>>23&255;103<=d&&(c=(c|d-112<<10|e>>1)+(e&1));a[b++]=c&255;a[b++]=c>>>8&255;return b}function f(a,c,b){y[0]=c;return b=p.write(a,x[0],b)}function c(a,c,b){z[0]=c;b=p.write(a,w[0],b);return p.write(a,w[1],b)}function q(a,c,b){a[b++]=c.charCodeAt(0);return b}var r=g(6),v=g(7);b=new Int8Array(4);var x=new Int32Array(b.buffer,0,1),y=new Float32Array(b.buffer,0,1);b=new Int8Array(8);var z=new Float64Array(b.buffer),w=new Uint32Array(b.buffer),
t,u,p;a.exports.toBytes_=function(a,c){for(var b=0,d=[],e=0;e<a.length;e++)b=u(d,a[e],b);a=d;c.be&&r(a,c.offset);if(10!=c.base){b=c.base;for(d=0;d<a.length;d++)a[d]=a[d].toString(b);b=a;c=(2==c.base?8:2)+1;for(d=0;d<b.length;d++)b[d]=Array(c-b[d].length).join("0")+b[d]}return a};a.exports.fromBytes_=function(a,c){c.be&&r(a,c.offset);if(10!=c.base)for(var b=c.base,d=0;d<a.length;d++)a[d]=parseInt(a[d],b);b=[];d=0;for(var e=a.length-(c.offset-1);d<e;)b.push(t(a,d)),d+=c.offset;c["char"]&&(b=b.join(""));
return b};a.exports.getStructDefSize_=function(a){for(var c=0,b=0;b<a.length;b++)c+=a[b].offset;return c};a.exports.assureType_=function(a,b){a.offset=8>a.bits?1:Math.ceil(a.bits/8);a.base=b;a["float"]?16==a.bits?t=e:32==a.bits?t=l:64==a.bits&&(t=n):t=a["char"]?d:h;a["float"]?16==a.bits?u=k:32==a.bits?u=f:64==a.bits&&(u=c):u=a["char"]?q:m;p=a["float"]?64==a.bits?new v(32,!1):32==a.bits?new v(32,!0):new v(16,!1):new v(a.bits,a.signed)}},function(a,b){a.exports=function(a,b){for(var e=a.length,g=0;g<
e;){for(var h=a,d=g,m=0,k=b-1,f=parseInt(b/2,10);m<f;){var c=h[d+m];h[d+m]=h[d+k];h[d+k]=c;m++;k--}g+=b}}},function(a,b){b=function(a,b){this.bits=a;this.signed=void 0===b?!1:b;this.reader=this.read;this.writer=this.write;this.offset=0;this.min=-Infinity;this.max=Infinity;this.realBits_=this.bits;this.lastByteMask_=255;this.build_()};b.prototype.read=function(a,b){b=void 0===b?0:b;if(32<this.bits)return this.readBits_(a,b);for(var e=0,g=this.offset-1;0<g;)e|=a[g+b]<<8*g,g--;e=(a[b]|e)>>>0;return this.overflow_(this.sign_(e))};
b.prototype.write=function(a,b,e){e=void 0===e?0:e;b=this.overflow_(b);var g=255;e=this.writeFirstByte_(a,b,e);for(var h=2;h<=this.offset;h++)h==this.offset&&(g=this.lastByteMask_),a[e++]=Math.floor(b/Math.pow(2,8*(h-1)))&g;return e};b.prototype.readBits_=function(a,b){b=void 0===b?0:b;for(var e="",g=0;g<this.offset;){var h=a[b+g].toString(2);e=Array(9-h.length).join("0")+h+e;g++}return this.overflow_(this.sign_(parseInt(e,2)))};b.prototype.build_=function(){this.validateWordSize_();this.setRealBits_();
this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?1:Math.ceil(this.realBits_/8)};b.prototype.sign_=function(a){a>this.max&&(a-=2*this.max+2);return a};b.prototype.overflow_=function(a){a>this.max?a=this.max:a<this.min&&(a=this.min);return a};b.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};b.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");};b.prototype.setRealBits_=
function(){8<this.bits&&(this.realBits_=(this.bits-1|7)+1)};b.prototype.setLastByteMask_=function(){var a=8-(this.realBits_-this.bits);this.lastByteMask_=Math.pow(2,0<a?a:8)-1};b.prototype.writeFirstByte_=function(a,b,e){8>this.bits?a[e++]=0>b?b+Math.pow(2,this.bits):b:a[e++]=b&255;return e};a.exports=b},function(a,b){function g(a){return 32768<a?a-65536:a}function h(a){var b=a-k;0<=b?a=0:(a=8,b=-b);var c=m[f],e=c>>3;b>c&&(a|=4,b-=c,e+=c);c>>=1;b>c&&(a|=2,b-=c,e+=c);c>>=1;b>c&&(a|=1,e+=c);b=a;k=b&
8?k-e:k+e;-32768>k?k=-32768:32767<k&&(k=32767);f+=d[b&7];0>f?f=0:88<f&&(f=88);return a}function e(a){var b=0;a&4&&(b+=r);a&2&&(b+=r>>1);a&1&&(b+=r>>2);b+=r>>3;a&8&&(b=-b);c+=b;32767<c?c=32767:-32767>c&&(c=-32767);q+=d[a];0>q?q=0:88<q&&(q=88);r=m[q];return c}function l(a){var b=a[0];h(b);var c=[];c.push(b&255);c.push(b>>8&255);c.push(f);c.push(0);for(b=3;b<a.length;b+=2){var d=h(a[b]),e=h(a[b+1]);c.push(e<<4|d)}for(;256>c.length;)c.push(0);return c}function n(a){c=g(a[1]<<8|a[0]);q=a[2];r=m[q];for(var b=
[c,g(a[3]<<8|a[2])],d=4;d<a.length;d++){var f=a[d],h=f>>4;b.push(e(h<<4^f));b.push(e(h))}return b}var d=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],m=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,
27086,29794,32767],k=0,f=0,c=0,q=0,r=7;a.exports.encode=function(a){for(var b=[],c=[],d=0;d<a.length;d++)if(c.push(a[d]),0==d%505&&0!=d||d==a.length-1)b=b.concat(l(c)),c=[];return b};a.exports.decode=function(a,b){b=void 0===b?256:b;for(var c=[],d=[],e=0;e<a.length;e++)0==e%b&&0!=e&&(c=c.concat(n(d)),d=[]),d.push(a[e]);return c};a.exports.encodeBlock=l;a.exports.decodeBlock=n},function(a,b,g){a.exports.alaw=g(10);a.exports.mulaw=g(11)},function(a,b){function g(a){var b=[1,1,2,2,3,3,3,3,4,4,4,4,4,
4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],e;a=-32768==a?-32767:a;(e=~a>>8&128)||(a*=-1);32635<a&&(a=32635);256<=a?(b=b[a>>8&127],a=b<<4|a>>b+3&15):a>>=4;return a^e^85}function h(a){var b=0;a^=85;a&128&&(a&=-129,b=-1);var e=((a&240)>>4)+4;a=4!=e?1<<e|(a&15)<<e-4|1<<e-5:a<<1|1;return-8*(0===b?a:-a)}a.exports.encodeSample=
g;a.exports.decodeSample=h;a.exports.encode=function(a){for(var b=[],e=0;e<a.length;e++)b.push(g(a[e]));return b};a.exports.decode=function(a){for(var b=[],e=0;e<a.length;e++)b.push(h(a[e]));return b}},function(a,b){function g(a){if(0>a){a=132-a;var b=127}else a+=132,b=255;32767<a&&(a=32767);var e=0;var d=a>>7;d&240&&(d>>=4,e+=4);d&12&&(d>>=2,e+=2);d&2&&(e+=1);d=e;return(d<<4|a>>d+3&15)^b}function h(a){a=~a;var b=((a&15)<<3)+132<<((a&112)>>4);return a&128?132-b:b-132}a.exports.encodeSample=g;a.exports.decodeSample=
h;a.exports.encode=function(a){for(var b=[],e=0;e<a.length;e++)b.push(g(a[e]));return b};a.exports.decode=function(a){for(var b=[],e=0;e<a.length;e++)b.push(h(a[e]));return b}}]);