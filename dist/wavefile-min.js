/*
 byte-data
 Read and write data to and from byte buffers.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

 alawmulaw
 JavaScript A-Law and mu-Law codecs.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/alawmulaw

 wavefile
 Read & write wave files with 4, 8, 16, 24, 32 & 64-bit data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/wavefile

 endianness
 Swap endianness in byte arrays.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/endianness

 bitdepth
 Change the bit depth of samples to and from 8, 16, 24, 32 & 64-bit.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/bitdepth

 riff-chunks
 Read and write the chunks of RIFF and RIFX files.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/riff-chunks

 imaadpcm
 JavaScript IMA ADPCM codec.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/imaadpcm

 References:
 http://www.cs.columbia.edu/~hgs/audio/dvi/
 https://github.com/acida/pyima
 https://wiki.multimedia.cx/index.php/IMA_ADPCM

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var d=function(){};d.prototype=a;return new d};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},d={};try{return d.__proto__=a,d.a}catch(f){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,d){a.__proto__=d;if(a.__proto__!==d)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,d){a.prototype=$jscomp.objectCreate(d.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var f=$jscomp.setPrototypeOf;f(a,d)}else for(f in d)if("prototype"!=f)if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(d,f);c&&Object.defineProperty(a,f,c)}else a[f]=d[f];a.superClass_=d.prototype};$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,f){a!=Array.prototype&&a!=Object.prototype&&(a[d]=f.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,f,c){if(d){f=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var h=a[c];h in f||(f[h]={});f=f[h]}a=a[a.length-1];c=f[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,f){for(var c=1;c<arguments.length;c++){var h=arguments[c];if(h)for(var d in h)$jscomp.owns(h,d)&&(a[d]=h[d])}return a}},"es6","es3");
$jscomp.polyfill("Object.is",function(a){return a?a:function(a,f){return a===f?0!==a||1/a===1/f:a!==a&&f!==f}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,f){var c=this;c instanceof String&&(c=String(c));var h=c.length;for(f=f||0;f<h;f++)if(c[f]==a||Object.is(c[f],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,d,f){if(null==a)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,f){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,f||0)}},"es6","es3");
(function(a){function d(c){if(f[c])return f[c].exports;var h=f[c]={i:c,l:!1,exports:{}};a[c].call(h.exports,h,h.exports,d);h.l=!0;return h.exports}var f={};d.m=a;d.c=f;d.d=function(a,h,e){d.o(a,h)||Object.defineProperty(a,h,{configurable:!1,enumerable:!0,get:e})};d.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(c,"a",c);return c};d.o=function(a,h){return Object.prototype.hasOwnProperty.call(a,h)};d.p="";return d(d.s=4)})([function(a,d,f){function c(a,
b,c){c=void 0===c?10:c;var g=[];b.char?g=b.char?a.slice(0,b.realBits/8):a:Array.isArray(a)||(g=[a]);return e.toBytes(g,e.getType(b,c))}function h(a,b,c){c=void 0===c?10:c;a=e.fromBytes(a.slice(0,8>b.bits?b.bits:b.realBits/8),e.getType(b,c));return a=b.char?a.slice(0,b.bits/8):a[0]}var e=f(5),b=f(1);a.exports.pack=c;a.exports.unpack=h;a.exports.packArray=function(a,b,c){return e.toBytes(a,e.getType(b,void 0===c?10:c))};a.exports.unpackArray=function(a,b,c){return e.fromBytes(a,e.getType(b,void 0===
c?10:c))};a.exports.unpackStruct=function(a,b,c){c=void 0===c?10:c;for(var g=a.length,e=0,d=0;d<b.length;d++)e+=b[d].realBits/8;if(g<e)return[];g=[];for(d=e=0;e<b.length;){var f=8>b[e].bits?1:b[e].realBits/8;g=g.concat(h(a.slice(d,d+f),b[e],c));d+=f;e++}return g};a.exports.packStruct=function(a,b,e){e=void 0===e?10:e;if(a.length<b.length)return[];for(var g=[],d=0;d<b.length;d++)g=g.concat(c(a[d],b[d],e));return g};a.exports.findString=function(a,c){for(var e,g=0;g<a.length;g++)if(e=h(a.slice(g,g+
c.length+1),new b({bits:8*c.length,"char":!0})),e==c)return g;return-1};a.exports.Type=b;a.exports.chr=new b({bits:8,"char":!0});a.exports.fourCC=new b({bits:32,"char":!0});a.exports.bool=new b({bits:1});a.exports.int2=new b({bits:2,signed:!0});a.exports.uInt2=new b({bits:2});a.exports.int4=new b({bits:4,signed:!0});a.exports.uInt4=new b({bits:4});a.exports.int8=new b({bits:8,signed:!0});a.exports.uInt8=new b({bits:8});a.exports.int16=new b({bits:16,signed:!0});a.exports.uInt16=new b({bits:16});a.exports.float16=
new b({bits:16,"float":!0});a.exports.int24=new b({bits:24,signed:!0});a.exports.uInt24=new b({bits:24});a.exports.int32=new b({bits:32,signed:!0});a.exports.uInt32=new b({bits:32});a.exports.float32=new b({bits:32,"float":!0});a.exports.int40=new b({bits:40,signed:!0});a.exports.uInt40=new b({bits:40});a.exports.int48=new b({bits:48,signed:!0});a.exports.uInt48=new b({bits:48});a.exports.float64=new b({bits:64,"float":!0});a.exports.int16BE=new b({bits:16,signed:!0,be:!0});a.exports.uInt16BE=new b({bits:16,
be:!0});a.exports.float16BE=new b({bits:16,"float":!0,be:!0});a.exports.int24BE=new b({bits:24,signed:!0,be:!0});a.exports.uInt24BE=new b({bits:24,be:!0});a.exports.int32BE=new b({bits:32,signed:!0,be:!0});a.exports.uInt32BE=new b({bits:32,be:!0});a.exports.float32BE=new b({bits:32,"float":!0,be:!0});a.exports.int40BE=new b({bits:40,signed:!0,be:!0});a.exports.uInt40BE=new b({bits:40,be:!0});a.exports.int48BE=new b({bits:48,signed:!0,be:!0});a.exports.uInt48BE=new b({bits:48,be:!0});a.exports.float64BE=
new b({bits:64,"float":!0,be:!0})},function(a,d,f){var c=new Float32Array(1),h=new Int32Array(c.buffer),e=new Float64Array(1),b=new Uint32Array(e.buffer),k=f(6);d=function(a){var b=k.call(this,a)||this;b.char=a["char"];b.float=a["float"];b.buildType_();return b};$jscomp.inherits(d,k);d.BitDepthMaxValues=k.BitDepthMaxValues;d.toBitDepth=k.toBitDepth;d.prototype.read16F_=function(a,b){a=this.read_(a,b,{bits:16,offset:2});b=(a&31744)>>10;var g=a&1023;return(b?Math.pow(2,b-15)*(1+g/1024):g/1024*.00006103515625)*
(a>>15?-1:1)};d.prototype.read32F_=function(a,b){h[0]=this.read_(a,b,{bits:32,offset:4});return c[0]};d.prototype.read64F_=function(a,c){b[0]=this.read_(a,c,{bits:32,offset:4});b[1]=this.read_(a,c+4,{bits:32,offset:4});return e[0]};d.prototype.readChar_=function(a,b){for(var g="",c=0;c<this.offset;)g+=String.fromCharCode(a[b+c]),c++;return g};d.prototype.write64F_=function(a,c,g){e[0]=c;c={bits:32,offset:4,lastByteMask:255};g=this.write_(a,b[0],g,c);return this.write_(a,b[1],g,c)};d.prototype.write32F_=
function(a,b,g,e){c[0]=b;return g=this.write_(a,h[0],g,e)};d.prototype.write16F_=function(a,b,g){c[0]=b;var e=h[0];b=e>>16&32768;var d=e>>12&2047;e=e>>23&255;103<=e&&(b=(b|e-112<<10|d>>1)+(d&1));a[g++]=b&255;a[g++]=b>>>8&255;return g};d.prototype.writeChar_=function(a,b,g){a[g++]=b.charCodeAt(0);return g};d.prototype.buildType_=function(){this.setReader_();this.setWriter_();this.float&&(this.min=-Infinity,this.max=Infinity)};d.prototype.setReader_=function(){this.float?16==this.bits?this.reader=this.read16F_:
32==this.bits?this.reader=this.read32F_:64==this.bits&&(this.reader=this.read64F_):this.char?this.reader=this.readChar_:32<this.bits&&(this.reader=this.readBits_)};d.prototype.setWriter_=function(){this.float?16==this.bits?this.writer=this.write16F_:32==this.bits?this.writer=this.write32F_:64==this.bits&&(this.writer=this.write64F_):this.char&&(this.writer=this.writeChar_)};a.exports=d},function(a,d){a.exports={format:"Not a supported format.",wave:"Could not find the 'WAVE' format identifier","fmt ":"Could not find the 'fmt ' chunk",
data:"Could not find the 'data' chunk",fact:"Could not find the 'fact' chunk",bitDepth:"Invalid bit depth.",numChannels:"Invalid number of channels.",sampleRate:"Invalid sample rate."}},function(a,d,f){a.exports.alaw=f(14);a.exports.mulaw=f(15)},function(a,d,f){f(0);var c=f(8),h=f(2),e=f(9),b=f(12),k=f(13),l=f(3).alaw,m=f(3).mulaw;a=function(g){var a=e.call(this)||this;g&&a.fromBuffer(g);return a};$jscomp.inherits(a,e);a.prototype.fromScratch=function(a,b,c,e,d){d=void 0===d?{}:d;this.validBitsPerSample=
this.cbSize=0;this.factChunkId="";this.factChunkSize=0;this.factChunkData=[];this.dwSampleLength=0;d.container||(d.container="RIFF");var g=parseInt(c,10)/8;this.chunkSize=36+e.length*g;this.fmtChunkSize=16;this.byteRate=a*g*b;this.blockAlign=a*g;this.chunkId=d.container;this.format="WAVE";this.fmtChunkId="fmt ";this.audioFormat=this.headerFormats_[c];this.numChannels=a;this.sampleRate=b;this.bitsPerSample=parseInt(c,10);this.dataChunkId="data";this.dataChunkSize=e.length*g;this.samples=e;this.bitDepth=
c;"4"==c&&(this.chunkSize=44+e.length,this.fmtChunkSize=20,this.byteRate=4055,this.blockAlign=256,this.bitsPerSample=4,this.dataChunkSize=e.length,this.cbSize=2,this.validBitsPerSample=505,this.factChunkId="fact",this.factChunkSize=4,this.dwSampleLength=2*e.length);if("8a"==c||"8m"==c)this.chunkSize=44+e.length,this.fmtChunkSize=20,this.cbSize=2,this.validBitsPerSample=8,this.factChunkId="fact",this.factChunkSize=4,this.dwSampleLength=e.length};a.prototype.fromBuffer=function(a){this.readRIFFChunk_(a);
var g="RIFX"==this.chunkId;a=b.read(a,g);this.readFmtChunk_(a.subChunks);this.readFactChunk_(a.subChunks);this.readBextChunk_(a.subChunks);this.readCueChunk_(a.subChunks);this.readDataChunk_(a.subChunks,{be:g,single:!0});this.bitDepth=3==this.audioFormat&&32==this.bitsPerSample?"32f":this.bitsPerSample.toString()};a.prototype.toBuffer=function(){this.checkWriteInput_();return new Uint8Array(this.createWaveFile_())};a.prototype.toRIFF=function(){this.chunkId="RIFF";this.LEorBE()};a.prototype.toRIFX=
function(){this.chunkId="RIFX";this.LEorBE()};a.prototype.toBitDepth=function(a){c.toBitDepth(this.samples,this.bitDepth,a);this.fromScratch(this.numChannels,this.sampleRate,a,this.samples,{container:this.chunkId})};a.prototype.interleave=function(){var a=[],b,c,e=this.samples[0].length;for(b=0;b<e;b++)for(c=0;c<this.samples.length;c++)a.push(this.samples[c][b]);this.samples=a};a.prototype.deInterleave=function(){var a=[],b;for(b=0;b<this.numChannels;b++)a[b]=[];b=0;for(var c;b<this.samples.length;){for(c=
0;c<this.numChannels;c++)a[c].push(this.samples[b+c]);b+=c}this.samples=a};a.prototype.toIMAADPCM=function(){this.fromScratch(this.numChannels,this.sampleRate,"4",k.encode(this.samples),{container:this.chunkId})};a.prototype.fromIMAADPCM=function(a){this.fromScratch(this.numChannels,this.sampleRate,"16",k.decode(this.samples,void 0===a?256:a),{container:this.chunkId})};a.prototype.toALaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"8a",l.encode(this.samples),{container:this.chunkId})};
a.prototype.fromALaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"16",l.decode(this.samples),{container:this.chunkId})};a.prototype.toMuLaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"8m",m.encode(this.samples),{container:this.chunkId})};a.prototype.fromMuLaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"16",m.decode(this.samples),{container:this.chunkId})};a.prototype.checkWriteInput_=function(){this.validateBitDepth_();this.validateNumChannels_();
this.validateSampleRate_()};a.prototype.validateBitDepth_=function(){if(!this.headerFormats_[this.bitDepth])throw Error(h.bitDepth);return!0};a.prototype.validateNumChannels_=function(){var a=this.numChannels*this.bitsPerSample/8;if(1>this.numChannels||65535<a)throw Error(h.numChannels);return!0};a.prototype.validateSampleRate_=function(){var a=this.bitsPerSample/8*this.numChannels*this.sampleRate;if(1>this.sampleRate||4294967295<a)throw Error(h.sampleRate);return!0};window.WaveFile=a},function(a,
d,f){var c=f(1),h=f(7);a.exports.getType=function(a,b){a=Object.assign(new c({}),a);a.base=b;return a};a.exports.toBytes=function(a,b){for(var c=0,d=0,e=a.length,g=[];c<e;)d=b.writer(g,a[c++],d);b.be&&h(g,b.offset);if(10!=b.base){a=b.base;c=0;for(d=g.length;c<d;)g[c]=g[c].toString(a),c++;a=0;c=g.length;for(b=(2==b.base?8:2)+1;a<c;)g[a]=Array(b-g[a].length).join("0")+g[a],a++}return g};a.exports.fromBytes=function(a,b){b.be&&h(a,b.offset);if(10!=b.base)for(var c=b.base,d=0,e=a.length;d<e;)a[d]=parseInt(a[d],
c),d++;c=[];d=0;for(e=a.length-(b.offset-1);d<e;)c.push(b.reader(a,d)),d+=b.offset;b.char&&(c=c.join(""));return c}},function(a,d){d=function(a){this.bits=a.bits;this.be=a.be;this.signed=a.signed;this.base=a.base?a.base:10;this.reader=this.read_;this.writer=this.write_;this.offset=0;this.min=-Infinity;this.max=Infinity;this.realBits=this.bits;this.lastByteMask=255;this.build_()};d.prototype.sign=function(a){a>this.max&&(a-=2*this.max+2);return a};d.prototype.overflow=function(a){a>this.max?a=this.max:
a<this.min&&(a=this.min);return a};d.prototype.read_=function(a,c,d){var e=0;for(d=(void 0===d?this:d).offset-1;0<d;)e|=a[d+c]<<8*d,d--;e=(a[c]|e)>>>0;return this.overflow(this.sign(e))};d.prototype.readBits_=function(a,c,d){d=void 0===d?this:d;for(var e="",b=0;b<d.offset;){var h=a[c+b].toString(2);e=Array(9-h.length).join("0")+h+e;b++}return this.overflow(this.sign(parseInt(e,2)))};d.prototype.write_=function(a,c,d,e){e=void 0===e?this:e;c=this.overflow(c);var b=255,h=e.offset;d=this.writeFirstByte_(a,
c,d,e);for(var f=2;f<=h;f++)f==h&&(b=e.lastByteMask),a[d++]=Math.floor(c/Math.pow(2,8*(f-1)))&b;return d};d.prototype.build_=function(){this.validateWordSize_();this.setRealBits_();this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?1:Math.ceil(this.realBits/8)};d.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};d.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");
};d.prototype.setRealBits_=function(){this.realBits=8<this.bits?16>=this.bits?16:24>=this.bits?24:32>=this.bits?32:40>=this.bits?40:48>=this.bits?48:56>=this.bits?56:64:this.bits};d.prototype.setLastByteMask_=function(){var a=8-(this.realBits-this.bits);this.lastByteMask=Math.pow(2,0<a?a:8)-1};d.prototype.writeFirstByte_=function(a,c,d,e){e=void 0===e?this:e;8>e.bits?a[d++]=0>c?c+Math.pow(2,e.bits):c:a[d++]=c&255;return d};a.exports=d},function(a,d){a.exports=function(a,c){for(var d=a.length,e=0;e<
d;){for(var b=a,f=e,l=0,m=c-1,g=parseInt(c/2,10);l<g;){var n=b[f+l];b[f+l]=b[f+m];b[f+m]=n;l++;m--}e+=c}}},function(a,d){var f=new Float32Array(1),c={8:256,16:65536,24:16777216,32:4294967296,"32f":1,64:1},h={intToInt:function(a,b){return a=0<a?parseInt(a/b.oldPositive*b.newPositive,10):parseInt(a/b.oldNegative*b.newNegative,10)},floatToInt:function(a,b){return 0<a?a*b.newPositive:a*b.newNegative},intToFloat:function(a,b){return 0<a?a/b.oldPositive:a/b.oldNegative},floatToFloat:function(a,b){"64"==
b.original&&"32f"==b.target&&(f[0]=a,a=f[0]);return a}};a.exports.toBitDepth=function(a,b,d){var e="8 16 24 32 32f 64".split(" ");if(-1==e.indexOf(b)||-1==e.indexOf(d))throw Error("Invalid bit depth.");e=["32f","64"].includes(b)?"float":"int";var f=["32f","64"].includes(d)?"Float":"Int";e=h[e+"To"+f];f=a.length;for(var g=0;g<f;g++){var n=g,k=a[g];"8"==b&&(k-=128);a[n]=k;a[g]=e(a[g],{oldNegative:c[b]/2,newNegative:c[d]/2,oldPositive:c[b]/2-1,newPositive:c[d]/2-1,original:b,target:d});n=g;k=a[g];"8"==
d&&(k+=128);a[n]=k}};a.exports.BitDepthMaxValues=c},function(a,d,f){var c=f(0),h=f(2),e=c.uInt8,b=c.uInt16,k=c.uInt32,l=c.chr,m=f(10);d=function(){var a=m.call(this)||this;a.headerFormats_={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3};a.samples=[];a.head_=0;return a};$jscomp.inherits(d,m);d.prototype.readRIFFChunk_=function(a){this.chunkId=c.unpackArray(a.slice(0,4),l);if("RIFF"!=this.chunkId&&"RIFX"!=this.chunkId)throw Error(h.format);this.LEorBE();this.chunkSize=c.unpack(a.slice(4,8),k);
this.format=c.unpackArray(a.slice(8,12),l);if("WAVE"!=this.format)throw Error(h.wave);};d.prototype.LEorBE=function(){var a="RIFX"==this.chunkId;e.be=a;b.be=a;return k.be=a};d.prototype.readFmtChunk_=function(a){if(a=this.findChunk(a,"fmt "))this.fmtChunkId="fmt ",this.fmtChunkSize=a.chunkSize,this.audioFormat=c.unpack(a.chunkData.slice(0,2),b),this.numChannels=c.unpack(a.chunkData.slice(2,4),b),this.sampleRate=c.unpack(a.chunkData.slice(4,8),k),this.byteRate=c.unpack(a.chunkData.slice(8,12),k),this.blockAlign=
c.unpack(a.chunkData.slice(12,14),b),this.bitsPerSample=c.unpack(a.chunkData.slice(14,16),b),this.readFmtExtension(a);else throw Error(h["fmt "]);};d.prototype.readFmtExtension=function(a){16<this.fmtChunkSize&&(this.cbSize=c.unpack(a.chunkData.slice(16,18),b),18<this.fmtChunkSize&&(this.validBitsPerSample=c.unpack(a.chunkData.slice(18,20),b)))};d.prototype.readFactChunk_=function(a){if(a=this.findChunk(a,"fact"))this.factChunkId="fact",this.factChunkSize=a.chunkSize,this.dwSampleLength=c.unpack(a.chunkData.slice(0,
4),k);else if(this.enforceFact)throw Error(h.fact);};d.prototype.readBextChunk_=function(a){if(a=this.findChunk(a,"bext"))this.bextChunkId="bext",this.bextChunkSize=a.chunkSize,this.bextChunkData=a.chunkData,this.readBextChunkFields_()};d.prototype.readBextChunkFields_=function(){this.head_=0;this.bextChunkFields={description:this.readVariableSizeString_(this.bextChunkData,256),originator:this.readVariableSizeString_(this.bextChunkData,32),originatorReference:this.readVariableSizeString_(this.bextChunkData,
32),originationDate:this.readVariableSizeString_(this.bextChunkData,10),originationTime:this.readVariableSizeString_(this.bextChunkData,8),timeReference:this.readBytes(this.bextChunkData,8),version:this.readFromChunk_(this.bextChunkData,b),UMID:this.readVariableSizeString_(this.bextChunkData,64),loudnessValue:this.readFromChunk_(this.bextChunkData,b),loudnessRange:this.readFromChunk_(this.bextChunkData,b),maxTruePeakLevel:this.readFromChunk_(this.bextChunkData,b),maxMomentaryLoudness:this.readFromChunk_(this.bextChunkData,
b),maxShortTermLoudness:this.readFromChunk_(this.bextChunkData,b),reserved:this.readVariableSizeString_(this.bextChunkData,180),codingHistory:this.readVariableSizeString_(this.bextChunkData,this.bextChunkData.length-602)}};d.prototype.readBytes=function(a,b){var c=this.head_;this.head_+=b;return a.slice(c,this.head_)};d.prototype.readVariableSizeString_=function(a,b){for(var d="",g=0;g<b;g++)d+=c.unpack([a[this.head_]],l),this.head_++;return d};d.prototype.readFromChunk_=function(a,b){var d=b.bits/
8;a=c.unpack(a.slice(this.head_,this.head_+d),b);this.head_+=d;return a};d.prototype.writeVariableSizeString_=function(a,b){a=c.packArray(a,l);for(var d=a.length;d<b;d++)a.push(0);return a};d.prototype.readCueChunk_=function(a){if(a=this.findChunk(a,"cue "))this.cueChunkId="cue ",this.cueChunkSize=a.chunkSize,this.cueChunkData=a.chunkData};d.prototype.readDataChunk_=function(a,b){if(a=this.findChunk(a,"data"))this.dataChunkId="data",this.dataChunkSize=a.chunkSize,this.samplesFromBytes_(a.chunkData,
b);else throw Error(h.data);};d.prototype.samplesFromBytes_=function(a,b){b.bits=4==this.bitsPerSample?8:this.bitsPerSample;b.signed=8==b.bits?!1:!0;b.float=3==this.audioFormat||64==this.bitsPerSample?!0:!1;b.single=!1;this.samples=c.unpackArray(a,new c.Type(b))};d.prototype.findChunk=function(a,b){for(var c=0;c<a.length;c++)if(a[c].chunkId==b)return a[c];return null};d.prototype.samplesToBytes_=function(a){a.bits=4==this.bitsPerSample?8:this.bitsPerSample;a.signed=8==a.bits?!1:!0;a.float=3==this.audioFormat||
64==this.bitsPerSample?!0:!1;a=c.packArray(this.samples,new c.Type(a));a.length%2&&a.push(0);return a};d.prototype.getBextBytes_=function(){if(this.bextChunkId){var a=[].concat(this.writeVariableSizeString_(this.bextChunkFields.description,256));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originator,32));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originatorReference,32));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originationDate,10));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originationTime,
8));a=a.concat(this.bextChunkFields.timeReference);a=a.concat(c.pack(this.bextChunkFields.version,b));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.UMID,64));a=a.concat(c.pack(this.bextChunkFields.loudnessValue,b));a=a.concat(c.pack(this.bextChunkFields.loudnessRange,b));a=a.concat(c.pack(this.bextChunkFields.maxTruePeakLevel,b));a=a.concat(c.pack(this.bextChunkFields.maxMomentaryLoudness,b));a=a.concat(c.pack(this.bextChunkFields.maxShortTermLoudness,b));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.reserved,
180));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.codingHistory,this.bextChunkData.length-602));return[].concat(c.packArray(this.bextChunkId,l),c.pack(a.length,k),a)}return[]};d.prototype.getCueBytes_=function(){return this.cueChunkId?[].concat(c.packArray(this.cueChunkId,l),c.pack(this.cueChunkSize,k),this.cueChunkData):[]};d.prototype.getFactBytes_=function(){return this.factChunkId?[].concat(c.packArray(this.factChunkId,l),c.pack(this.factChunkSize,k),c.pack(this.dwSampleLength,
k)):[]};d.prototype.getCbSizeBytes_=function(){return 16<this.fmtChunkSize?c.pack(this.cbSize,b):[]};d.prototype.getValidBitsPerSampleBytes_=function(){return 18<this.fmtChunkSize?c.pack(this.validBitsPerSample,b):[]};d.prototype.createWaveFile_=function(){var a={be:this.LEorBE()};return c.packArray(this.chunkId,l).concat(c.pack(this.chunkSize,k),c.packArray(this.format,l),this.getBextBytes_(),c.packArray(this.fmtChunkId,l),c.pack(this.fmtChunkSize,k),c.pack(this.audioFormat,b),c.pack(this.numChannels,
b),c.pack(this.sampleRate,k),c.pack(this.byteRate,k),c.pack(this.blockAlign,b),c.pack(this.bitsPerSample,b),this.getCbSizeBytes_(),this.getValidBitsPerSampleBytes_(),this.getFactBytes_(),c.packArray(this.dataChunkId,l),c.pack(this.dataChunkSize,k),this.samplesToBytes_(a),this.getCueBytes_())};a.exports=d},function(a,d,f){var c=f(11);d=function(){var a=c.call(this)||this;a.bextChunkId="";a.bextChunkSize=0;a.bextChunkData=[];a.bextChunkFields={description:"",originator:"",originatorReference:"",originationDate:"",
originationTime:"",timeReference:"",version:"",UMID:"",loudnessValue:"",loudnessRange:"",maxTruePeakLevel:"",maxMomentaryLoudness:"",maxShortTermLoudness:"",reserved:"",codingHistory:""};return a};$jscomp.inherits(d,c);d.decodeSample=c.decodeSample;d.encodeSample=c.encodeSample;d.decodeBlock=c.decodeBlock;d.encodeBlock=c.encodeBlock;d.decode=c.decode;d.encode=c.encode;d.write=c.write;d.read=c.read;a.exports=d},function(a,d){a.exports=function(){this.chunkId="";this.chunkSize=0;this.fmtChunkId=this.format=
"";this.validBitsPerSample=this.cbSize=this.bitsPerSample=this.blockAlign=this.byteRate=this.sampleRate=this.numChannels=this.audioFormat=this.fmtChunkSize=0;this.factChunkId="";this.factChunkSize=0;this.factChunkData=[];this.dwSampleLength=0;this.cueChunkId="";this.cueChunkSize=-1;this.cueChunkData=[];this.dataChunkId="";this.dataChunkSize=0}},function(a,d,f){function c(a,b){(void 0===b?0:b)||(l.be="RIFX"==a.chunkId);b=k.packArray(a.chunkId,m).concat(k.pack(a.chunkSize,l),k.packArray(a.format,m),
h(a.subChunks,l.be));if("RIFF"==a.chunkId||"RIFX"==a.chunkId)b=new Uint8Array(b);return b}function h(a,b){for(var d=[],e=0;e<a.length;)d="LIST"==a[e].chunkId?d.concat(c(a[e],b)):d.concat(k.packArray(a[e].chunkId,m),k.pack(a[e].chunkSize,l),a[e].chunkData),e++;return d}function e(a){for(var c=[],d=12;d<a.length;)c.push(b(a,d)),d+=8+c[c.length-1].chunkSize;return c}function b(a,b){var c={chunkId:k.unpackArray(a.slice(b,b+4),m),chunkSize:k.unpack(a.slice(b+4,b+8),l)};"LIST"==c.chunkId?(c.format=k.unpackArray(a.slice(8,
12),m),c.subChunks=e(a.slice(b,b+c.chunkSize))):c.chunkData=a.slice(b+8,b+8+c.chunkSize);return c}var k=f(0),l=k.uInt32,m=k.chr;a.exports.read=function(a){a=[].slice.call(a);var b=k.unpackArray(a.slice(0,4),m);l.be="RIFX"==b;return{chunkId:b,chunkSize:k.unpack(a.slice(4,8),l),format:k.unpackArray(a.slice(8,12),m),subChunks:e(a)}};a.exports.write=c},function(a,d,f){function c(a){a-=n;if(0<=a)var b=0;else b=8,a=-a;var c=g[r],d=c>>3;a>c&&(b|=4,a-=c,d+=c);c>>=1;a>c&&(b|=2,a-=c,d+=c);c>>=1;a>c&&(b|=1,
d+=c);n=b&8?n-d:n+d;-32768>n?n=-32768:32767<n&&(n=32767);r+=m[b&7];0>r?r=0:88<r&&(r=88);return b}function h(a){var b=0;a&4&&(b+=t);a&2&&(b+=t>>1);a&1&&(b+=t>>2);b+=t>>3;a&8&&(b=-b);p+=b;32767<p?p=32767:-32767>p&&(p=-32767);q+=m[a];0>q?q=0:88<q&&(q=88);t=g[q];return p}function e(a){var b=a[0];c(b);var d=[];d.push(k.pack(b,l)[0]);d.push(k.pack(b,l)[1]);d.push(r);d.push(0);for(b=3;b<a.length;b+=2){var e=c(a[b]),h=c(a[b+1]);d.push(h<<4|e)}for(;256>d.length;)d.push(0);return d}function b(a){p=k.unpack([a[0],
a[1]],l);q=a[2];t=g[q];for(var b=[p,k.unpack([a[2],a[3]],l)],c=4;c<a.length;c++){var d=a[c],e=d>>4;b.push(h(e<<4^d));b.push(h(e))}return b}var k=f(0),l=k.int16,m=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],g=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,
10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],n=0,r=0,p=0,q=0,t=7;a.exports.encode=function(a){for(var b=[],c=[],d=0;d<a.length;d++)if(c.push(a[d]),0==d%505&&0!=d||d==a.length-1)b=b.concat(e(c)),c=[];return b};a.exports.decode=function(a,c){c=void 0===c?256:c;for(var d=[],e=[],h=0;h<a.length;h++)0==h%c&&0!=h&&(d=d.concat(b(e)),e=[]),e.push(a[h]);return d};a.exports.encodeBlock=e;a.exports.decodeBlock=b},function(a,d){function f(a){var c=[1,1,2,2,3,3,3,3,4,4,4,4,4,
4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],b;a=-32768==a?-32767:a;(b=~a>>8&128)||(a*=-1);32635<a&&(a=32635);256<=a?(c=c[a>>8&127],a=c<<4|a>>c+3&15):a>>=4;return a^b^85}function c(a){var c=0;a^=85;a&128&&(a&=-129,c=-1);var b=((a&240)>>4)+4;a=4!=b?1<<b|(a&15)<<b-4|1<<b-5:a<<1|1;return-8*(0==c?a:-a)}a.exports.encodeSample=
f;a.exports.decodeSample=c;a.exports.encode=function(a){for(var c=[],b=0;b<a.length;b++)c.push(f(a[b]));return c};a.exports.decode=function(a){for(var d=[],b=0;b<a.length;b++)d.push(c(a[b]));return d}},function(a,d){function f(a){if(0>a){a=132-a;var c=127}else a+=132,c=255;32767<a&&(a=32767);var b=0;var d=a>>7;d&240&&(d>>=4,b+=4);d&12&&(d>>=2,b+=2);d&2&&(b+=1);d=b;return(d<<4|a>>d+3&15)^c}function c(a){a=~a;var c=((a&15)<<3)+132<<((a&112)>>4);return a&128?132-c:c-132}a.exports.encodeSample=f;a.exports.decodeSample=
c;a.exports.encode=function(a){for(var c=[],b=0;b<a.length;b++)c.push(f(a[b]));return c};a.exports.decode=function(a){for(var d=[],b=0;b<a.length;b++)d.push(c(a[b]));return d}}]);
