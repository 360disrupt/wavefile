/*
 wavefile
 Read & write wave files with 4, 8, 11, 12, 16, 20, 24, 32 & 64-bit data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/wavefile

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,g){a!=Array.prototype&&a!=Object.prototype&&(a[d]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,g,k){if(d){g=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var c=a[k];c in g||(g[c]={});g=g[c]}a=a[a.length-1];k=g[a];d=d(k);d!=k&&null!=d&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(d,a){return d===a?0!==d||1/d===1/a:d!==d&&a!==a}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(d,a){var g=this;g instanceof String&&(g=String(g));var c=g.length;for(a=a||0;a<c;a++)if(g[a]==d||Object.is(g[a],d))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,d,g){if(null==a)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return a+""};
(function(a){function d(k){if(g[k])return g[k].exports;var c=g[k]={i:k,l:!1,exports:{}};a[k].call(c.exports,c,c.exports,d);c.l=!0;return c.exports}var g={};d.m=a;d.c=g;d.d=function(a,c,g){d.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:g})};d.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(c,"a",c);return c};d.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};d.p="";return d(d.s=1)})([function(a,d,g){function k(b,
a,e){a.be&&z(b,a.offset);var d=b.length;if(10!=e)for(var c=0;c<d;c++)b[c]=parseInt(b[c],e);e=[];d-=a.offset-1;for(c=0;c<d;c+=a.offset)e.push(v(b,c));return e}function c(b,a,e){for(var d=0,c=[],r=b.length,l=0;l<r;l++)d=w(c,b[l],d);a.be&&z(c,a.offset);if(10!=e)for(b=(2==e?8:2)+1,r=c.length,a=0;a<r;a++)c[a]=c[a].toString(e),c[a]=Array(b-c[a].length).join("0")+c[a];return c}function p(b,a){return q.read(b,a)}function m(b,a){b=q.read(b,a);a=(b&31744)>>10;var e=b&1023;return(a?Math.pow(2,a-15)*(1+e/1024):
e/1024*.00006103515625)*(b>>15?-1:1)}function e(b,a){u[0]=q.read(b,a);return y[0]}function h(b,a){u[0]=q.read(b,a);u[1]=q.read(b,a+4);return A[0]}function f(b,a){for(var e="",c=0;c<q.offset;c++)e+=String.fromCharCode(b[a+c]);return e}function l(b,a,e){return q.write(b,a,e)}function n(b,a,e){y[0]=a;var c=u[0];a=c>>16&32768;var d=c>>12&2047;c=c>>23&255;103<=c&&(a=(a|c-112<<10|d>>1)+(d&1));b[e++]=a&255;b[e++]=a>>>8&255;return e}function b(b,a,e){y[0]=a;return q.write(b,u[0],e)}function t(b,a,e){A[0]=
a;e=q.write(b,u[0],e);return q.write(b,u[1],e)}function r(b,a,e){for(var c=0;c<a.length;c++)b[e++]=a.charCodeAt(c);return e}function x(a){if(!a)throw Error("Undefined type.");if(a["float"]){if(-1==[16,32,64].indexOf(a.bits))throw Error("Not a supported float type.");}else if(a["char"]){if(8>a.bits||a.bits%2)throw Error("Wrong offset for type char.");}else if(1>a.bits||53<a.bits)throw Error("Not a supported type.");a.offset=8>a.bits?1:Math.ceil(a.bits/8);a["float"]?16==a.bits?v=m:32==a.bits?v=e:64==
a.bits&&(v=h):v=a["char"]?f:p;a["float"]?16==a.bits?w=n:32==a.bits?w=b:64==a.bits&&(w=t):w=a["char"]?r:l;a["char"]?q.offset=8>a.bits?1:Math.ceil(a.bits/8):q=new C(64==a.bits?32:a.bits,a["float"]?!1:a.signed)}function B(b,a){b.constructor==String&&(b=b.length>=a.offset?b.slice(0,a.offset):"");return b}var z=g(5),C=g(6);d=new Int8Array(8);var u=new Uint32Array(d.buffer),y=new Float32Array(d.buffer),A=new Float64Array(d.buffer),v,w,q={};a.exports.chr={bits:8,"char":!0};a.exports.fourCC={bits:32,"char":!0};
a.exports.bool={bits:1};a.exports.int2={bits:2,signed:!0};a.exports.uInt2={bits:2};a.exports.int4={bits:4,signed:!0};a.exports.uInt4={bits:4};a.exports.int8={bits:8,signed:!0};a.exports.uInt8={bits:8};a.exports.int16={bits:16,signed:!0};a.exports.uInt16={bits:16};a.exports.float16={bits:16,"float":!0};a.exports.int24={bits:24,signed:!0};a.exports.uInt24={bits:24};a.exports.int32={bits:32,signed:!0};a.exports.uInt32={bits:32};a.exports.float32={bits:32,"float":!0};a.exports.int40={bits:40,signed:!0};
a.exports.uInt40={bits:40};a.exports.int48={bits:48,signed:!0};a.exports.uInt48={bits:48};a.exports.float64={bits:64,"float":!0};a.exports.int16BE={bits:16,signed:!0,be:!0};a.exports.uInt16BE={bits:16,be:!0};a.exports.float16BE={bits:16,"float":!0,be:!0};a.exports.int24BE={bits:24,signed:!0,be:!0};a.exports.uInt24BE={bits:24,be:!0};a.exports.int32BE={bits:32,signed:!0,be:!0};a.exports.uInt32BE={bits:32,be:!0};a.exports.float32BE={bits:32,"float":!0,be:!0};a.exports.int40BE={bits:40,signed:!0,be:!0};
a.exports.uInt40BE={bits:40,be:!0};a.exports.int48BE={bits:48,signed:!0,be:!0};a.exports.uInt48BE={bits:48,be:!0};a.exports.float64BE={bits:64,"float":!0,be:!0};a.exports.pack=function(b,a,e){e=void 0===e?10:e;x(a);var d=[];if(void 0===b)return d;b=B(b,a);return c([b],a,e)};a.exports.unpack=function(b,a,e){e=void 0===e?10:e;x(a);return(b=k(b.slice(0,a.offset),a,e))?b[0]:a["char"]?"":null};a.exports.packArray=function(b,a,e){e=void 0===e?10:e;x(a);if(a["char"])for(var d=b.length,r=0;r<d;r++)b[r]=B(b[r],
a);return c(b,a,e)};a.exports.unpackArray=function(b,a,e){e=void 0===e?10:e;x(a);return k(b,a,e)}},function(a,d,g){a=g(2);window.WaveFile=a},function(a,d,g){var k=g(3),c=g(4),p=g(7),m=g(8),e=g(0),h={bits:16},f={bits:32},l={bits:32,"char":!0},n={bits:8,"char":!0};d=function(b){this.container="";this.chunkSize=0;this.format="";this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]};
this.fact={chunkId:"",chunkSize:0,dwSampleLength:0};this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]};this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""};this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,
sampleCountHigh:0,sampleCountLow:0,tableLength:0,table:[]};this.data={chunkId:"",chunkSize:0,samples:[]};this.isInterleaved=!0;this.bitDepth="0";this.audioFormats_={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,40:65534,48:65534,64:3};this.head_=0;this.enforceFact_=!1;b&&this.fromBuffer(b)};d.prototype.fromScratch=function(b,a,e,c,d){d=void 0===d?{}:d;d.container||(d.container="RIFF");var l=((parseInt(e,10)-1|7)+1)/8;this.clearHeader_();this.bitDepth=e;this.container=d.container;this.chunkSize=36+
c.length*l;this.format="WAVE";this.fmt.chunkId="fmt ";this.fmt.chunkSize=16;this.fmt.byteRate=b*l*a;this.fmt.blockAlign=b*l;this.fmt.audioFormat=this.audioFormats_[e]?this.audioFormats_[e]:65534;this.fmt.numChannels=b;this.fmt.sampleRate=a;this.fmt.bitsPerSample=parseInt(e,10);this.data.chunkId="data";this.data.samples=c;0<c.length&&c[0].constructor===Array&&(this.isInterleaved=!1,this.interleave());this.data.chunkSize=c.length*l;"4"==e&&(this.chunkSize=44+c.length,this.fmt.chunkSize=20,this.fmt.byteRate=
4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact.chunkId="fact",this.fact.chunkSize=4,this.fact.dwSampleLength=2*c.length,this.data.chunkSize=c.length);if("8a"==e||"8m"==e)this.chunkSize=44+c.length,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact.chunkId="fact",this.fact.chunkSize=4,this.fact.dwSampleLength=c.length;65534==this.fmt.audioFormat&&(this.chunkSize=60+c.length*l,this.fmt.chunkSize=40,this.fmt.bitsPerSample=
(parseInt(e,10)-1|7)+1,this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(e,10),this.fmt.dwChannelMask=0,this.fmt.subformat=[1,1048576,2852126848,1905997824]);this.checkWriteInput_()};d.prototype.fromBuffer=function(b){this.readRIFFChunk_(b);var a="RIFX"==this.container;b=c.read(b,a);this.readDs64Chunk_(b.subChunks);this.readFmtChunk_(b.subChunks);this.readFactChunk_(b.subChunks);this.readBextChunk_(b.subChunks);this.readCueChunk_(b.subChunks);this.readDataChunk_(b.subChunks,{be:a});this.bitDepthFromFmt_()};
d.prototype.toBuffer=function(){this.checkWriteInput_();this.assureInterleaved_();return this.createWaveFile_()};d.prototype.toRIFF=function(){"RF64"==this.container?this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,this.data.samples):(this.container="RIFF",this.LEorBE_())};d.prototype.toRIFX=function(){"RF64"==this.container?this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,this.data.samples,{container:"RIFX"}):(this.container="RIFX",this.LEorBE_())};d.prototype.toBitDepth=
function(b,a){var e=b,c=this.bitDepth;void 0===a||a||(e=this.realBitDepth_(b),c=this.realBitDepth_(this.bitDepth));this.assureInterleaved_();k.toBitDepth(this.data.samples,c,e);this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,b,this.data.samples,{container:this.correctContainer_()})};d.prototype.interleave=function(){if(!this.isInterleaved){for(var b=[],a=this.data.samples[0].length,e=0;e<a;e++)for(var c=0;c<this.data.samples.length;c++)b.push(this.data.samples[c][e]);this.data.samples=b;
this.isInterleaved=!0}};d.prototype.deInterleave=function(){if(this.isInterleaved){var b=[],a;for(a=0;a<this.fmt.numChannels;a++)b[a]=[];a=0;for(var e;a<this.data.samples.length;){for(e=0;e<this.fmt.numChannels;e++)b[e].push(this.data.samples[a+e]);a+=e}this.data.samples=b;this.isInterleaved=!1}};d.prototype.toIMAADPCM=function(){if(8E3!=this.fmt.sampleRate)throw Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!=this.fmt.numChannels)throw Error("Only mono files can be compressed as IMA-ADPCM.");
this.assure16Bit_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"4",p.encode(this.data.samples),{container:this.correctContainer_()})};d.prototype.fromIMAADPCM=function(b){b=void 0===b?"16":b;this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",p.decode(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()});this.toBitDepth(b)};d.prototype.toALaw=function(){this.assure16Bit_();this.assureInterleaved_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,
"8a",m.alaw.encode(this.data.samples),{container:this.correctContainer_()})};d.prototype.fromALaw=function(b){b=void 0===b?"16":b;this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",m.alaw.decode(this.data.samples),{container:this.correctContainer_()});this.toBitDepth(b)};d.prototype.toMuLaw=function(){this.assure16Bit_();this.assureInterleaved_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"8m",m.mulaw.encode(this.data.samples),{container:this.correctContainer_()})};d.prototype.fromMuLaw=
function(b){b=void 0===b?"16":b;this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",m.mulaw.decode(this.data.samples),{container:this.correctContainer_()});this.toBitDepth(b)};d.prototype.realBitDepth_=function(b){"32f"!=b&&(b=((parseInt(b,10)-1|7)+1).toString());return b};d.prototype.checkWriteInput_=function(){this.validateBitDepth_();this.validateNumChannels_();this.validateSampleRate_()};d.prototype.validateBitDepth_=function(){if(!this.audioFormats_[this.bitDepth]){if(8<parseInt(this.bitDepth,
10)&&54>parseInt(this.bitDepth,10))return!0;throw Error("Invalid bit depth.");}return!0};d.prototype.validateNumChannels_=function(){var b=this.fmt.numChannels*this.fmt.bitsPerSample/8;if(1>this.fmt.numChannels||65535<b)throw Error("Invalid number of channels.");return!0};d.prototype.validateSampleRate_=function(){var b=this.fmt.bitsPerSample/8*this.fmt.numChannels*this.fmt.sampleRate;if(1>this.fmt.sampleRate||4294967295<b)throw Error("Invalid sample rate.");return!0};d.prototype.clearHeader_=function(){this.fmt.cbSize=
0;this.fmt.validBitsPerSample=0;this.fact.chunkId="";this.ds64.chunkId=""};d.prototype.assure16Bit_=function(){this.assureUncompressed_();"16"!=this.bitDepth&&this.toBitDepth("16")};d.prototype.assureUncompressed_=function(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()};d.prototype.assureInterleaved_=function(){this.isInterleaved||this.interleave()};d.prototype.LEorBE_=function(){var b="RIFX"===this.container;h.be=b;return f.be=b};
d.prototype.findChunk_=function(b,a){for(var e=0;e<b.length;e++)if(b[e].chunkId==a)return b[e];return null};d.prototype.readRIFFChunk_=function(b){this.container=e.unpack(b.slice(0,4),l);if(-1===["RIFF","RIFX","RF64"].indexOf(this.container))throw Error("Not a supported format.");this.LEorBE_();this.chunkSize=e.unpack(b.slice(4,8),f);this.format=e.unpack(b.slice(8,12),l);if("WAVE"!=this.format)throw Error("Could not find the 'WAVE' format identifier");};d.prototype.readFmtChunk_=function(b){if(b=
this.findChunk_(b,"fmt ")){var a=b.chunkData;this.fmt.chunkId="fmt ";this.fmt.chunkSize=b.chunkSize;this.fmt.audioFormat=e.unpack(a.slice(0,2),h);this.fmt.numChannels=e.unpack(a.slice(2,4),h);this.fmt.sampleRate=e.unpack(a.slice(4,8),f);this.fmt.byteRate=e.unpack(a.slice(8,12),f);this.fmt.blockAlign=e.unpack(a.slice(12,14),h);this.fmt.bitsPerSample=e.unpack(a.slice(14,16),h);this.readFmtExtension_(b)}else throw Error("Could not find the 'fmt ' chunk");};d.prototype.readFmtExtension_=function(b){b=
b.chunkData;16<this.fmt.chunkSize&&(this.fmt.cbSize=e.unpack(b.slice(16,18),h),18<this.fmt.chunkSize&&(this.fmt.validBitsPerSample=e.unpack(b.slice(18,20),h),20<this.fmt.chunkSize&&(this.fmt.dwChannelMask=e.unpack(b.slice(20,24),f),this.fmt.subformat=[e.unpack(b.slice(24,28),f),e.unpack(b.slice(28,32),f),e.unpack(b.slice(32,36),f),e.unpack(b.slice(36,40),f)])))};d.prototype.readFactChunk_=function(b){if(b=this.findChunk_(b,"fact"))this.fact.chunkId="fact",this.fact.chunkSize=b.chunkSize,this.fact.dwSampleLength=
e.unpack(b.chunkData.slice(0,4),f);else if(this.enforceFact_)throw Error("Could not find the 'fact' chunk");};d.prototype.readCueChunk_=function(b){var a=this.findChunk_(b,"cue ");if(a)for(b=a.chunkData,this.cue.chunkId="cue ",this.cue.chunkSize=a.chunkSize,this.cue.dwCuePoints=e.unpack(b.slice(0,4),f),a=0;a<this.cue.dwCuePoints;a++){var c=4+24*a;this.cue.points.push({dwName:e.unpack(b.slice(c,c+4),f),dwPosition:e.unpack(b.slice(c+4,c+8),f),fccChunk:e.unpack(b.slice(c+8,c+12),l),dwChunkStart:e.unpack(b.slice(c+
12,c+16),f),dwBlockStart:e.unpack(b.slice(c+16,c+20),f),dwSampleOffset:e.unpack(b.slice(c+20,c+24),f)})}};d.prototype.readDataChunk_=function(b,a){if(b=this.findChunk_(b,"data"))this.data.chunkId="data",this.data.chunkSize=b.chunkSize,this.samplesFromBytes_(b.chunkData,a);else throw Error("Could not find the 'data' chunk");};d.prototype.readBextChunk_=function(b){if(b=this.findChunk_(b,"bext"))this.head_=0,b=b.chunkData,this.bext={chunkId:"bext",chunkSize:b.length,description:this.readString_(b,256),
originator:this.readString_(b,32),originatorReference:this.readString_(b,32),originationDate:this.readString_(b,10),originationTime:this.readString_(b,8),timeReference:[this.readFromChunk_(b,f),this.readFromChunk_(b,f)],version:this.readFromChunk_(b,h),UMID:this.readString_(b,64),loudnessValue:this.readFromChunk_(b,h),loudnessRange:this.readFromChunk_(b,h),maxTruePeakLevel:this.readFromChunk_(b,h),maxMomentaryLoudness:this.readFromChunk_(b,h),maxShortTermLoudness:this.readFromChunk_(b,h),reserved:this.readString_(b,
180),codingHistory:this.readString_(b,b.length-602)}};d.prototype.readDs64Chunk_=function(b){if(b=this.findChunk_(b,"ds64")){var a=b.chunkData;this.ds64.chunkId=b.chunkId;this.ds64.chunkSize=b.chunkSize;this.ds64.riffSizeHigh=e.unpack(a.slice(0,4),f);this.ds64.riffSizeLow=e.unpack(a.slice(4,8),f);this.ds64.dataSizeHigh=e.unpack(a.slice(8,12),f);this.ds64.dataSizeLow=e.unpack(a.slice(12,16),f);this.ds64.originationTime=e.unpack(a.slice(16,20),f);this.ds64.sampleCountHigh=e.unpack(a.slice(20,24),f);
this.ds64.sampleCountLow=e.unpack(a.slice(24,28),f)}else if("RF64"==this.container)throw Error("Could not find the 'ds64' chunk");};d.prototype.readString_=function(b,a){for(var c="",d=0;d<a;d++)c+=e.unpack([b[this.head_]],n),this.head_++;return c};d.prototype.readFromChunk_=function(b,a){var c=a.bits/8;b=e.unpack(b.slice(this.head_,this.head_+c),a);this.head_+=c;return b};d.prototype.writeString_=function(a,c){a=e.packArray(a,n);for(var b=a.length;b<c;b++)a.push(0);return a};d.prototype.samplesToBytes_=
function(a){a.bits=4==this.fmt.bitsPerSample?8:this.fmt.bitsPerSample;a.signed=8==a.bits?!1:!0;a["float"]=3==this.fmt.audioFormat||64==this.fmt.bitsPerSample?!0:!1;a=e.packArray(this.data.samples,a);a.length%2&&a.push(0);return a};d.prototype.samplesFromBytes_=function(a,c){c.bits=4==this.fmt.bitsPerSample?8:this.fmt.bitsPerSample;c.signed=8==c.bits?!1:!0;c["float"]=3==this.fmt.audioFormat||64==this.fmt.bitsPerSample?!0:!1;this.data.samples=e.unpackArray(a,c)};d.prototype.getBextBytes_=function(){return this.bext.chunkId?
[].concat(e.pack(this.bext.chunkId,l),e.pack(this.bext.chunkSize,f),this.writeString_(this.bext.description,256),this.writeString_(this.bext.originator,32),this.writeString_(this.bext.originatorReference,32),this.writeString_(this.bext.originationDate,10),this.writeString_(this.bext.originationTime,8),e.pack(this.bext.timeReference[0],f),e.pack(this.bext.timeReference[1],f),e.pack(this.bext.version,h),this.writeString_(this.bext.UMID,64),e.pack(this.bext.loudnessValue,h),e.pack(this.bext.loudnessRange,
h),e.pack(this.bext.maxTruePeakLevel,h),e.pack(this.bext.maxMomentaryLoudness,h),e.pack(this.bext.maxShortTermLoudness,h),this.writeString_(this.bext.reserved,180),this.writeString_(this.bext.codingHistory,this.bext.chunkSize-602)):[]};d.prototype.getDs64Bytes_=function(){var a=[];this.ds64.chunkId&&(a=a.concat(e.pack(this.ds64.chunkId,l),e.pack(this.ds64.chunkSize,f),e.pack(this.ds64.riffSizeHigh,f),e.pack(this.ds64.riffSizeLow,f),e.pack(this.ds64.dataSizeHigh,f),e.pack(this.ds64.dataSizeLow,f),
e.pack(this.ds64.originationTime,f),e.pack(this.ds64.sampleCountHigh,f),e.pack(this.ds64.sampleCountLow,f)));return a};d.prototype.getCueBytes_=function(){return this.cue.chunkId?[].concat(e.pack(this.cue.chunkId,l),e.pack(this.cue.chunkSize,f),e.pack(this.cue.dwCuePoints,f),this.getCuePointsBytes_()):[]};d.prototype.getCuePointsBytes_=function(){for(var a=[],c=0;c<this.cue.dwCuePoints;c++)a=a.concat(e.pack(this.cue.points[c].dwName,f),e.pack(this.cue.points[c].dwPosition,f),e.pack(this.cue.points[c].fccChunk,
l),e.pack(this.cue.points[c].dwChunkStart,f),e.pack(this.cue.points[c].dwBlockStart,f),e.pack(this.cue.points[c].dwSampleOffset,f));return a};d.prototype.getFactBytes_=function(){return this.fact.chunkId?[].concat(e.pack(this.fact.chunkId,l),e.pack(this.fact.chunkSize,f),e.pack(this.fact.dwSampleLength,f)):[]};d.prototype.getFmtBytes_=function(){if(this.fmt.chunkId)return[].concat(e.pack(this.fmt.chunkId,l),e.pack(this.fmt.chunkSize,f),e.pack(this.fmt.audioFormat,h),e.pack(this.fmt.numChannels,h),
e.pack(this.fmt.sampleRate,f),e.pack(this.fmt.byteRate,f),e.pack(this.fmt.blockAlign,h),e.pack(this.fmt.bitsPerSample,h),this.getFmtExtensionBytes_());throw Error("Could not find the 'fmt ' chunk");};d.prototype.getFmtExtensionBytes_=function(){var a=[];16<this.fmt.chunkSize&&(a=a.concat(e.pack(this.fmt.cbSize,h)));18<this.fmt.chunkSize&&(a=a.concat(e.pack(this.fmt.validBitsPerSample,h)));20<this.fmt.chunkSize&&(a=a.concat(e.pack(this.fmt.dwChannelMask,f)));24<this.fmt.chunkSize&&(a=a.concat(e.pack(this.fmt.subformat[0],
f),e.pack(this.fmt.subformat[1],f),e.pack(this.fmt.subformat[2],f),e.pack(this.fmt.subformat[3],f)));return a};d.prototype.correctContainer_=function(){return"RF64"==this.container?"RIFF":this.container};d.prototype.bitDepthFromFmt_=function(){this.bitDepth=3==this.fmt.audioFormat&&32==this.fmt.bitsPerSample?"32f":6==this.fmt.audioFormat?"8a":7==this.fmt.audioFormat?"8m":this.fmt.bitsPerSample.toString()};d.prototype.createWaveFile_=function(){var a={be:this.LEorBE_()};return new Uint8Array([].concat(e.pack(this.container,
l),e.pack(this.chunkSize,f),e.pack(this.format,l),this.getDs64Bytes_(),this.getBextBytes_(),this.getFmtBytes_(),this.getFactBytes_(),e.pack(this.data.chunkId,l),e.pack(this.data.chunkSize,f),this.samplesToBytes_(a),this.getCueBytes_()))};a.exports=d},function(a,d){function g(a,c,b,d){h(c);h(b);d=d||a;var g=e(c,b),l={oldMin:Math.pow(2,parseInt(c,10))/2,newMin:Math.pow(2,parseInt(b,10))/2,oldMax:Math.pow(2,parseInt(c,10))/2-1,newMax:Math.pow(2,parseInt(b,10))/2-1},f=a.length;if("8"==c)for(c=0;c<f;c++)d[c]=
a[c]-=128;for(c=0;c<f;c++)d[c]=g(a[c],l);if("8"==b)for(a=0;a<f;a++)d[a]=d[a]+=128}function k(a,c){return a=0<a?parseInt(a/c.oldMax*c.newMax,10):parseInt(a/c.oldMin*c.newMin,10)}function c(a,c){return parseInt(0<a?a*c.newMax:a*c.newMin,10)}function p(a,c){return 0<a?a/c.oldMax:a/c.oldMin}function m(a){f[0]=a;return f[0]}function e(a,e){var b=["32f","64"].includes(a)?["32f","64"].includes(e)?m:c:["32f","64"].includes(e)?p:k;a==e&&(b=function(a){return a});return b}function h(a){if("32f"!=a&&"64"!=a&&
("8">parseInt(a,10)||"53"<parseInt(a,10)))throw Error("Invalid bit depth.");}var f=new Float32Array(1);a.exports=g;a.exports.toBitDepth=g},function(a,d,g){function k(a){h.be="RIFX"==a.chunkId;var d=e.pack(a.chunkId,f).concat(e.pack(a.chunkSize,h),e.pack(a.format,f),c(a.subChunks));if("RIFF"==a.chunkId||"RIFX"==a.chunkId)d=new Uint8Array(d);return d}function c(a){for(var c=[],b=0;b<a.length;)c="LIST"==a[b].chunkId?c.concat(k(a[b])):c.concat(e.pack(a[b].chunkId,f),e.pack(a[b].chunkSize,h),a[b].chunkData),
b++;return c}function p(a){for(var c=[],b=12;b<a.length;)c.push(m(a,b)),b+=8+c[c.length-1].chunkSize;return c}function m(a,c){var b={chunkId:e.unpack(a.slice(c,c+4),f),chunkSize:e.unpack(a.slice(c+4,c+8),h),subChunks:[],chunkData:[]};"LIST"==b.chunkId?(b.format=e.unpack(a.slice(8,12),f),b.subChunks=p(a.slice(c,c+b.chunkSize))):b.chunkData=a.slice(c+8,c+8+b.chunkSize);return b}var e=g(0),h={bits:32},f={bits:32,"char":!0};a.exports.read=function(a){a=[].slice.call(a);var c=e.unpack(a.slice(0,4),f);
h.be="RIFX"==c;return{chunkId:c,chunkSize:e.unpack(a.slice(4,8),h),format:e.unpack(a.slice(8,12),f),subChunks:p(a)}};a.exports.write=k},function(a,d){a.exports=function(a,d){for(var c=a.length,g=0;g<c;){for(var k=a,e=g,h=0,f=d-1,l=parseInt(d/2,10);h<l;){var n=k[e+h];k[e+h]=k[e+f];k[e+f]=n;h++;f--}g+=d}}},function(a,d){d=function(a,d){this.bits=a;this.signed=void 0===d?!1:d;this.reader=this.read;this.writer=this.write;this.offset=0;this.min=-Infinity;this.max=Infinity;this.realBits_=this.bits;this.lastByteMask_=
255;this.build_()};d.prototype.read=function(a,d){d=void 0===d?0:d;if(32<this.bits)return this.readBits_(a,d);for(var c=0,g=this.offset-1;0<g;)c|=a[g+d]<<8*g,g--;c=(a[d]|c)>>>0;return this.overflow_(this.sign_(c))};d.prototype.write=function(a,d,c){c=void 0===c?0:c;d=this.overflow_(d);var g=255;c=this.writeFirstByte_(a,d,c);for(var m=2;m<=this.offset;m++)m==this.offset&&(g=this.lastByteMask_),a[c++]=Math.floor(d/Math.pow(2,8*(m-1)))&g;return c};d.prototype.readBits_=function(a,d){d=void 0===d?0:d;
for(var c="",g=0;g<this.offset;){var m=a[d+g].toString(2);c=Array(9-m.length).join("0")+m+c;g++}return this.overflow_(this.sign_(parseInt(c,2)))};d.prototype.build_=function(){this.validateWordSize_();this.setRealBits_();this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?1:Math.ceil(this.realBits_/8)};d.prototype.sign_=function(a){a>this.max&&(a-=2*this.max+2);return a};d.prototype.overflow_=function(a){a>this.max?a=this.max:a<this.min&&(a=this.min);return a};d.prototype.setMinMax_=
function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};d.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");};d.prototype.setRealBits_=function(){8<this.bits&&(this.realBits_=(this.bits-1|7)+1)};d.prototype.setLastByteMask_=function(){var a=8-(this.realBits_-this.bits);this.lastByteMask_=Math.pow(2,0<a?a:8)-1};d.prototype.writeFirstByte_=function(a,d,c){8>this.bits?a[c++]=0>d?d+Math.pow(2,this.bits):
d:a[c++]=d&255;return c};a.exports=d},function(a,d){function g(a){return 32768<a?a-65536:a}function k(a){var c=a-f;0<=c?a=0:(a=8,c=-c);var b=h[l],d=b>>3;c>b&&(a|=4,c-=b,d+=b);b>>=1;c>b&&(a|=2,c-=b,d+=b);b>>=1;c>b&&(a|=1,d+=b);c=a;f=c&8?f-d:f+d;-32768>f?f=-32768:32767<f&&(f=32767);l+=e[c&7];0>l?l=0:88<l&&(l=88);return a}function c(a){var c=0;a&4&&(c+=t);a&2&&(c+=t>>1);a&1&&(c+=t>>2);c+=t>>3;a&8&&(c=-c);n+=c;32767<n?n=32767:-32767>n&&(n=-32767);b+=e[a];0>b?b=0:88<b&&(b=88);t=h[b];return n}function p(a){var c=
a[0];k(c);var b=[];b.push(c&255);b.push(c>>8&255);b.push(l);b.push(0);for(c=3;c<a.length;c+=2){var e=k(a[c]),d=k(a[c+1]);b.push(d<<4|e)}for(;256>b.length;)b.push(0);return b}function m(a){n=g(a[1]<<8|a[0]);b=a[2];t=h[b];for(var e=[n,g(a[3]<<8|a[2])],d=4;d<a.length;d++){var f=a[d],m=f>>4;e.push(c(m<<4^f));e.push(c(m))}return e}var e=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],h=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,
307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],f=0,l=0,n=0,b=0,t=7;a.exports.encode=function(a){for(var c=[],b=[],e=0;e<a.length;e++)if(b.push(a[e]),0==e%505&&0!=e||e==a.length-1)c=c.concat(p(b)),b=[];return c};a.exports.decode=function(a,c){c=void 0===c?256:c;for(var b=[],e=[],d=0;d<a.length;d++)0==
d%c&&0!=d&&(b=b.concat(m(e)),e=[]),e.push(a[d]);return b};a.exports.encodeBlock=p;a.exports.decodeBlock=m},function(a,d,g){a.exports.alaw=g(9);a.exports.mulaw=g(10)},function(a,d){function g(a){var c=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],d;a=-32768==a?-32767:a;(d=~a>>8&128)||(a*=-1);
32635<a&&(a=32635);256<=a?(c=c[a>>8&127],a=c<<4|a>>c+3&15):a>>=4;return a^d^85}function k(a){var c=0;a^=85;a&128&&(a&=-129,c=-1);var d=((a&240)>>4)+4;a=4!=d?1<<d|(a&15)<<d-4|1<<d-5:a<<1|1;return-8*(0===c?a:-a)}a.exports.encodeSample=g;a.exports.decodeSample=k;a.exports.encode=function(a){for(var c=[],d=0;d<a.length;d++)c.push(g(a[d]));return c};a.exports.decode=function(a){for(var c=[],d=0;d<a.length;d++)c.push(k(a[d]));return c}},function(a,d){function g(a){if(0>a){a=132-a;var c=127}else a+=132,
c=255;32767<a&&(a=32767);var d=0;var e=a>>7;e&240&&(e>>=4,d+=4);e&12&&(e>>=2,d+=2);e&2&&(d+=1);e=d;return(e<<4|a>>e+3&15)^c}function k(a){a=~a;var c=((a&15)<<3)+132<<((a&112)>>4);return a&128?132-c:c-132}a.exports.encodeSample=g;a.exports.decodeSample=k;a.exports.encode=function(a){for(var c=[],d=0;d<a.length;d++)c.push(g(a[d]));return c};a.exports.decode=function(a){for(var c=[],d=0;d<a.length;d++)c.push(k(a[d]));return c}}]);