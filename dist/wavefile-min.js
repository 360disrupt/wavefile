/*
 endianness: Swap byte endianness in a array of bytes.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/endianness
 to-half: int bits of half-precision floating point values
 Based on:
 https://mail.mozilla.org/pipermail/es-discuss/2017-April/047994.html
 https://github.com/rochars/byte-data
 wavefile
 Read & write wave files with 8, 16, 24, 32 PCM, 32 IEEE & 64-bit data.
 Copyright (c) 2017 Rafael da Silva Rocha. MIT License.
 https://github.com/rochars/wavefile

 byte-data
 Readable data to and from bytes.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data
 bitdepth
 Change the bit depth of audio samples to and from 8, 16, 24, 32, 32 IEEE & 64-bit.
 Copyright (c) 2017 Rafael da Silva Rocha. MIT License.
 https://github.com/rochars/bitdepth

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var k=function(){};k.prototype=a;return new k};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},k={};try{return k.__proto__=a,k.a}catch(h){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,k){a.__proto__=k;if(a.__proto__!==k)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,k){a.prototype=$jscomp.objectCreate(k.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var h=$jscomp.setPrototypeOf;h(a,k)}else for(h in k)if("prototype"!=h)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(k,h);f&&Object.defineProperty(a,h,f)}else a[h]=k[h];a.superClass_=k.prototype};
(function(a){function k(f){if(h[f])return h[f].exports;var g=h[f]={i:f,l:!1,exports:{}};a[f].call(g.exports,g,g.exports,k);g.l=!0;return g.exports}var h={};k.m=a;k.c=h;k.d=function(a,g,l){k.o(a,g)||Object.defineProperty(a,g,{configurable:!1,enumerable:!0,get:l})};k.n=function(a){var g=a&&a.__esModule?function(){return a["default"]}:function(){return a};k.d(g,"a",g);return g};k.o=function(a,g){return Object.prototype.hasOwnProperty.call(a,g)};k.p="";return k(k.s=5)})([function(a,k){function h(a,l){var c=
a.length+1;2==l?c=8:16==l&&(c=2);return f(a,c)}function f(a,f){for(;a.length<f;)a="0"+a;return a}a.exports.fixByteArraySize=function(a,f){var c=0,d=a.length%f;if(d)for(d=-1*(d-f);c<d;)a.push(0),c++};a.exports.padding=function(a,f,c){a[c]=h(a[c],f)};a.exports.paddingNibble=function(a,f,c){2==f&&4>a[c].length&&(a[c]=Array(5-a[c].length).join("0")+a[c])};a.exports.paddingCrumb=function(a,f,c){(2==f||16==f)&&2>a[c].length&&(a[c]="0"+a[c])};a.exports.bytePadding=h;a.exports.lPadZeros=f},function(a,k){function h(a){f[0]=
a;return g[0]}k=new Int8Array(4);var f=new Int32Array(k.buffer,0,1),g=new Float32Array(k.buffer,0,1);a.exports=h;a.exports.pack=h;a.exports.unpack=function(a){g[0]=a;return f[0]}},function(a,k){a.exports.BitDepthOffsets={1:1,2:1,4:1,8:1,16:2,24:3,32:4,40:5,48:6,64:8};a.exports.BitDepthMaxValues={2:4,4:16,8:256,16:65536,24:16777216,32:4294967296,40:1099511627776,48:281474976710656}},function(a,k){a.exports.endianness=function(a,f){for(var g=a.length,l=0;l<g;){for(var c,d=a,e=l,b=0,h=f-1,k=parseInt(f/
2,10);b<k;)c=d[e+b],d[e+b]=d[e+h],d[e+h]=c,b++,h--;l+=f}return a}},function(a,k,h){function f(c,e){e=void 0===e?!1:e;for(var b="",d=0,a=c.length;d<a;){var f=g.lPadZeros(c[d].toString(2),8);b=e?b+f:f+b;d++}return b}var g=h(0),l=new Float32Array(1),c=new Int32Array(l.buffer);a.exports.getBinary=f;a.exports.decodeFloat16=function(c){c=parseInt(f(c,!0),2);var d=(c&31744)>>10,b=c&1023;return(d?Math.pow(2,d-15)*(1+b/1024):b/1024*.00006103515625)*(c>>15?-1:1)};a.exports.decodeFloat64=function(c){if("0,0,0,0,0,0,0,0"==
c.toString())return 0;c=f(c);for(var d="1"+c.substr(12,52),b=1,a=0,g=0;g<d.length;)a+=b*parseInt(d.charAt(g),10),b/=2,g++;return("1"==c.charAt(0)?-1:1)*a*Math.pow(2,parseInt(c.substr(1,11),2)-1023)};a.exports.toFloat64=function(c){if(0==c)return[0,0];var d=0;0>=c&&(d=2147483648,c=-c);var b=Math.floor(Math.log(c)/Math.log(2)),a=Math.floor(c/Math.pow(2,b)*Math.pow(2,52));c=a&4294967295;a/=Math.pow(2,32);return[d|b+1023<<20|a&1048575,c]};a.exports.toHalf=function(d){l[0]=d;var a=c[0];d=a>>16&32768;var b=
a>>12&2047;a=a>>23&255;return 103>a?d:(d|a-112<<10|b>>1)+(b&1)}},function(a,k,h){var f=h(6),g=h(12),l=h(13);a=function(c,a,e){a=void 0===a?!1:a;e=void 0===e?!1:e;var b=l.WaveFileHeader.call(this)||this;b.isFromScratch_=!1;b.enforceFact=a;b.enforceBext=e;b.WaveErrors={format:"Not a supported format.",wave:"Could not find the 'WAVE' chunk","fmt ":"Could not find the 'fmt ' chunk",data:"Could not find the 'data' chunk",fact:"Could not find the 'fact' chunk",bext:"Could not find the 'bext' chunk",bitDepth:"Invalid bit depth.",
numChannels:"Invalid number of channels.",sampleRate:"Invalid sample rate."};b.samples_=[];b.bytes_=[];c&&b.fromBuffer(c);return b};$jscomp.inherits(a,l.WaveFileHeader);a.prototype.fromScratch=function(c,a,e,b,f){f=void 0===f?{}:f;f.container||(f.container="RIFF");this.isFromScratch_=!0;var d=parseInt(e,10)/8;this.chunkSize=36+b.length*d;this.subChunk1Size=16;this.byteRate=c*d*a;this.blockAlign=c*d;this.chunkId=f.container;this.format="WAVE";this.subChunk1Id="fmt ";this.audioFormat=this.headerFormats_[e];
this.numChannels=c;this.sampleRate=a;this.bitsPerSample=parseInt(e,10);this.subChunk2Id="data";this.subChunk2Size=b.length*d;this.samples_=b;this.bitDepth_=e};a.prototype.fromBuffer=function(c){this.isFromScratch_=!1;this.readRIFFChunk_(c);this.readWAVEChunk_(c);this.readFmtChunk_(c);this.readFactChunk_(c);this.readBextChunk_(c);this.readDataChunk_(c)};a.prototype.toBuffer=function(){this.checkWriteInput_(this.numChannels,this.sampleRate,this.bitDepth_);this.samplesToBytes_();return new Uint8Array(this.createWaveFile_())};
a.prototype.toRIFF=function(){this.chunkId="RIFF"};a.prototype.toRIFX=function(){this.chunkId="RIFX"};a.prototype.toBitDepth=function(c){g.toBitDepth(this.samples_,this.bitDepth_,c);this.fromScratch(this.numChannels,this.sampleRate,c,this.samples_,{container:this.chunkId})};a.prototype.interleave=function(){var c=[],a,e,b=this.samples_[0].length;for(a=0;a<b;a++)for(e=0;e<this.samples_.length;e++)c.push(this.samples_[e][a]);this.samples_=c};a.prototype.deInterleave=function(){var c=[],a;for(a=0;a<
this.numChannels;a++)c[a]=[];a=0;for(var e;a<this.samples_.length;){for(e=0;e<this.numChannels;e++)c[e].push(this.samples_[a+e]);a+=e}this.samples_=c};a.prototype.readRIFFChunk_=function(c){this.chunkId=f.fromBytes(c.slice(0,4),8,{"char":!0});if("RIFF"!=this.chunkId&&"RIFX"!=this.chunkId)throw Error(this.WaveErrors.format);this.chunkSize=f.fromBytes(c.slice(4,8),32,{be:"RIFX"==this.chunkId})[0]};a.prototype.readWAVEChunk_=function(c){if(-1===f.findString(c,"WAVE"))throw Error(this.WaveErrors.wave);
this.format="WAVE"};a.prototype.readFmtChunk_=function(c){var a=f.findString(c,"fmt ");if(-1===a)throw Error(this.WaveErrors["fmt "]);var e={be:"RIFX"==this.chunkId};this.subChunk1Id="fmt ";this.subChunk1Size=f.fromBytes(c.slice(a+4,a+8),32,e)[0];this.audioFormat=f.fromBytes(c.slice(a+8,a+10),16,e)[0];this.numChannels=f.fromBytes(c.slice(a+10,a+12),16,e)[0];this.sampleRate=f.fromBytes(c.slice(a+12,a+16),32,e)[0];this.byteRate=f.fromBytes(c.slice(a+16,a+20),32,e)[0];this.blockAlign=f.fromBytes(c.slice(a+
20,a+22),16,e)[0];this.bitsPerSample=f.fromBytes(c.slice(a+22,a+24),16,e)[0];this.bitDepth_=3==this.audioFormat&&32==this.bitsPerSample?"32f":this.bitsPerSample.toString()};a.prototype.readFactChunk_=function(a){a=f.findString(a,"fact");if(-1===a&&this.enforceFact)throw Error(this.WaveErrors.fact);-1<a&&(this.factChunkId="fact")};a.prototype.readBextChunk_=function(a){a=f.findString(a,"bext");if(-1===a&&this.enforceBext)throw Error(this.WaveErrors.bext);-1<a&&(this.bextChunkId="bext")};a.prototype.readDataChunk_=
function(a){var c=f.findString(a,"data");if(-1===c)throw Error(this.WaveErrors.data);this.subChunk2Id="data";this.subChunk2Size=f.fromBytes(a.slice(c+4,c+8),32,{be:"RIFX"==this.chunkId})[0];this.samplesFromBytes_(a,c)};a.prototype.samplesFromBytes_=function(a,d){var c={signed:8==this.bitsPerSample?!1:!0,be:"RIFX"==this.chunkId};32==this.bitsPerSample&&3==this.audioFormat&&(c.float=!0);a=a.slice(d+8,d+8+this.subChunk2Size);this.samples_=4==this.bitsPerSample?f.fromBytes(a,8,c):f.fromBytes(a,this.bitsPerSample,
c)};a.prototype.checkWriteInput_=function(){this.validateBitDepth_();this.validateNumChannels_();this.validateSampleRate_()};a.prototype.validateBitDepth_=function(){if(!this.headerFormats_[this.bitDepth_])throw Error(this.WaveErrors.bitDepth);return!0};a.prototype.validateNumChannels_=function(){var a=this.numChannels*this.bitsPerSample/8;if(1>this.numChannels||65535<a)throw Error(this.WaveErrors.numChannels);return!0};a.prototype.validateSampleRate_=function(){var a=this.bitsPerSample/8*this.numChannels*
this.sampleRate;if(1>this.sampleRate||4294967295<a)throw Error(this.WaveErrors.sampleRate);return!0};a.prototype.samplesToBytes_=function(){var a={be:"RIFX"==this.chunkId};32==this.bitsPerSample&&3==this.audioFormat&&(a.float=!0);this.bytes_=f.toBytes(this.samples_,4==this.bitsPerSample?8:this.bitsPerSample,a);this.bytes_.length%2&&this.bytes_.push(0)};a.prototype.createWaveFile_=function(){var a=[];this.factChunkId&&(a=f.toBytes(this.factChunkId,8,{"char":!0}));var d={be:"RIFX"==this.chunkId};return f.toBytes(this.chunkId,
8,{"char":!0}).concat(f.toBytes([this.chunkSize],32,d),f.toBytes(this.format,8,{"char":!0}),f.toBytes(this.subChunk1Id,8,{"char":!0}),f.toBytes([this.subChunk1Size],32,d),f.toBytes([this.audioFormat],16,d),f.toBytes([this.numChannels],16,d),f.toBytes([this.sampleRate],32,d),f.toBytes([this.byteRate],32,d),f.toBytes([this.blockAlign],16,d),f.toBytes([this.bitsPerSample],16,d),a,f.toBytes(this.subChunk2Id,8,{"char":!0}),f.toBytes([this.subChunk2Size],32,d),this.bytes_)};window.WaveFile=a},function(a,
k,h){k=h(7);var f=h(9),g=h(11);h=h(2);a.exports.findString=function(a,c){for(var d,e=0;e<a.length;e++)if(d=f.fromBytes(a.slice(e,e+c.length),8,{"char":!0}),d==c)return e;return-1};a.exports.toBytes=k.toBytes;a.exports.fromBytes=f.fromBytes;a.exports.packBooleans=g.packBooleans;a.exports.unpackBooleans=g.unpackBooleans;a.exports.packCrumbs=g.packCrumbs;a.exports.unpackCrumbs=g.unpackCrumbs;a.exports.packNibbles=g.packNibbles;a.exports.unpackNibbles=g.unpackNibbles;a.exports.BitDepthOffsets=h.BitDepthOffsets;
a.exports.BitDepthMaxValues=h.BitDepthMaxValues},function(a,k,h){function f(a,c,e){4==c?g(a,e,l.paddingNibble):2==c?g(a,e,l.paddingCrumb):1==c?g(a,e,function(){}):g(a,e)}function g(a,c,e){e=void 0===e?l.padding:e;if(10!=c)for(var b=0,d=a.length;b<d;)a[b]=a[b].toString(c),e(a,c,b),b++}h(1);var l=h(0),c=h(3),d=h(8),e=h(2);a.exports.toBytes=function(a,g,h){h=void 0===h?{}:h;var b=10;"base"in h&&(b=h.base);var l=h.char?d.writeString:d["write"+g+"Bit"+(h.float?"Float":"")];for(var k=0,m=0,p=a.length,n=
[];k<p;)m=l(n,a,k,m),k++;a=n;h.be&&c.endianness(a,e.BitDepthOffsets[g]);f(a,g,b);h.buffer&&(a=new Uint8Array(a));return a}},function(a,k,h){function f(a,d,e,b){a[b++]=d[e]&255;a[b++]=d[e]>>>8&255;a[b++]=d[e]>>>16&255;a[b++]=d[e]>>>24&255;return b}var g=h(4),l=h(1);a.exports.write64Bit=function(a,d,e,b){d=g.toFloat64(d[e]);b=f(a,d,1,b);return f(a,d,0,b)};a.exports.write48Bit=function(a,d,e,b){a[b++]=d[e]&255;a[b++]=d[e]>>8&255;a[b++]=d[e]>>16&255;a[b++]=d[e]>>24&255;a[b++]=d[e]/4294967296&255;a[b++]=
d[e]/1099511627776&255;return b};a.exports.write40Bit=function(a,d,e,b){a[b++]=d[e]&255;a[b++]=d[e]>>8&255;a[b++]=d[e]>>16&255;a[b++]=d[e]>>24&255;a[b++]=d[e]/4294967296&255;return b};a.exports.write32BitFloat=function(a,d,e,b){d=l.unpack(d[e]);a[b++]=d&255;a[b++]=d>>>8&255;a[b++]=d>>>16&255;a[b++]=d>>>24&255;return b};a.exports.write32Bit=f;a.exports.write24Bit=function(a,d,e,b){a[b++]=d[e]&255;a[b++]=d[e]>>>8&255;a[b++]=d[e]>>>16&255;return b};a.exports.write16Bit=function(a,d,e,b){a[b++]=d[e]&
255;a[b++]=d[e]>>>8&255;return b};a.exports.write16BitFloat=function(a,d,e,b){d=g.toHalf(d[e]);a[b++]=d>>>8&255;a[b++]=d&255;return b};a.exports.write8Bit=function(a,d,e,b){a[b++]=d[e]&255;return b};a.exports.write4Bit=function(a,d,e,b){a[b++]=d[e]&15;return b};a.exports.write2Bit=function(a,d,e,b){a[b++]=0>d[e]?d[e]+4:d[e];return b};a.exports.write1Bit=function(a,d,e,b){a[b++]=d[e]?1:0;return b};a.exports.writeString=function(a,d,e,b){a[b++]=d.charCodeAt(e);return b}},function(a,k,h){function f(a,
b,c,f){var e=[],h=0,l=0,k=d.BitDepthOffsets[b],m=a.length-(k-1);b=d.BitDepthMaxValues[b];for(c=c?g:function(a,b){return a};h<m;)e[l]=c(f(a,h),b),h+=k,l++;return e}function g(a,b){a>parseInt(b/2,10)-1&&(a-=b);return a}var l=h(3),c=h(10),d=h(2);a.exports.fromBytes=function(a,b,d){d=void 0===d?{}:d;var e=10;"base"in d&&(e=d.base);d.be&&l.endianness(a,b/8);if(10!=e)for(var g=0,h=a.length;g<h;)a[g]=parseInt(a[g],e),g++;a=f(a,b,d.signed,d.char?c.readChar:c["read"+(2==b||4==b?8:b)+"Bit"+(d.float?"Float":
"")]);d.char&&(a=a.join(""));return a}},function(a,k,h){function f(a,b,c){--c;for(var e="";0<=c;)e+=l.bytePadding(a[c+b].toString(2),2),c--;return parseInt(e,2)}function g(a,b){return(a[3+b]<<24|a[2+b]<<16|a[1+b]<<8|a[b])>>>0}var l=h(0),c=h(4),d=h(1);a.exports.readChar=function(a,b){return String.fromCharCode(a[b])};a.exports.read1Bit=function(a,b){return parseInt(a[b],2)};a.exports.read8Bit=function(a,b){return a[b]};a.exports.read16Bit=function(a,b){return a[1+b]<<8|a[b]};a.exports.read16BitFloat=
function(a,b){return c.decodeFloat16(a.slice(b,b+2))};a.exports.read24Bit=function(a,b){return a[2+b]<<16|a[1+b]<<8|a[b]};a.exports.read32Bit=g;a.exports.read32BitFloat=function(a,b){return d.pack(g(a,b))};a.exports.read40Bit=function(a,b){return f(a,b,5)};a.exports.read48Bit=function(a,b){return f(a,b,6)};a.exports.read64Bit=function(a,b){return c.decodeFloat64(a.slice(b,b+8))}},function(a,k,h){var f=h(0);a.exports.packBooleans=function(a){var g=[],c=0,d=0;f.fixByteArraySize(a,8);for(var e=a.length-
7;c<e;)g[d++]=parseInt(a[c].toString(2)+a[c+1].toString(2)+a[c+2].toString(2)+a[c+3].toString(2)+a[c+4].toString(2)+a[c+5].toString(2)+a[c+6].toString(2)+a[c+7].toString(2),2),c+=8;return g};a.exports.unpackBooleans=function(a){for(var g=[],c=0,d=0,e=a.length,b;c<e;)b=f.lPadZeros(a[c].toString(2),8),g[d++]=parseInt(b[0],2),g[d++]=parseInt(b[1],2),g[d++]=parseInt(b[2],2),g[d++]=parseInt(b[3],2),g[d++]=parseInt(b[4],2),g[d++]=parseInt(b[5],2),g[d++]=parseInt(b[6],2),g[d++]=parseInt(b[7],2),c++;return g};
a.exports.packCrumbs=function(a){var g=[],c=0,d=0;f.fixByteArraySize(a,4);for(var e=a.length-3;c<e;)g[d++]=parseInt(f.lPadZeros(a[c].toString(2),2)+f.lPadZeros(a[c+1].toString(2),2)+f.lPadZeros(a[c+2].toString(2),2)+f.lPadZeros(a[c+3].toString(2),2),2),c+=4;return g};a.exports.unpackCrumbs=function(a){var g=[],c=0,d=0,e=a.length;for(console.log(e);c<e;){var b=f.lPadZeros(a[c].toString(2),8);g[d++]=parseInt(b[0]+b[1],2);g[d++]=parseInt(b[2]+b[3],2);g[d++]=parseInt(b[4]+b[5],2);g[d++]=parseInt(b[6]+
b[7],2);c++}return g};a.exports.packNibbles=function(a){var f=[],c=0,d=0,e=a.length;for(e%2&&a.push(0);c<e;)f[d++]=parseInt(a[c].toString(16)+a[c+1].toString(16),16),c+=2;return f};a.exports.unpackNibbles=function(a){for(var f=[],c=0,d=0,e=a.length;c<e;)f[d++]=parseInt(a[c].toString(16)[0],16),f[d++]=parseInt(a[c].toString(16)[1],16),c++;return f}},function(a,k){var h={2:4,4:16,8:256,16:65536,24:16777216,32:4294967296,40:1099511627776,48:281474976710656};a.exports.toBitDepth=function(a,g,k){if(g!=
k){var c="8 16 24 32 32f 64".split(" ");if(-1==c.indexOf(g)||-1==c.indexOf(k))throw Error("Invalid bit depth.");c=a.length;for(var d=parseInt(h[parseInt(g,10)]/2,10),e=parseInt(h[parseInt(k,10)]/2,10),b=0;b<c;b++)"8"==g&&(a[b]-=128),"32f"==k||"64"==k?"32f"!=g&&"64"!=g&&(a[b]=0<a[b]?a[b]/(d-1):a[b]/d):(a[b]="32f"==g||"64"==g?0<a[b]?a[b]*(e-1):a[b]*e:0<a[b]?parseInt(a[b]/(d-1)*e-1,10):parseInt(a[b]/d*e,10),"8"==k&&(a[b]+=128))}};a.exports.BitDepthMaxValues=h},function(a,k){a.exports.WaveFileHeader=
function(){this.chunkId="";this.chunkSize=0;this.format=this.subChunk1Id="";this.cbSize=this.bitsPerSample=this.blockAlign=this.byteRate=this.sampleRate=this.numChannels=this.audioFormat=this.subChunk1Size=0;this.factChunkId="";this.factChunkSize=4;this.dwSampleLength=0;this.subChunk2Id="";this.subChunk2Size=0;this.bextChunkId="";this.headerFormats_={4:17,8:1,16:1,24:1,32:1,"32f":3,64:3}}}]);
