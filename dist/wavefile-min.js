/*
 byte-data
 Read and write data to and from byte buffers.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

 endianness
 Swap endianness in byte arrays.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/endianness

 alawmulaw
 JavaScript A-Law and mu-Law codecs.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/alawmulaw

 wavefile
 Read & write wave files with 4, 8, 16, 24, 32 & 64-bit data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/wavefile

 bitdepth
 Change the bit depth of samples to and from 8, 16, 24, 32 & 64-bit.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/bitdepth

 riff-chunks
 Read and write the chunks of RIFF and RIFX files.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/riff-chunks

 byte-data
 Readable data to and from byte buffers.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

 imaadpcm
 JavaScript IMA ADPCM codec.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/imaadpcm

 References:
 http://www.cs.columbia.edu/~hgs/audio/dvi/
 https://github.com/acida/pyima
 https://wiki.multimedia.cx/index.php/IMA_ADPCM

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(b){var a=function(){};a.prototype=b;return new a};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},a={};try{return a.__proto__=b,a.a}catch(k){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.inherits=function(b,a){b.prototype=$jscomp.objectCreate(a.prototype);b.prototype.constructor=b;if($jscomp.setPrototypeOf){var k=$jscomp.setPrototypeOf;k(b,a)}else for(k in a)if("prototype"!=k)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(a,k);e&&Object.defineProperty(b,k,e)}else b[k]=a[k];b.superClass_=a.prototype};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,k){b!=Array.prototype&&b!=Object.prototype&&(b[a]=k.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,k,e){if(a){k=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var h=b[e];h in k||(k[h]={});k=k[h]}b=b[b.length-1];e=k[b];a=a(e);a!=e&&null!=a&&$jscomp.defineProperty(k,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Object.assign",function(b){return b?b:function(a,b){for(var e=1;e<arguments.length;e++){var h=arguments[e];if(h)for(var f in h)$jscomp.owns(h,f)&&(a[f]=h[f])}return a}},"es6","es3");
$jscomp.polyfill("Object.is",function(b){return b?b:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(a,b){var e=this;e instanceof String&&(e=String(e));var h=e.length;for(b=b||0;b<h;b++)if(e[b]==a||Object.is(e[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(b,a,k){if(null==b)throw new TypeError("The 'this' value for String.prototype."+k+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+k+" must not be a regular expression");return b+""};$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
(function(b){function a(e){if(k[e])return k[e].exports;var h=k[e]={i:e,l:!1,exports:{}};b[e].call(h.exports,h,h.exports,a);h.l=!0;return h.exports}var k={};a.m=b;a.c=k;a.d=function(b,h,f){a.o(b,h)||Object.defineProperty(b,h,{configurable:!1,enumerable:!0,get:f})};a.n=function(b){var h=b&&b.__esModule?function(){return b["default"]}:function(){return b};a.d(h,"a",h);return h};a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};a.p="";return a(a.s=6)})([function(b,a,k){function e(c,
a,g){g=void 0===g?10:g;var d=[];a.char?d=a.char?c.slice(0,a.realBits/8):c:Array.isArray(c)||(d=[c]);return f.toBytes(d,f.getType(a,g))}function h(c,a,g){g=void 0===g?10:g;c=f.fromBytes(c.slice(0,8>a.bits?a.bits:a.realBits/8),f.getType(a,g));return c=a.char?c.slice(0,a.bits/8):c[0]}var f=k(7),c=k(1);b.exports.pack=e;b.exports.unpack=h;b.exports.packArray=function(c,a,g){return f.toBytes(c,f.getType(a,void 0===g?10:g))};b.exports.unpackArray=function(c,a,g){return f.fromBytes(c,f.getType(a,void 0===
g?10:g))};b.exports.unpackStruct=function(c,a,g){g=void 0===g?10:g;for(var d=c.length,n=0,b=0;b<a.length;b++)n+=a[b].realBits/8;if(d<n)return[];d=[];for(b=n=0;n<a.length;){var f=8>a[n].bits?1:a[n].realBits/8;d=d.concat(h(c.slice(b,b+f),a[n],g));b+=f;n++}return d};b.exports.packStruct=function(c,a,g){g=void 0===g?10:g;if(c.length<a.length)return[];for(var d=[],b=0;b<a.length;b++)d=d.concat(e(c[b],a[b],g));return d};b.exports.findString=function(a,b){for(var g,d=0;d<a.length;d++)if(g=h(a.slice(d,d+
b.length+1),new c({bits:8*b.length,"char":!0})),g==b)return d;return-1};b.exports.Type=c;b.exports.chr=new c({bits:8,"char":!0});b.exports.fourCC=new c({bits:32,"char":!0});b.exports.bool=new c({bits:1});b.exports.int2=new c({bits:2,signed:!0});b.exports.uInt2=new c({bits:2});b.exports.int4=new c({bits:4,signed:!0});b.exports.uInt4=new c({bits:4});b.exports.int8=new c({bits:8,signed:!0});b.exports.uInt8=new c({bits:8});b.exports.int16=new c({bits:16,signed:!0});b.exports.uInt16=new c({bits:16});b.exports.float16=
new c({bits:16,"float":!0});b.exports.int24=new c({bits:24,signed:!0});b.exports.uInt24=new c({bits:24});b.exports.int32=new c({bits:32,signed:!0});b.exports.uInt32=new c({bits:32});b.exports.float32=new c({bits:32,"float":!0});b.exports.int40=new c({bits:40,signed:!0});b.exports.uInt40=new c({bits:40});b.exports.int48=new c({bits:48,signed:!0});b.exports.uInt48=new c({bits:48});b.exports.float64=new c({bits:64,"float":!0});b.exports.int16BE=new c({bits:16,signed:!0,be:!0});b.exports.uInt16BE=new c({bits:16,
be:!0});b.exports.float16BE=new c({bits:16,"float":!0,be:!0});b.exports.int24BE=new c({bits:24,signed:!0,be:!0});b.exports.uInt24BE=new c({bits:24,be:!0});b.exports.int32BE=new c({bits:32,signed:!0,be:!0});b.exports.uInt32BE=new c({bits:32,be:!0});b.exports.float32BE=new c({bits:32,"float":!0,be:!0});b.exports.int40BE=new c({bits:40,signed:!0,be:!0});b.exports.uInt40BE=new c({bits:40,be:!0});b.exports.int48BE=new c({bits:48,signed:!0,be:!0});b.exports.uInt48BE=new c({bits:48,be:!0});b.exports.float64BE=
new c({bits:64,"float":!0,be:!0})},function(b,a,k){var e=new Float32Array(1),h=new Int32Array(e.buffer),f=new Float64Array(1),c=new Uint32Array(f.buffer),l=k(8);a=function(c){var a=l.call(this,c)||this;a.char=c["char"];a.float=c["float"];a.buildType_();return a};$jscomp.inherits(a,l);a.BitDepthMaxValues=l.BitDepthMaxValues;a.toBitDepth=l.toBitDepth;a.prototype.read16F_=function(c,a){c=this.read_(c,a,{bits:16,offset:2});a=(c&31744)>>10;var d=c&1023;return(a?Math.pow(2,a-15)*(1+d/1024):d/1024*.00006103515625)*
(c>>15?-1:1)};a.prototype.read32F_=function(c,a){h[0]=this.read_(c,a,{bits:32,offset:4});return e[0]};a.prototype.read64F_=function(a,b){c[0]=this.read_(a,b,{bits:32,offset:4});c[1]=this.read_(a,b+4,{bits:32,offset:4});return f[0]};a.prototype.readChar_=function(c,a){for(var d="",b=0;b<this.offset;)d+=String.fromCharCode(c[a+b]),b++;return d};a.prototype.write64F_=function(a,b,d){f[0]=b;b={bits:32,offset:4,lastByteMask:255};d=this.write_(a,c[0],d,b);return this.write_(a,c[1],d,b)};a.prototype.write32F_=
function(c,a,d,b){e[0]=a;return d=this.write_(c,h[0],d,b)};a.prototype.write16F_=function(c,a,d){e[0]=a;var b=h[0];a=b>>16&32768;var g=b>>12&2047;b=b>>23&255;103<=b&&(a=(a|b-112<<10|g>>1)+(g&1));c[d++]=a&255;c[d++]=a>>>8&255;return d};a.prototype.writeChar_=function(c,a,d){c[d++]=a.charCodeAt(0);return d};a.prototype.buildType_=function(){this.setReader_();this.setWriter_();this.float&&(this.min=-Infinity,this.max=Infinity)};a.prototype.setReader_=function(){this.float?16==this.bits?this.reader=this.read16F_:
32==this.bits?this.reader=this.read32F_:64==this.bits&&(this.reader=this.read64F_):this.char?this.reader=this.readChar_:32<this.bits&&(this.reader=this.readBits_)};a.prototype.setWriter_=function(){this.float?16==this.bits?this.writer=this.write16F_:32==this.bits?this.writer=this.write32F_:64==this.bits&&(this.writer=this.write64F_):this.char&&(this.writer=this.writeChar_)};b.exports=a},function(b,a){b.exports=function(a,b){for(var h=a.length,f=0;f<h;){for(var c=a,e=f,m=0,g=b-1,d=parseInt(b/2,10);m<
d;){var n=c[e+m];c[e+m]=c[e+g];c[e+g]=n;m++;g--}f+=b}}},function(b,a){b.exports={format:"Not a supported format.",wave:"Could not find the 'WAVE' format identifier","fmt ":"Could not find the 'fmt ' chunk",data:"Could not find the 'data' chunk",fact:"Could not find the 'fact' chunk",bitDepth:"Invalid bit depth.",numChannels:"Invalid number of channels.",sampleRate:"Invalid sample rate."}},function(b,a,k){var e=k(15);a=function(a){this.bits=a.bits;this.char=a["char"];this.float=a["float"];this.be=
a.be;this.signed=this.float?!0:a.signed;this.writer=this.reader=null;this.offset=0;this.base=a.base?a.base:10;this.min=-Infinity;this.max=Infinity;this.build_();this.realBits=this.bits};a.prototype.sign=function(a){a>this.max&&(a-=2*this.max+2);return a};a.prototype.overflow=function(a){a>this.max?a=this.max:a<this.min&&(a=this.min);return a};a.prototype.build_=function(){this.setRealBits_();this.offset=8>this.bits?1:this.realBits/8;this.setReader_();this.setWriter_();this.float||this.setMinMax_()};
a.prototype.setReader_=function(){this.reader=this.char?e.BitReader.readChar:e.BitReader["read"+(8>this.bits?8:this.realBits)+"Bit"+(this.float?"Float":"")]};a.prototype.setWriter_=function(){this.writer=this.char?e.BitWriter.writeString:e.BitWriter["write"+this.realBits+"Bit"+(this.float?"Float":"")]};a.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};a.prototype.setRealBits_=function(){this.realBits=8<this.bits?16>=
this.bits?16:24>=this.bits?24:32>=this.bits?32:40>=this.bits?40:48>=this.bits?48:53>=this.bits?53:64:this.bits};b.exports=a},function(b,a,k){b.exports.alaw=k(17);b.exports.mulaw=k(18)},function(b,a,k){k(0);var e=k(9),h=k(3),f=k(10),c=k(12),l=k(16),m=k(5).alaw,g=k(5).mulaw;b=function(d){var a=f.call(this)||this;d&&a.fromBuffer(d);return a};$jscomp.inherits(b,f);b.prototype.fromScratch=function(d,a,c,b,g){g=void 0===g?{}:g;this.validBitsPerSample=this.cbSize=0;this.factChunkId="";this.factChunkSize=
0;this.factChunkData=[];this.dwSampleLength=0;g.container||(g.container="RIFF");var n=parseInt(c,10)/8;this.chunkSize=36+b.length*n;this.fmtChunkSize=16;this.byteRate=d*n*a;this.blockAlign=d*n;this.chunkId=g.container;this.format="WAVE";this.fmtChunkId="fmt ";this.audioFormat=this.headerFormats_[c];this.numChannels=d;this.sampleRate=a;this.bitsPerSample=parseInt(c,10);this.dataChunkId="data";this.dataChunkSize=b.length*n;this.samples=b;this.bitDepth=c;"4"==c&&(this.chunkSize=44+b.length,this.fmtChunkSize=
20,this.byteRate=4055,this.blockAlign=256,this.bitsPerSample=4,this.dataChunkSize=b.length,this.cbSize=2,this.validBitsPerSample=505,this.factChunkId="fact",this.factChunkSize=4,this.dwSampleLength=2*b.length);if("8a"==c||"8m"==c)this.chunkSize=44+b.length,this.fmtChunkSize=20,this.cbSize=2,this.validBitsPerSample=8,this.factChunkId="fact",this.factChunkSize=4,this.dwSampleLength=b.length};b.prototype.fromBuffer=function(d){this.readRIFFChunk_(d);var a="RIFX"==this.chunkId;d=c.read(d,a);this.readFmtChunk_(d.subChunks);
this.readFactChunk_(d.subChunks);this.readBextChunk_(d.subChunks);this.readCueChunk_(d.subChunks);this.readDataChunk_(d.subChunks,{be:a,single:!0});this.bitDepth=3==this.audioFormat&&32==this.bitsPerSample?"32f":this.bitsPerSample.toString()};b.prototype.toBuffer=function(){this.checkWriteInput_();return new Uint8Array(this.createWaveFile_())};b.prototype.toRIFF=function(){this.chunkId="RIFF";this.LEorBE()};b.prototype.toRIFX=function(){this.chunkId="RIFX";this.LEorBE()};b.prototype.toBitDepth=function(d){e.toBitDepth(this.samples,
this.bitDepth,d);this.fromScratch(this.numChannels,this.sampleRate,d,this.samples,{container:this.chunkId})};b.prototype.interleave=function(){var d=[],a,c,b=this.samples[0].length;for(a=0;a<b;a++)for(c=0;c<this.samples.length;c++)d.push(this.samples[c][a]);this.samples=d};b.prototype.deInterleave=function(){var d=[],a;for(a=0;a<this.numChannels;a++)d[a]=[];a=0;for(var c;a<this.samples.length;){for(c=0;c<this.numChannels;c++)d[c].push(this.samples[a+c]);a+=c}this.samples=d};b.prototype.toIMAADPCM=
function(){this.fromScratch(this.numChannels,this.sampleRate,"4",l.encode(this.samples),{container:this.chunkId})};b.prototype.fromIMAADPCM=function(d){this.fromScratch(this.numChannels,this.sampleRate,"16",l.decode(this.samples,void 0===d?256:d),{container:this.chunkId})};b.prototype.toALaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"8a",m.encode(this.samples),{container:this.chunkId})};b.prototype.fromALaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"16",m.decode(this.samples),
{container:this.chunkId})};b.prototype.toMuLaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"8m",g.encode(this.samples),{container:this.chunkId})};b.prototype.fromMuLaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"16",g.decode(this.samples),{container:this.chunkId})};b.prototype.checkWriteInput_=function(){this.validateBitDepth_();this.validateNumChannels_();this.validateSampleRate_()};b.prototype.validateBitDepth_=function(){if(!this.headerFormats_[this.bitDepth])throw Error(h.bitDepth);
return!0};b.prototype.validateNumChannels_=function(){var d=this.numChannels*this.bitsPerSample/8;if(1>this.numChannels||65535<d)throw Error(h.numChannels);return!0};b.prototype.validateSampleRate_=function(){var d=this.bitsPerSample/8*this.numChannels*this.sampleRate;if(1>this.sampleRate||4294967295<d)throw Error(h.sampleRate);return!0};window.WaveFile=b},function(b,a,k){var e=k(1),h=k(2);b.exports.getType=function(a,c){a=Object.assign(new e({}),a);a.base=c;return a};b.exports.toBytes=function(a,
c){for(var b=0,f=0,g=a.length,d=[];b<g;)f=c.writer(d,a[b++],f);c.be&&h(d,c.offset);if(10!=c.base){a=c.base;b=0;for(f=d.length;b<f;)d[b]=d[b].toString(a),b++;a=0;b=d.length;for(c=(2==c.base?8:2)+1;a<b;)d[a]=Array(c-d[a].length).join("0")+d[a],a++}return d};b.exports.fromBytes=function(a,c){c.be&&h(a,c.offset);if(10!=c.base)for(var b=c.base,f=0,g=a.length;f<g;)a[f]=parseInt(a[f],b),f++;b=[];f=0;for(g=a.length-(c.offset-1);f<g;)b.push(c.reader(a,f)),f+=c.offset;c.char&&(b=b.join(""));return b}},function(b,
a){a=function(a){this.bits=a.bits;this.be=a.be;this.signed=a.signed;this.base=a.base?a.base:10;this.reader=this.read_;this.writer=this.write_;this.offset=0;this.min=-Infinity;this.max=Infinity;this.realBits=this.bits;this.lastByteMask=255;this.build_()};a.prototype.sign=function(a){a>this.max&&(a-=2*this.max+2);return a};a.prototype.overflow=function(a){a>this.max?a=this.max:a<this.min&&(a=this.min);return a};a.prototype.read_=function(a,b,h){var f=0;for(h=(void 0===h?this:h).offset-1;0<h;)f|=a[h+
b]<<8*h,h--;f=(a[b]|f)>>>0;return this.overflow(this.sign(f))};a.prototype.readBits_=function(a,b,h){h=void 0===h?this:h;for(var f="",c=0;c<h.offset;){var e=a[b+c].toString(2);f=Array(9-e.length).join("0")+e+f;c++}return this.overflow(this.sign(parseInt(f,2)))};a.prototype.write_=function(a,b,h,f){f=void 0===f?this:f;b=this.overflow(b);var c=255,e=f.offset;h=this.writeFirstByte_(a,b,h,f);for(var m=2;m<=e;m++)m==e&&(c=f.lastByteMask),a[h++]=Math.floor(b/Math.pow(2,8*(m-1)))&c;return h};a.prototype.build_=
function(){this.validateWordSize_();this.setRealBits_();this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?1:Math.ceil(this.realBits/8)};a.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};a.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");};a.prototype.setRealBits_=function(){this.realBits=8<this.bits?16>=this.bits?16:24>=this.bits?24:32>=this.bits?
32:40>=this.bits?40:48>=this.bits?48:56>=this.bits?56:64:this.bits};a.prototype.setLastByteMask_=function(){var a=8-(this.realBits-this.bits);this.lastByteMask=Math.pow(2,0<a?a:8)-1};a.prototype.writeFirstByte_=function(a,b,h,f){f=void 0===f?this:f;8>f.bits?a[h++]=0>b?b+Math.pow(2,f.bits):b:a[h++]=b&255;return h};b.exports=a},function(b,a){var k=new Float32Array(1),e={8:256,16:65536,24:16777216,32:4294967296,"32f":1,64:1},h={intToInt:function(a,c){return a=0<a?parseInt(a/c.oldPositive*c.newPositive,
10):parseInt(a/c.oldNegative*c.newNegative,10)},floatToInt:function(a,c){return 0<a?a*c.newPositive:a*c.newNegative},intToFloat:function(a,c){return 0<a?a/c.oldPositive:a/c.oldNegative},floatToFloat:function(a,c){"64"==c.original&&"32f"==c.target&&(k[0]=a,a=k[0]);return a}};b.exports.toBitDepth=function(a,c,b){var f="8 16 24 32 32f 64".split(" ");if(-1==f.indexOf(c)||-1==f.indexOf(b))throw Error("Invalid bit depth.");f=["32f","64"].includes(c)?"float":"int";var g=["32f","64"].includes(b)?"Float":
"Int";f=h[f+"To"+g];g=a.length;for(var d=0;d<g;d++){var n=d,l=a[d];"8"==c&&(l-=128);a[n]=l;a[d]=f(a[d],{oldNegative:e[c]/2,newNegative:e[b]/2,oldPositive:e[c]/2-1,newPositive:e[b]/2-1,original:c,target:b});n=d;l=a[d];"8"==b&&(l+=128);a[n]=l}};b.exports.BitDepthMaxValues=e},function(b,a,k){var e=k(0),h=k(3),f=e.uInt8,c=e.uInt16,l=e.uInt32,m=e.chr,g=k(11);a=function(){var a=g.call(this)||this;a.headerFormats_={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3};a.samples=[];a.head_=0;return a};$jscomp.inherits(a,
g);a.decodeSample=g.decodeSample;a.encodeSample=g.encodeSample;a.decodeBlock=g.decodeBlock;a.encodeBlock=g.encodeBlock;a.decode=g.decode;a.encode=g.encode;a.write=g.write;a.read=g.read;a.prototype.readRIFFChunk_=function(a){this.chunkId=e.unpackArray(a.slice(0,4),m);if("RIFF"!=this.chunkId&&"RIFX"!=this.chunkId)throw Error(h.format);this.LEorBE();this.chunkSize=e.unpack(a.slice(4,8),l);this.format=e.unpackArray(a.slice(8,12),m);if("WAVE"!=this.format)throw Error(h.wave);};a.prototype.LEorBE=function(){var a=
"RIFX"==this.chunkId;f.be=a;c.be=a;return l.be=a};a.prototype.readFmtChunk_=function(a){if(a=this.findChunk(a,"fmt "))this.fmtChunkId="fmt ",this.fmtChunkSize=a.chunkSize,this.audioFormat=e.unpack(a.chunkData.slice(0,2),c),this.numChannels=e.unpack(a.chunkData.slice(2,4),c),this.sampleRate=e.unpack(a.chunkData.slice(4,8),l),this.byteRate=e.unpack(a.chunkData.slice(8,12),l),this.blockAlign=e.unpack(a.chunkData.slice(12,14),c),this.bitsPerSample=e.unpack(a.chunkData.slice(14,16),c),this.readFmtExtension(a);
else throw Error(h["fmt "]);};a.prototype.readFmtExtension=function(a){16<this.fmtChunkSize&&(this.cbSize=e.unpack(a.chunkData.slice(16,18),c),18<this.fmtChunkSize&&(this.validBitsPerSample=e.unpack(a.chunkData.slice(18,20),c)))};a.prototype.readFactChunk_=function(a){if(a=this.findChunk(a,"fact"))this.factChunkId="fact",this.factChunkSize=a.chunkSize,this.dwSampleLength=e.unpack(a.chunkData.slice(0,4),l);else if(this.enforceFact)throw Error(h.fact);};a.prototype.readBextChunk_=function(a){if(a=this.findChunk(a,
"bext"))this.bextChunkId="bext",this.bextChunkSize=a.chunkSize,this.bextChunkData=a.chunkData,this.readBextChunkFields_()};a.prototype.readBextChunkFields_=function(){this.head_=0;this.bextChunkFields={description:this.readVariableSizeString_(this.bextChunkData,256),originator:this.readVariableSizeString_(this.bextChunkData,32),originatorReference:this.readVariableSizeString_(this.bextChunkData,32),originationDate:this.readVariableSizeString_(this.bextChunkData,10),originationTime:this.readVariableSizeString_(this.bextChunkData,
8),timeReference:this.readBytes(this.bextChunkData,8),version:this.readFromChunk_(this.bextChunkData,c),UMID:this.readVariableSizeString_(this.bextChunkData,64),loudnessValue:this.readFromChunk_(this.bextChunkData,c),loudnessRange:this.readFromChunk_(this.bextChunkData,c),maxTruePeakLevel:this.readFromChunk_(this.bextChunkData,c),maxMomentaryLoudness:this.readFromChunk_(this.bextChunkData,c),maxShortTermLoudness:this.readFromChunk_(this.bextChunkData,c),reserved:this.readVariableSizeString_(this.bextChunkData,
180),codingHistory:this.readVariableSizeString_(this.bextChunkData,this.bextChunkData.length-602)}};a.prototype.readBytes=function(a,c){var d=this.head_;this.head_+=c;return a.slice(d,this.head_)};a.prototype.readVariableSizeString_=function(a,c){for(var d="",b=0;b<c;b++)d+=e.unpack([a[this.head_]],m),this.head_++;return d};a.prototype.readFromChunk_=function(a,c){var d=c.bits/8;a=e.unpack(a.slice(this.head_,this.head_+d),c);this.head_+=d;return a};a.prototype.writeVariableSizeString_=function(a,
c){a=e.packArray(a,m);for(var d=a.length;d<c;d++)a.push(0);return a};a.prototype.readCueChunk_=function(a){if(a=this.findChunk(a,"cue "))this.cueChunkId="cue ",this.cueChunkSize=a.chunkSize,this.cueChunkData=a.chunkData};a.prototype.readDataChunk_=function(a,c){if(a=this.findChunk(a,"data"))this.dataChunkId="data",this.dataChunkSize=a.chunkSize,this.samplesFromBytes_(a.chunkData,c);else throw Error(h.data);};a.prototype.samplesFromBytes_=function(a,c){c.bits=4==this.bitsPerSample?8:this.bitsPerSample;
c.signed=8==c.bits?!1:!0;c.float=3==this.audioFormat||64==this.bitsPerSample?!0:!1;c.single=!1;this.samples=e.unpackArray(a,new e.Type(c))};a.prototype.findChunk=function(a,c){for(var d=0;d<a.length;d++)if(a[d].chunkId==c)return a[d];return null};a.prototype.samplesToBytes_=function(a){a.bits=4==this.bitsPerSample?8:this.bitsPerSample;a.signed=8==a.bits?!1:!0;a.float=3==this.audioFormat||64==this.bitsPerSample?!0:!1;a=e.packArray(this.samples,new e.Type(a));a.length%2&&a.push(0);return a};a.prototype.getBextBytes_=
function(){if(this.bextChunkId){var a=[].concat(this.writeVariableSizeString_(this.bextChunkFields.description,256));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originator,32));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originatorReference,32));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originationDate,10));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originationTime,8));a=a.concat(this.bextChunkFields.timeReference);a=a.concat(e.pack(this.bextChunkFields.version,
c));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.UMID,64));a=a.concat(e.pack(this.bextChunkFields.loudnessValue,c));a=a.concat(e.pack(this.bextChunkFields.loudnessRange,c));a=a.concat(e.pack(this.bextChunkFields.maxTruePeakLevel,c));a=a.concat(e.pack(this.bextChunkFields.maxMomentaryLoudness,c));a=a.concat(e.pack(this.bextChunkFields.maxShortTermLoudness,c));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.reserved,180));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.codingHistory,
this.bextChunkData.length-602));return[].concat(e.packArray(this.bextChunkId,m),e.pack(a.length,l),a)}return[]};a.prototype.getCueBytes_=function(){return this.cueChunkId?[].concat(e.packArray(this.cueChunkId,m),e.pack(this.cueChunkSize,l),this.cueChunkData):[]};a.prototype.getFactBytes_=function(){return this.factChunkId?[].concat(e.packArray(this.factChunkId,m),e.pack(this.factChunkSize,l),e.pack(this.dwSampleLength,l)):[]};a.prototype.getCbSizeBytes_=function(){return 16<this.fmtChunkSize?e.pack(this.cbSize,
c):[]};a.prototype.getValidBitsPerSampleBytes_=function(){return 18<this.fmtChunkSize?e.pack(this.validBitsPerSample,c):[]};a.prototype.createWaveFile_=function(){var a={be:this.LEorBE()};return e.packArray(this.chunkId,m).concat(e.pack(this.chunkSize,l),e.packArray(this.format,m),this.getBextBytes_(),e.packArray(this.fmtChunkId,m),e.pack(this.fmtChunkSize,l),e.pack(this.audioFormat,c),e.pack(this.numChannels,c),e.pack(this.sampleRate,l),e.pack(this.byteRate,l),e.pack(this.blockAlign,c),e.pack(this.bitsPerSample,
c),this.getCbSizeBytes_(),this.getValidBitsPerSampleBytes_(),this.getFactBytes_(),e.packArray(this.dataChunkId,m),e.pack(this.dataChunkSize,l),this.samplesToBytes_(a),this.getCueBytes_())};b.exports=a},function(b,a){b.exports=function(){this.chunkId="";this.chunkSize=0;this.fmtChunkId=this.format="";this.validBitsPerSample=this.cbSize=this.bitsPerSample=this.blockAlign=this.byteRate=this.sampleRate=this.numChannels=this.audioFormat=this.fmtChunkSize=0;this.factChunkId="";this.factChunkSize=0;this.factChunkData=
[];this.dwSampleLength=0;this.cueChunkId="";this.cueChunkSize=-1;this.cueChunkData=[];this.dataChunkId="";this.dataChunkSize=0;this.bextChunkId="";this.bextChunkSize=0;this.bextChunkData=[];this.bextChunkFields={description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:"",version:"",UMID:"",loudnessValue:"",loudnessRange:"",maxTruePeakLevel:"",maxMomentaryLoudness:"",maxShortTermLoudness:"",reserved:"",codingHistory:""}}},function(b,a,k){function e(a,
c){(void 0===c?0:c)||(m.be="RIFX"==a.chunkId);c=l.packArray(a.chunkId,g).concat(l.pack(a.chunkSize,m),l.packArray(a.format,g),h(a.subChunks,m.be));if("RIFF"==a.chunkId||"RIFX"==a.chunkId)c=new Uint8Array(c);return c}function h(a,c){for(var b=[],d=0;d<a.length;)b="LIST"==a[d].chunkId?b.concat(e(a[d],c)):b.concat(l.packArray(a[d].chunkId,g),l.pack(a[d].chunkSize,m),a[d].chunkData),d++;return b}function f(a){for(var b=[],d=12;d<a.length;)b.push(c(a,d)),d+=8+b[b.length-1].chunkSize;return b}function c(a,
c){var b={chunkId:l.unpackArray(a.slice(c,c+4),g),chunkSize:l.unpack(a.slice(c+4,c+8),m)};"LIST"==b.chunkId?(b.format=l.unpackArray(a.slice(8,12),g),b.subChunks=f(a.slice(c,c+b.chunkSize))):b.chunkData=a.slice(c+8,c+8+b.chunkSize);return b}var l=k(13),m=l.uInt32,g=l.chr;b.exports.read=function(a){a=[].slice.call(a);var c=l.unpackArray(a.slice(0,4),g);m.be="RIFX"==c;return{chunkId:c,chunkSize:l.unpack(a.slice(4,8),m),format:l.unpackArray(a.slice(8,12),g),subChunks:f(a)}};b.exports.write=e},function(b,
a,k){function e(a,c,b){b=void 0===b?10:b;var d=[];c.char?d=c.char?a.slice(0,c.realBits/8):a:Array.isArray(a)||(d=[a]);return f.toBytes(d,f.getType(c,b))}function h(a,c,b){b=void 0===b?10:b;a=f.fromBytes(a.slice(0,8>c.bits?c.bits:c.realBits/8),f.getType(c,b));return a=c.char?a.slice(0,c.bits/8):a[0]}var f=k(14),c=k(4);a.pack=e;a.unpack=h;a.packArray=function(a,c,b){return f.toBytes(a,f.getType(c,void 0===b?10:b))};a.unpackArray=function(a,c,b){return f.fromBytes(a,f.getType(c,void 0===b?10:b))};a.unpackStruct=
function(a,c,b){b=void 0===b?10:b;for(var d=a.length,g=0,f=0;f<c.length;f++)g+=c[f].realBits/8;if(d<g)return[];d=[];for(f=g=0;g<c.length;){var e=8>c[g].bits?1:c[g].realBits/8;d=d.concat(h(a.slice(f,f+e),c[g],b));f+=e;g++}return d};a.packStruct=function(a,c,b){b=void 0===b?10:b;if(a.length<c.length)return[];for(var d=[],g=0;g<c.length;g++)d=d.concat(e(a[g],c[g],b));return d};a.findString=function(a,b){for(var g,d=0;d<a.length;d++)if(g=h(a.slice(d,d+b.length+1),new c({bits:8*b.length,"char":!0})),g==
b)return d;return-1};a.Type=c;a.chr=new c({bits:8,"char":!0});a.fourCC=new c({bits:32,"char":!0});a.bool=new c({bits:1});a.int2=new c({bits:2,signed:!0});a.uInt2=new c({bits:2});a.int4=new c({bits:4,signed:!0});a.uInt4=new c({bits:4});a.int8=new c({bits:8,signed:!0});a.uInt8=new c({bits:8});a.int16=new c({bits:16,signed:!0});a.uInt16=new c({bits:16});a.float16=new c({bits:16,"float":!0});a.int24=new c({bits:24,signed:!0});a.uInt24=new c({bits:24});a.int32=new c({bits:32,signed:!0});a.uInt32=new c({bits:32});
a.float32=new c({bits:32,"float":!0});a.int40=new c({bits:40,signed:!0});a.uInt40=new c({bits:40});a.int48=new c({bits:48,signed:!0});a.uInt48=new c({bits:48});a.float64=new c({bits:64,"float":!0});a.int16BE=new c({bits:16,signed:!0,be:!0});a.uInt16BE=new c({bits:16,be:!0});a.float16BE=new c({bits:16,"float":!0,be:!0});a.int24BE=new c({bits:24,signed:!0,be:!0});a.uInt24BE=new c({bits:24,be:!0});a.int32BE=new c({bits:32,signed:!0,be:!0});a.uInt32BE=new c({bits:32,be:!0});a.float32BE=new c({bits:32,
"float":!0,be:!0});a.int40BE=new c({bits:40,signed:!0,be:!0});a.uInt40BE=new c({bits:40,be:!0});a.int48BE=new c({bits:48,signed:!0,be:!0});a.uInt48BE=new c({bits:48,be:!0});a.float64BE=new c({bits:64,"float":!0,be:!0})},function(b,a,k){var e=k(4),h=k(2);a.getType=function(a,c){a=Object.assign(new e({}),a);a.base=c;return a};a.toBytes=function(a,c){for(var b=0,e=0,g=a.length,d=[];b<g;)e=c.writer(d,c.overflow(a[b]),e),b++;c.be&&h(d,c.offset);if(10!=c.base){a=c.base;b=0;for(e=d.length;b<e;)d[b]=d[b].toString(a),
b++;a=0;b=d.length;for(c=8>c.realBits?(2==c.base?c.bits:5>c.bits?1:2)+1:(2==c.base?8:2)+1;a<b;)d[a]=Array(c-d[a].length).join("0")+d[a],a++}return d};a.fromBytes=function(a,c){c.be&&h(a,c.offset);if(10!=c.base)for(var b=c.base,e=0,g=a.length;e<g;)a[e]=parseInt(a[e],b),e++;b=[];e=0;for(g=a.length-(c.offset-1);e<g;)b.push(c.overflow(c.sign(c.reader(a,e,c)))),e+=c.offset;c.char&&(b=b.join(""));return b}},function(b,a){function k(a,c,b){--b;for(var d="";0<=b;){var g=a[b+c].toString(2);d+=Array(9-g.length).join("0")+
g;b--}return parseInt(d,2)}var e=new Float32Array(1),h=new Int32Array(e.buffer),f=new Float64Array(1),c=new Uint32Array(f.buffer),l={read8Bit:function(a,c){return a[c]},read16Bit:function(a,c){return a[1+c]<<8|a[c]},read16BitFloat:function(a,c){var b=parseInt;a=[a[c],a[c+1]];c="";for(var d=0,g=a.length;d<g;){var e=a[d].toString(2);c=Array(9-e.length).join("0")+e+c;d++}b=b(c,2);a=(b&31744)>>10;c=b&1023;return(a?Math.pow(2,a-15)*(1+c/1024):c/1024*.00006103515625)*(b>>15?-1:1)},read24Bit:function(a,
c){return a[2+c]<<16|l.read16Bit(a,c)},read32Bit:function(a,c){return(a[3+c]<<24|l.read24Bit(a,c))>>>0},read32BitFloat:function(a,c){h[0]=l.read32Bit(a,c);return e[0]},read40Bit:function(a,c){return k(a,c,5)},read48Bit:function(a,c){return k(a,c,6)},read53Bit:function(a,c){return k(a,c,7)},read64BitFloat:function(a,b){c[0]=l.read32Bit(a,b);c[1]=l.read32Bit(a,b+4);return f[0]},readChar:function(a,c,b){var d="",e=0;for(b=b.bits/8;e<b;)d+=String.fromCharCode(a[c+e]),e++;return d}},m={write64BitFloat:function(a,
b,e){f[0]=b;e=m.write32Bit(a,c[0],e);return m.write32Bit(a,c[1],e)},write53Bit:function(a,c,b){b=m.write48Bit(a,c,b);a[b++]=Math.floor(c/Math.pow(2,48))&255;return b},write48Bit:function(a,c,b){b=m.write40Bit(a,c,b);a[b++]=Math.floor(c/Math.pow(2,40))&255;return b},write40Bit:function(a,c,b){b=m.write32Bit(a,c,b);a[b++]=Math.floor(c/Math.pow(2,32))&255;return b},write32BitFloat:function(a,c,b){e[0]=c;return b=m.write32Bit(a,h[0],b)},write32Bit:function(a,c,b){b=m.write24Bit(a,c,b);a[b++]=c>>>24&255;
return b},write24Bit:function(a,c,b){b=m.write16Bit(a,c,b);a[b++]=c>>>16&255;return b},write16Bit:function(a,c,b){a[b++]=c&255;a[b++]=c>>>8&255;return b},write16BitFloat:function(a,c,b){e[0]=c;var d=h[0];c=d>>16&32768;var f=d>>12&2047;d=d>>23&255;103<=d&&(c=(c|d-112<<10|f>>1)+(f&1));a[b]=c&255;a[b+1]=c>>>8&255;return b+2},write8Bit:function(a,c,b){a[b++]=c&255;return b},write4Bit:function(a,c,b){a[b++]=c&15;return b},write2Bit:function(a,c,b){a[b++]=0>c?c+4:c;return b},write1Bit:function(a,c,b){a[b++]=
c?1:0;return b},writeString:function(a,c,b){a[b++]=c.charCodeAt(0);return b}};a.BitWriter=m;a.BitReader=l},function(b,a,k){function e(a){a-=n;if(0<=a)var c=0;else c=8,a=-a;var b=d[r],e=b>>3;a>b&&(c|=4,a-=b,e+=b);b>>=1;a>b&&(c|=2,a-=b,e+=b);b>>=1;a>b&&(c|=1,e+=b);n=c&8?n-e:n+e;-32768>n?n=-32768:32767<n&&(n=32767);r+=g[c&7];0>r?r=0:88<r&&(r=88);return c}function h(a){var c=0;a&4&&(c+=t);a&2&&(c+=t>>1);a&1&&(c+=t>>2);c+=t>>3;a&8&&(c=-c);p+=c;32767<p?p=32767:-32767>p&&(p=-32767);q+=g[a];0>q?q=0:88<q&&
(q=88);t=d[q];return p}function f(a){var c=a[0];e(c);var b=[];b.push(l.pack(c,m)[0]);b.push(l.pack(c,m)[1]);b.push(r);b.push(0);for(c=3;c<a.length;c+=2){var d=e(a[c]),h=e(a[c+1]);b.push(h<<4|d)}for(;256>b.length;)b.push(0);return b}function c(a){p=l.unpack([a[0],a[1]],m);q=a[2];t=d[q];for(var c=[p,l.unpack([a[2],a[3]],m)],b=4;b<a.length;b++){var e=a[b],f=e>>4;c.push(h(f<<4^e));c.push(h(f))}return c}var l=k(0),m=l.int16,g=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],d=[7,8,9,10,11,12,13,14,16,17,19,21,
23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],n=0,r=0,p=0,q=0,t=7;b.exports.encode=function(a){for(var c=[],b=[],d=0;d<a.length;d++)if(b.push(a[d]),0==d%505&&0!=d||d==a.length-1)c=c.concat(f(b)),b=[];return c};
b.exports.decode=function(a,b){b=void 0===b?256:b;for(var d=[],e=[],h=0;h<a.length;h++)0==h%b&&0!=h&&(d=d.concat(c(e)),e=[]),e.push(a[h]);return d};b.exports.encodeBlock=f;b.exports.decodeBlock=c},function(b,a){function k(a){var b=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],c;a=-32768==
a?-32767:a;(c=~a>>8&128)||(a*=-1);32635<a&&(a=32635);256<=a?(b=b[a>>8&127],a=b<<4|a>>b+3&15):a>>=4;return a^c^85}function e(a){var b=0;a^=85;a&128&&(a&=-129,b=-1);var c=((a&240)>>4)+4;a=4!=c?1<<c|(a&15)<<c-4|1<<c-5:a<<1|1;return-8*(0==b?a:-a)}b.exports.encodeSample=k;b.exports.decodeSample=e;b.exports.encode=function(a){for(var b=[],c=0;c<a.length;c++)b.push(k(a[c]));return b};b.exports.decode=function(a){for(var b=[],c=0;c<a.length;c++)b.push(e(a[c]));return b}},function(b,a){function k(a){if(0>
a){a=132-a;var b=127}else a+=132,b=255;32767<a&&(a=32767);var c=0;var e=a>>7;e&240&&(e>>=4,c+=4);e&12&&(e>>=2,c+=2);e&2&&(c+=1);e=c;return(e<<4|a>>e+3&15)^b}function e(a){a=~a;var b=((a&15)<<3)+132<<((a&112)>>4);return a&128?132-b:b-132}b.exports.encodeSample=k;b.exports.decodeSample=e;b.exports.encode=function(a){for(var b=[],c=0;c<a.length;c++)b.push(k(a[c]));return b};b.exports.decode=function(a){for(var b=[],c=0;c<a.length;c++)b.push(e(a[c]));return b}}]);
