/*
 wavefile
 Read & write wave files with 4, 8, 11, 12, 16, 20, 24, 32 & 64-bit data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/wavefile

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,g){b!=Array.prototype&&b!=Object.prototype&&(b[e]=g.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,e,g,k){if(e){g=$jscomp.global;b=b.split(".");for(k=0;k<b.length-1;k++){var a=b[k];a in g||(g[a]={});g=g[a]}b=b[b.length-1];k=g[b];e=e(k);e!=k&&null!=e&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Object.is",function(b){return b?b:function(e,b){return e===b?0!==e||1/e===1/b:e!==e&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(e,b){var g=this;g instanceof String&&(g=String(g));var a=g.length;for(b=b||0;b<a;b++)if(g[b]==e||Object.is(g[b],e))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(b,e,g){if(null==b)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return b+""};
(function(b){function e(k){if(g[k])return g[k].exports;var a=g[k]={i:k,l:!1,exports:{}};b[k].call(a.exports,a,a.exports,e);a.l=!0;return a.exports}var g={};e.m=b;e.c=g;e.d=function(b,a,g){e.o(b,a)||Object.defineProperty(b,a,{configurable:!1,enumerable:!0,get:g})};e.n=function(b){var a=b&&b.__esModule?function(){return b["default"]}:function(){return b};e.d(a,"a",a);return a};e.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};e.p="";return e(e.s=1)})([function(b,e,g){function k(d,
c,f){c.be&&z(d,c.offset);var a=d.length;if(10!=f)for(var b=0;b<a;b++)d[b]=parseInt(d[b],f);f=[];a-=c.offset-1;for(b=0;b<a;b+=c.offset)f.push(u(d,b));return f}function a(d,c,f){for(var b=0,a=[],e=d.length,w=0;w<e;w++)b=v(a,d[w],b);c.be&&z(a,c.offset);if(10!=f)for(d=(2==f?8:2)+1,e=a.length,c=0;c<e;c++)a[c]=a[c].toString(f),a[c]=Array(d-a[c].length).join("0")+a[c];return a}function p(d,c){return r.read(d,c)}function n(d,c){d=r.read(d,c);c=(d&31744)>>10;var f=d&1023;return(c?Math.pow(2,c-15)*(1+f/1024):
f/1024*.00006103515625)*(d>>15?-1:1)}function c(d,c){t[0]=r.read(d,c);return y[0]}function m(d,c){t[0]=r.read(d,c);t[1]=r.read(d,c+4);return A[0]}function h(d,c){for(var f="",a=0;a<r.offset;a++)f+=String.fromCharCode(d[c+a]);return f}function f(d,c,f){return r.write(d,c,f)}function l(d,c,f){y[0]=c;var a=t[0];c=a>>16&32768;var b=a>>12&2047;a=a>>23&255;103<=a&&(c=(c|a-112<<10|b>>1)+(b&1));d[f++]=c&255;d[f++]=c>>>8&255;return f}function q(d,c,f){y[0]=c;return r.write(d,t[0],f)}function d(d,c,f){A[0]=
c;f=r.write(d,t[0],f);return r.write(d,t[1],f)}function w(d,c,f){for(var a=0;a<c.length;a++)d[f++]=c.charCodeAt(a);return f}function x(a){if(!a)throw Error("Undefined type.");if(a["float"]){if(-1==[16,32,64].indexOf(a.bits))throw Error("Not a supported float type.");}else if(a["char"]){if(8>a.bits||a.bits%2)throw Error("Wrong offset for type char.");}else if(1>a.bits||53<a.bits)throw Error("Not a supported type.");a.offset=8>a.bits?1:Math.ceil(a.bits/8);a["float"]?16==a.bits?u=n:32==a.bits?u=c:64==
a.bits&&(u=m):u=a["char"]?h:p;a["float"]?16==a.bits?v=l:32==a.bits?v=q:64==a.bits&&(v=d):v=a["char"]?w:f;a["char"]?r.offset=8>a.bits?1:Math.ceil(a.bits/8):r=new C(64==a.bits?32:a.bits,a["float"]?!1:a.signed)}function B(d,a){d.constructor==String&&(d=d.length>=a.offset?d.slice(0,a.offset):"");return d}var z=g(5),C=g(6);e=new Int8Array(8);var t=new Uint32Array(e.buffer),y=new Float32Array(e.buffer),A=new Float64Array(e.buffer),u,v,r={};b.exports.chr={bits:8,"char":!0};b.exports.fourCC={bits:32,"char":!0};
b.exports.bool={bits:1};b.exports.int2={bits:2,signed:!0};b.exports.uInt2={bits:2};b.exports.int4={bits:4,signed:!0};b.exports.uInt4={bits:4};b.exports.int8={bits:8,signed:!0};b.exports.uInt8={bits:8};b.exports.int16={bits:16,signed:!0};b.exports.uInt16={bits:16};b.exports.float16={bits:16,"float":!0};b.exports.int24={bits:24,signed:!0};b.exports.uInt24={bits:24};b.exports.int32={bits:32,signed:!0};b.exports.uInt32={bits:32};b.exports.float32={bits:32,"float":!0};b.exports.int40={bits:40,signed:!0};
b.exports.uInt40={bits:40};b.exports.int48={bits:48,signed:!0};b.exports.uInt48={bits:48};b.exports.float64={bits:64,"float":!0};b.exports.int16BE={bits:16,signed:!0,be:!0};b.exports.uInt16BE={bits:16,be:!0};b.exports.float16BE={bits:16,"float":!0,be:!0};b.exports.int24BE={bits:24,signed:!0,be:!0};b.exports.uInt24BE={bits:24,be:!0};b.exports.int32BE={bits:32,signed:!0,be:!0};b.exports.uInt32BE={bits:32,be:!0};b.exports.float32BE={bits:32,"float":!0,be:!0};b.exports.int40BE={bits:40,signed:!0,be:!0};
b.exports.uInt40BE={bits:40,be:!0};b.exports.int48BE={bits:48,signed:!0,be:!0};b.exports.uInt48BE={bits:48,be:!0};b.exports.float64BE={bits:64,"float":!0,be:!0};b.exports.pack=function(d,c,f){f=void 0===f?10:f;x(c);var b=[];if(void 0===d)return b;d=B(d,c);return a([d],c,f)};b.exports.unpack=function(d,a,c){c=void 0===c?10:c;x(a);return(d=k(d.slice(0,a.offset),a,c))?d[0]:a["char"]?"":null};b.exports.packArray=function(d,c,f){f=void 0===f?10:f;x(c);if(c["char"])for(var b=d.length,e=0;e<b;e++)d[e]=B(d[e],
c);return a(d,c,f)};b.exports.unpackArray=function(d,c,a){a=void 0===a?10:a;x(c);return k(d,c,a)}},function(b,e,g){b=g(2);window.WaveFile=b},function(b,e,g){var k=g(3),a=g(4),p=g(7),n=g(8),c=g(0),m=g(11).encode,h={bits:16},f={bits:32},l={bits:32,"char":!0},q={bits:8,"char":!0};e=function(d){this.container="";this.chunkSize=0;this.format="";this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,
subformat:[]};this.fact={chunkId:"",chunkSize:0,dwSampleLength:0};this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]};this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""};this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,
originationTime:0,sampleCountHigh:0,sampleCountLow:0,tableLength:0,table:[]};this.data={chunkId:"",chunkSize:0,samples:[]};this.isInterleaved=!0;this.bitDepth="0";this.audioFormats_={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,40:65534,48:65534,64:3};this.head_=0;this.enforceFact_=!1;d&&this.fromBuffer(d)};e.prototype.fromScratch=function(d,a,c,f,b){b=void 0===b?{}:b;b.container||(b.container="RIFF");var e=((parseInt(c,10)-1|7)+1)/8;this.clearHeader_();this.bitDepth=c;this.container=b.container;
this.chunkSize=36+f.length*e;this.format="WAVE";this.fmt.chunkId="fmt ";this.fmt.chunkSize=16;this.fmt.byteRate=d*e*a;this.fmt.blockAlign=d*e;this.fmt.audioFormat=this.audioFormats_[c]?this.audioFormats_[c]:65534;this.fmt.numChannels=d;this.fmt.sampleRate=a;this.fmt.bitsPerSample=parseInt(c,10);this.data.chunkId="data";this.data.samples=f;0<f.length&&f[0].constructor===Array&&(this.isInterleaved=!1,this.interleave());this.data.chunkSize=f.length*e;"4"==c&&(this.chunkSize=44+f.length,this.fmt.chunkSize=
20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact.chunkId="fact",this.fact.chunkSize=4,this.fact.dwSampleLength=2*f.length,this.data.chunkSize=f.length);if("8a"==c||"8m"==c)this.chunkSize=44+f.length,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact.chunkId="fact",this.fact.chunkSize=4,this.fact.dwSampleLength=f.length;65534==this.fmt.audioFormat&&(this.chunkSize=60+f.length*e,this.fmt.chunkSize=
40,this.fmt.bitsPerSample=(parseInt(c,10)-1|7)+1,this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(c,10),this.fmt.dwChannelMask=0,this.fmt.subformat=[1,1048576,2852126848,1905997824]);this.checkWriteInput_()};e.prototype.fromBuffer=function(d){this.readRIFFChunk_(d);var c="RIFX"==this.container;d=a.read(d,c);this.readDs64Chunk_(d.subChunks);this.readFmtChunk_(d.subChunks);this.readFactChunk_(d.subChunks);this.readBextChunk_(d.subChunks);this.readCueChunk_(d.subChunks);this.readDataChunk_(d.subChunks,
{be:c});this.bitDepthFromFmt_()};e.prototype.toBuffer=function(){this.checkWriteInput_();this.assureInterleaved_();return this.createWaveFile_()};e.prototype.toBase64=function(){return m(this.toBuffer())};e.prototype.toDataURI=function(){return"data:audio/wav;base64,"+this.toBase64()};e.prototype.toRIFF=function(){"RF64"==this.container?this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,this.data.samples):(this.container="RIFF",this.LEorBE_())};e.prototype.toRIFX=function(){"RF64"==
this.container?this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,this.data.samples,{container:"RIFX"}):(this.container="RIFX",this.LEorBE_())};e.prototype.toBitDepth=function(d,c){var a=d,f=this.bitDepth;void 0===c||c||(a=this.realBitDepth_(d),f=this.realBitDepth_(this.bitDepth));this.assureInterleaved_();k.toBitDepth(this.data.samples,f,a);this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,d,this.data.samples,{container:this.correctContainer_()})};e.prototype.interleave=
function(){if(!this.isInterleaved){for(var d=[],c=this.data.samples[0].length,a=0;a<c;a++)for(var f=0;f<this.data.samples.length;f++)d.push(this.data.samples[f][a]);this.data.samples=d;this.isInterleaved=!0}};e.prototype.deInterleave=function(){if(this.isInterleaved){var d=[],c;for(c=0;c<this.fmt.numChannels;c++)d[c]=[];c=0;for(var a;c<this.data.samples.length;){for(a=0;a<this.fmt.numChannels;a++)d[a].push(this.data.samples[c+a]);c+=a}this.data.samples=d;this.isInterleaved=!1}};e.prototype.toIMAADPCM=
function(){if(8E3!=this.fmt.sampleRate)throw Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!=this.fmt.numChannels)throw Error("Only mono files can be compressed as IMA-ADPCM.");this.assure16Bit_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"4",p.encode(this.data.samples),{container:this.correctContainer_()})};e.prototype.fromIMAADPCM=function(d){d=void 0===d?"16":d;this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",p.decode(this.data.samples,this.fmt.blockAlign),
{container:this.correctContainer_()});this.toBitDepth(d)};e.prototype.toALaw=function(){this.assure16Bit_();this.assureInterleaved_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"8a",n.alaw.encode(this.data.samples),{container:this.correctContainer_()})};e.prototype.fromALaw=function(d){d=void 0===d?"16":d;this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",n.alaw.decode(this.data.samples),{container:this.correctContainer_()});this.toBitDepth(d)};e.prototype.toMuLaw=function(){this.assure16Bit_();
this.assureInterleaved_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"8m",n.mulaw.encode(this.data.samples),{container:this.correctContainer_()})};e.prototype.fromMuLaw=function(d){d=void 0===d?"16":d;this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",n.mulaw.decode(this.data.samples),{container:this.correctContainer_()});this.toBitDepth(d)};e.prototype.realBitDepth_=function(d){"32f"!=d&&(d=((parseInt(d,10)-1|7)+1).toString());return d};e.prototype.checkWriteInput_=function(){this.validateBitDepth_();
this.validateNumChannels_();this.validateSampleRate_()};e.prototype.validateBitDepth_=function(){if(!this.audioFormats_[this.bitDepth]){if(8<parseInt(this.bitDepth,10)&&54>parseInt(this.bitDepth,10))return!0;throw Error("Invalid bit depth.");}return!0};e.prototype.validateNumChannels_=function(){var d=this.fmt.numChannels*this.fmt.bitsPerSample/8;if(1>this.fmt.numChannels||65535<d)throw Error("Invalid number of channels.");return!0};e.prototype.validateSampleRate_=function(){var d=this.fmt.bitsPerSample/
8*this.fmt.numChannels*this.fmt.sampleRate;if(1>this.fmt.sampleRate||4294967295<d)throw Error("Invalid sample rate.");return!0};e.prototype.clearHeader_=function(){this.fmt.cbSize=0;this.fmt.validBitsPerSample=0;this.fact.chunkId="";this.ds64.chunkId=""};e.prototype.assure16Bit_=function(){this.assureUncompressed_();"16"!=this.bitDepth&&this.toBitDepth("16")};e.prototype.assureUncompressed_=function(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()};
e.prototype.assureInterleaved_=function(){this.isInterleaved||this.interleave()};e.prototype.LEorBE_=function(){var d="RIFX"===this.container;h.be=d;return f.be=d};e.prototype.findChunk_=function(d,c){for(var a=0;a<d.length;a++)if(d[a].chunkId==c)return d[a];return null};e.prototype.readRIFFChunk_=function(d){this.container=c.unpack(d.slice(0,4),l);if(-1===["RIFF","RIFX","RF64"].indexOf(this.container))throw Error("Not a supported format.");this.LEorBE_();this.chunkSize=c.unpack(d.slice(4,8),f);this.format=
c.unpack(d.slice(8,12),l);if("WAVE"!=this.format)throw Error("Could not find the 'WAVE' format identifier");};e.prototype.readFmtChunk_=function(d){if(d=this.findChunk_(d,"fmt ")){var a=d.chunkData;this.fmt.chunkId="fmt ";this.fmt.chunkSize=d.chunkSize;this.fmt.audioFormat=c.unpack(a.slice(0,2),h);this.fmt.numChannels=c.unpack(a.slice(2,4),h);this.fmt.sampleRate=c.unpack(a.slice(4,8),f);this.fmt.byteRate=c.unpack(a.slice(8,12),f);this.fmt.blockAlign=c.unpack(a.slice(12,14),h);this.fmt.bitsPerSample=
c.unpack(a.slice(14,16),h);this.readFmtExtension_(d)}else throw Error("Could not find the 'fmt ' chunk");};e.prototype.readFmtExtension_=function(d){d=d.chunkData;16<this.fmt.chunkSize&&(this.fmt.cbSize=c.unpack(d.slice(16,18),h),18<this.fmt.chunkSize&&(this.fmt.validBitsPerSample=c.unpack(d.slice(18,20),h),20<this.fmt.chunkSize&&(this.fmt.dwChannelMask=c.unpack(d.slice(20,24),f),this.fmt.subformat=[c.unpack(d.slice(24,28),f),c.unpack(d.slice(28,32),f),c.unpack(d.slice(32,36),f),c.unpack(d.slice(36,
40),f)])))};e.prototype.readFactChunk_=function(d){if(d=this.findChunk_(d,"fact"))this.fact.chunkId="fact",this.fact.chunkSize=d.chunkSize,this.fact.dwSampleLength=c.unpack(d.chunkData.slice(0,4),f);else if(this.enforceFact_)throw Error("Could not find the 'fact' chunk");};e.prototype.readCueChunk_=function(d){var a=this.findChunk_(d,"cue ");if(a)for(d=a.chunkData,this.cue.chunkId="cue ",this.cue.chunkSize=a.chunkSize,this.cue.dwCuePoints=c.unpack(d.slice(0,4),f),a=0;a<this.cue.dwCuePoints;a++){var b=
4+24*a;this.cue.points.push({dwName:c.unpack(d.slice(b,b+4),f),dwPosition:c.unpack(d.slice(b+4,b+8),f),fccChunk:c.unpack(d.slice(b+8,b+12),l),dwChunkStart:c.unpack(d.slice(b+12,b+16),f),dwBlockStart:c.unpack(d.slice(b+16,b+20),f),dwSampleOffset:c.unpack(d.slice(b+20,b+24),f)})}};e.prototype.readDataChunk_=function(d,a){if(d=this.findChunk_(d,"data"))this.data.chunkId="data",this.data.chunkSize=d.chunkSize,this.samplesFromBytes_(d.chunkData,a);else throw Error("Could not find the 'data' chunk");};
e.prototype.readBextChunk_=function(d){if(d=this.findChunk_(d,"bext"))this.head_=0,d=d.chunkData,this.bext={chunkId:"bext",chunkSize:d.length,description:this.readString_(d,256),originator:this.readString_(d,32),originatorReference:this.readString_(d,32),originationDate:this.readString_(d,10),originationTime:this.readString_(d,8),timeReference:[this.readFromChunk_(d,f),this.readFromChunk_(d,f)],version:this.readFromChunk_(d,h),UMID:this.readString_(d,64),loudnessValue:this.readFromChunk_(d,h),loudnessRange:this.readFromChunk_(d,
h),maxTruePeakLevel:this.readFromChunk_(d,h),maxMomentaryLoudness:this.readFromChunk_(d,h),maxShortTermLoudness:this.readFromChunk_(d,h),reserved:this.readString_(d,180),codingHistory:this.readString_(d,d.length-602)}};e.prototype.readDs64Chunk_=function(d){if(d=this.findChunk_(d,"ds64")){var a=d.chunkData;this.ds64.chunkId=d.chunkId;this.ds64.chunkSize=d.chunkSize;this.ds64.riffSizeHigh=c.unpack(a.slice(0,4),f);this.ds64.riffSizeLow=c.unpack(a.slice(4,8),f);this.ds64.dataSizeHigh=c.unpack(a.slice(8,
12),f);this.ds64.dataSizeLow=c.unpack(a.slice(12,16),f);this.ds64.originationTime=c.unpack(a.slice(16,20),f);this.ds64.sampleCountHigh=c.unpack(a.slice(20,24),f);this.ds64.sampleCountLow=c.unpack(a.slice(24,28),f)}else if("RF64"==this.container)throw Error("Could not find the 'ds64' chunk");};e.prototype.readString_=function(d,a){for(var f="",b=0;b<a;b++)f+=c.unpack([d[this.head_]],q),this.head_++;return f};e.prototype.readFromChunk_=function(d,a){var f=a.bits/8;d=c.unpack(d.slice(this.head_,this.head_+
f),a);this.head_+=f;return d};e.prototype.writeString_=function(d,a){d=c.packArray(d,q);for(var f=d.length;f<a;f++)d.push(0);return d};e.prototype.samplesToBytes_=function(a){a.bits=4==this.fmt.bitsPerSample?8:this.fmt.bitsPerSample;a.signed=8==a.bits?!1:!0;a["float"]=3==this.fmt.audioFormat||64==this.fmt.bitsPerSample?!0:!1;a=c.packArray(this.data.samples,a);a.length%2&&a.push(0);return a};e.prototype.samplesFromBytes_=function(a,f){f.bits=4==this.fmt.bitsPerSample?8:this.fmt.bitsPerSample;f.signed=
8==f.bits?!1:!0;f["float"]=3==this.fmt.audioFormat||64==this.fmt.bitsPerSample?!0:!1;this.data.samples=c.unpackArray(a,f)};e.prototype.getBextBytes_=function(){return this.bext.chunkId?[].concat(c.pack(this.bext.chunkId,l),c.pack(this.bext.chunkSize,f),this.writeString_(this.bext.description,256),this.writeString_(this.bext.originator,32),this.writeString_(this.bext.originatorReference,32),this.writeString_(this.bext.originationDate,10),this.writeString_(this.bext.originationTime,8),c.pack(this.bext.timeReference[0],
f),c.pack(this.bext.timeReference[1],f),c.pack(this.bext.version,h),this.writeString_(this.bext.UMID,64),c.pack(this.bext.loudnessValue,h),c.pack(this.bext.loudnessRange,h),c.pack(this.bext.maxTruePeakLevel,h),c.pack(this.bext.maxMomentaryLoudness,h),c.pack(this.bext.maxShortTermLoudness,h),this.writeString_(this.bext.reserved,180),this.writeString_(this.bext.codingHistory,this.bext.chunkSize-602)):[]};e.prototype.getDs64Bytes_=function(){var a=[];this.ds64.chunkId&&(a=a.concat(c.pack(this.ds64.chunkId,
l),c.pack(this.ds64.chunkSize,f),c.pack(this.ds64.riffSizeHigh,f),c.pack(this.ds64.riffSizeLow,f),c.pack(this.ds64.dataSizeHigh,f),c.pack(this.ds64.dataSizeLow,f),c.pack(this.ds64.originationTime,f),c.pack(this.ds64.sampleCountHigh,f),c.pack(this.ds64.sampleCountLow,f)));return a};e.prototype.getCueBytes_=function(){return this.cue.chunkId?[].concat(c.pack(this.cue.chunkId,l),c.pack(this.cue.chunkSize,f),c.pack(this.cue.dwCuePoints,f),this.getCuePointsBytes_()):[]};e.prototype.getCuePointsBytes_=
function(){for(var a=[],b=0;b<this.cue.dwCuePoints;b++)a=a.concat(c.pack(this.cue.points[b].dwName,f),c.pack(this.cue.points[b].dwPosition,f),c.pack(this.cue.points[b].fccChunk,l),c.pack(this.cue.points[b].dwChunkStart,f),c.pack(this.cue.points[b].dwBlockStart,f),c.pack(this.cue.points[b].dwSampleOffset,f));return a};e.prototype.getFactBytes_=function(){return this.fact.chunkId?[].concat(c.pack(this.fact.chunkId,l),c.pack(this.fact.chunkSize,f),c.pack(this.fact.dwSampleLength,f)):[]};e.prototype.getFmtBytes_=
function(){if(this.fmt.chunkId)return[].concat(c.pack(this.fmt.chunkId,l),c.pack(this.fmt.chunkSize,f),c.pack(this.fmt.audioFormat,h),c.pack(this.fmt.numChannels,h),c.pack(this.fmt.sampleRate,f),c.pack(this.fmt.byteRate,f),c.pack(this.fmt.blockAlign,h),c.pack(this.fmt.bitsPerSample,h),this.getFmtExtensionBytes_());throw Error("Could not find the 'fmt ' chunk");};e.prototype.getFmtExtensionBytes_=function(){var a=[];16<this.fmt.chunkSize&&(a=a.concat(c.pack(this.fmt.cbSize,h)));18<this.fmt.chunkSize&&
(a=a.concat(c.pack(this.fmt.validBitsPerSample,h)));20<this.fmt.chunkSize&&(a=a.concat(c.pack(this.fmt.dwChannelMask,f)));24<this.fmt.chunkSize&&(a=a.concat(c.pack(this.fmt.subformat[0],f),c.pack(this.fmt.subformat[1],f),c.pack(this.fmt.subformat[2],f),c.pack(this.fmt.subformat[3],f)));return a};e.prototype.correctContainer_=function(){return"RF64"==this.container?"RIFF":this.container};e.prototype.bitDepthFromFmt_=function(){this.bitDepth=3==this.fmt.audioFormat&&32==this.fmt.bitsPerSample?"32f":
6==this.fmt.audioFormat?"8a":7==this.fmt.audioFormat?"8m":this.fmt.bitsPerSample.toString()};e.prototype.createWaveFile_=function(){var a={be:this.LEorBE_()};return new Uint8Array([].concat(c.pack(this.container,l),c.pack(this.chunkSize,f),c.pack(this.format,l),this.getDs64Bytes_(),this.getBextBytes_(),this.getFmtBytes_(),this.getFactBytes_(),c.pack(this.data.chunkId,l),c.pack(this.data.chunkSize,f),this.samplesToBytes_(a),this.getCueBytes_()))};b.exports=e},function(b,e){function g(a,b,e,d){m(b);
m(e);d=d||a;var f=c(b,e),g={oldMin:Math.pow(2,parseInt(b,10))/2,newMin:Math.pow(2,parseInt(e,10))/2,oldMax:Math.pow(2,parseInt(b,10))/2-1,newMax:Math.pow(2,parseInt(e,10))/2-1},p=a.length;if("8"==b)for(b=0;b<p;b++)d[b]=a[b]-=128;for(b=0;b<p;b++)d[b]=f(a[b],g);if("8"==e)for(a=0;a<p;a++)d[a]=d[a]+=128}function k(a,c){return a=0<a?parseInt(a/c.oldMax*c.newMax,10):parseInt(a/c.oldMin*c.newMin,10)}function a(a,c){return parseInt(0<a?a*c.newMax:a*c.newMin,10)}function p(a,c){return 0<a?a/c.oldMax:a/c.oldMin}
function n(a){h[0]=a;return h[0]}function c(c,b){var f=["32f","64"].includes(c)?["32f","64"].includes(b)?n:a:["32f","64"].includes(b)?p:k;c==b&&(f=function(a){return a});return f}function m(a){if("32f"!=a&&"64"!=a&&("8">parseInt(a,10)||"53"<parseInt(a,10)))throw Error("Invalid bit depth.");}var h=new Float32Array(1);b.exports=g;b.exports.toBitDepth=g},function(b,e,g){function k(b){m.be="RIFX"==b.chunkId;var f=c.pack(b.chunkId,h).concat(c.pack(b.chunkSize,m),c.pack(b.format,h),a(b.subChunks));if("RIFF"==
b.chunkId||"RIFX"==b.chunkId)f=new Uint8Array(f);return f}function a(a){for(var b=[],f=0;f<a.length;)b="LIST"==a[f].chunkId?b.concat(k(a[f])):b.concat(c.pack(a[f].chunkId,h),c.pack(a[f].chunkSize,m),a[f].chunkData),f++;return b}function p(a){for(var c=[],b=12;b<a.length;)c.push(n(a,b)),b+=8+c[c.length-1].chunkSize;return c}function n(a,b){var f={chunkId:c.unpack(a.slice(b,b+4),h),chunkSize:c.unpack(a.slice(b+4,b+8),m),subChunks:[],chunkData:[]};"LIST"==f.chunkId?(f.format=c.unpack(a.slice(8,12),h),
f.subChunks=p(a.slice(b,b+f.chunkSize))):f.chunkData=a.slice(b+8,b+8+f.chunkSize);return f}var c=g(0),m={bits:32},h={bits:32,"char":!0};b.exports.read=function(a){a=[].slice.call(a);var b=c.unpack(a.slice(0,4),h);m.be="RIFX"==b;return{chunkId:b,chunkSize:c.unpack(a.slice(4,8),m),format:c.unpack(a.slice(8,12),h),subChunks:p(a)}};b.exports.write=k},function(b,e){b.exports=function(b,e){for(var a=b.length,g=0;g<a;){for(var k=b,c=g,m=0,h=e-1,f=parseInt(e/2,10);m<f;){var l=k[c+m];k[c+m]=k[c+h];k[c+h]=
l;m++;h--}g+=e}}},function(b,e){e=function(b,e){this.bits=b;this.signed=void 0===e?!1:e;this.reader=this.read;this.writer=this.write;this.offset=0;this.min=-Infinity;this.max=Infinity;this.realBits_=this.bits;this.lastByteMask_=255;this.build_()};e.prototype.read=function(b,e){e=void 0===e?0:e;if(32<this.bits)return this.readBits_(b,e);for(var a=0,g=this.offset-1;0<g;)a|=b[g+e]<<8*g,g--;a=(b[e]|a)>>>0;return this.overflow_(this.sign_(a))};e.prototype.write=function(b,e,a){a=void 0===a?0:a;e=this.overflow_(e);
var g=255;a=this.writeFirstByte_(b,e,a);for(var n=2;n<=this.offset;n++)n==this.offset&&(g=this.lastByteMask_),b[a++]=Math.floor(e/Math.pow(2,8*(n-1)))&g;return a};e.prototype.readBits_=function(b,e){e=void 0===e?0:e;for(var a="",g=0;g<this.offset;){var n=b[e+g].toString(2);a=Array(9-n.length).join("0")+n+a;g++}return this.overflow_(this.sign_(parseInt(a,2)))};e.prototype.build_=function(){this.validateWordSize_();this.setRealBits_();this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?
1:Math.ceil(this.realBits_/8)};e.prototype.sign_=function(b){b>this.max&&(b-=2*this.max+2);return b};e.prototype.overflow_=function(b){b>this.max?b=this.max:b<this.min&&(b=this.min);return b};e.prototype.setMinMax_=function(){var b=Math.pow(2,this.bits);this.signed?(this.max=b/2-1,this.min=-b/2):(this.max=b-1,this.min=0)};e.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");};e.prototype.setRealBits_=function(){8<this.bits&&(this.realBits_=(this.bits-
1|7)+1)};e.prototype.setLastByteMask_=function(){var b=8-(this.realBits_-this.bits);this.lastByteMask_=Math.pow(2,0<b?b:8)-1};e.prototype.writeFirstByte_=function(b,e,a){8>this.bits?b[a++]=0>e?e+Math.pow(2,this.bits):e:b[a++]=e&255;return a};b.exports=e},function(b,e){function g(a){return 32768<a?a-65536:a}function k(a){var b=a-h;0<=b?a=0:(a=8,b=-b);var d=m[f],e=d>>3;b>d&&(a|=4,b-=d,e+=d);d>>=1;b>d&&(a|=2,b-=d,e+=d);d>>=1;b>d&&(a|=1,e+=d);b=a;h=b&8?h-e:h+e;-32768>h?h=-32768:32767<h&&(h=32767);f+=
c[b&7];0>f?f=0:88<f&&(f=88);return a}function a(a){var b=0;a&4&&(b+=d);a&2&&(b+=d>>1);a&1&&(b+=d>>2);b+=d>>3;a&8&&(b=-b);l+=b;32767<l?l=32767:-32767>l&&(l=-32767);q+=c[a];0>q?q=0:88<q&&(q=88);d=m[q];return l}function p(a){var b=a[0];k(b);var c=[];c.push(b&255);c.push(b>>8&255);c.push(f);c.push(0);for(b=3;b<a.length;b+=2){var d=k(a[b]),e=k(a[b+1]);c.push(e<<4|d)}for(;256>c.length;)c.push(0);return c}function n(b){l=g(b[1]<<8|b[0]);q=b[2];d=m[q];for(var c=[l,g(b[3]<<8|b[2])],e=4;e<b.length;e++){var f=
b[e],p=f>>4;c.push(a(p<<4^f));c.push(a(p))}return c}var c=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],m=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],h=0,f=0,l=0,q=0,d=7;b.exports.encode=
function(a){for(var b=[],c=[],d=0;d<a.length;d++)if(c.push(a[d]),0==d%505&&0!=d||d==a.length-1)b=b.concat(p(c)),c=[];return b};b.exports.decode=function(a,b){b=void 0===b?256:b;for(var c=[],d=[],e=0;e<a.length;e++)0==e%b&&0!=e&&(c=c.concat(n(d)),d=[]),d.push(a[e]);return c};b.exports.encodeBlock=p;b.exports.decodeBlock=n},function(b,e,g){b.exports.alaw=g(9);b.exports.mulaw=g(10)},function(b,e){function g(a){var b=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,
6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],e;a=-32768==a?-32767:a;(e=~a>>8&128)||(a*=-1);32635<a&&(a=32635);256<=a?(b=b[a>>8&127],a=b<<4|a>>b+3&15):a>>=4;return a^e^85}function k(a){var b=0;a^=85;a&128&&(a&=-129,b=-1);var e=((a&240)>>4)+4;a=4!=e?1<<e|(a&15)<<e-4|1<<e-5:a<<1|1;return-8*(0===b?a:-a)}b.exports.encodeSample=g;b.exports.decodeSample=k;b.exports.encode=function(a){for(var b=
[],e=0;e<a.length;e++)b.push(g(a[e]));return b};b.exports.decode=function(a){for(var b=[],e=0;e<a.length;e++)b.push(k(a[e]));return b}},function(b,e){function g(a){if(0>a){a=132-a;var b=127}else a+=132,b=255;32767<a&&(a=32767);var e=0;var c=a>>7;c&240&&(c>>=4,e+=4);c&12&&(c>>=2,e+=2);c&2&&(e+=1);c=e;return(c<<4|a>>c+3&15)^b}function k(a){a=~a;var b=((a&15)<<3)+132<<((a&112)>>4);return a&128?132-b:b-132}b.exports.encodeSample=g;b.exports.decodeSample=k;b.exports.encode=function(a){for(var b=[],e=0;e<
a.length;e++)b.push(g(a[e]));return b};b.exports.decode=function(a){for(var b=[],e=0;e<a.length;e++)b.push(k(a[e]));return b}},function(b,e){(function(){for(var b=new Uint8Array(256),k=0;64>k;k++)b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(k)]=k;e.encode=function(a){a=new Uint8Array(a);var b,e=a.length,c="";for(b=0;b<e;b+=3)c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a[b]>>2],c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(a[b]&
3)<<4|a[b+1]>>4],c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(a[b+1]&15)<<2|a[b+2]>>6],c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a[b+2]&63];2===e%3?c=c.substring(0,c.length-1)+"\x3d":1===e%3&&(c=c.substring(0,c.length-2)+"\x3d\x3d");return c};e.decode=function(a){var e=.75*a.length,g=a.length,c=0;"\x3d"===a[a.length-1]&&(e--,"\x3d"===a[a.length-2]&&e--);var k=new ArrayBuffer(e),h=new Uint8Array(k);for(e=0;e<g;e+=4){var f=b[a.charCodeAt(e)];var l=
b[a.charCodeAt(e+1)];var q=b[a.charCodeAt(e+2)];var d=b[a.charCodeAt(e+3)];h[c++]=f<<2|l>>4;h[c++]=(l&15)<<4|q>>2;h[c++]=(q&3)<<6|d&63}return k}})()}]);