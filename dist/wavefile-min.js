/*
 byte-data
 Pack and unpack binary data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

 wavefile
 Read & write wave files with 4, 8, 11, 12, 16, 20, 24, 32 & 64-bit data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/wavefile

 bitdepth
 Change the resolution of samples to and from 8, 11, 12, 16, 20, 24, 32, 48 & 64-bit.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/bitdepth

 riff-chunks
 Read and write the chunks of RIFF and RIFX files.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/riff-chunks

 generic-integer
 Pack and unpack any integer from 1 to 53-Bit.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/generic-integer

 endianness
 Swap endianness in byte arrays.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/endianness

 imaadpcm
 JavaScript IMA ADPCM codec.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/imaadpcm

 References:
 http://www.cs.columbia.edu/~hgs/audio/dvi/
 https://github.com/acida/pyima
 https://wiki.multimedia.cx/index.php/IMA_ADPCM

 alawmulaw
 JavaScript A-Law and mu-Law codecs.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/alawmulaw

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var g=function(){};g.prototype=a;return new g};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},g={};try{return g.__proto__=a,g.a}catch(e){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,g){a.__proto__=g;if(a.__proto__!==g)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,g){a.prototype=$jscomp.objectCreate(g.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,g)}else for(e in g)if("prototype"!=e)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(g,e);f&&Object.defineProperty(a,e,f)}else a[e]=g[e];a.superClass_=g.prototype};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,e){a!=Array.prototype&&a!=Object.prototype&&(a[g]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,g,e,f){if(g){e=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var c=a[f];c in e||(e[c]={});e=e[c]}a=a[a.length-1];f=e[a];g=g(f);g!=f&&null!=g&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,e){return a===e?0!==a||1/a===1/e:a!==a&&e!==e}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,e){var f=this;f instanceof String&&(f=String(f));var c=f.length;for(e=e||0;e<c;e++)if(f[e]==a||Object.is(f[e],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,g,e){if(null==a)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,e){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,e||0)}},"es6","es3");
$jscomp.owns=function(a,g){return Object.prototype.hasOwnProperty.call(a,g)};$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,e){for(var f=1;f<arguments.length;f++){var c=arguments[f];if(c)for(var l in c)$jscomp.owns(c,l)&&(a[l]=c[l])}return a}},"es6","es3");
(function(a){function g(f){if(e[f])return e[f].exports;var c=e[f]={i:f,l:!1,exports:{}};a[f].call(c.exports,c,c.exports,g);c.l=!0;return c.exports}var e={};g.m=a;g.c=e;g.d=function(a,c,l){g.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:l})};g.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};g.d(c,"a",c);return c};g.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};g.p="";return g(g.s=2)})([function(a,g,e){function f(a,
c,d){d=void 0===d?10:d;var b=[];c.char?b=c.char?a.slice(0,c.offset):a:Array.isArray(a)||(b=[a]);return l.toBytes(b,l.getType(c,d))}function c(a,c,d){d=void 0===d?10:d;a=l.fromBytes(a.slice(0,c.offset),l.getType(c,d));return a=c.char?a.slice(0,c.bits/8):a[0]}var l=e(5),d=e(1);a.exports.pack=f;a.exports.unpack=c;a.exports.packArray=function(a,c,d){return l.toBytes(a,l.getType(c,void 0===d?10:d))};a.exports.unpackArray=function(a,c,d){return l.fromBytes(a,l.getType(c,void 0===d?10:d))};a.exports.unpackStruct=
function(a,d,l){l=void 0===l?10:l;for(var b=a.length,h=0,e=0;e<d.length;e++)h+=d[e].offset;if(b<h)return[];b=[];for(e=h=0;h<d.length;)b=b.concat(c(a.slice(e,e+d[h].offset),d[h],l)),e+=d[h].offset,h++;return b};a.exports.packStruct=function(a,c,d){d=void 0===d?10:d;if(a.length<c.length)return[];for(var b=[],h=0;h<c.length;h++)b=b.concat(f(a[h],c[h],d));return b};a.exports.findString=function(a,e){for(var b,k=0;k<a.length;k++)if(b=c(a.slice(k,k+e.length+1),new d({bits:8*e.length,"char":!0})),b==e)return k;
return-1};a.exports.Type=d;a.exports.chr=new d({bits:8,"char":!0});a.exports.fourCC=new d({bits:32,"char":!0});a.exports.bool=new d({bits:1});a.exports.int2=new d({bits:2,signed:!0});a.exports.uInt2=new d({bits:2});a.exports.int4=new d({bits:4,signed:!0});a.exports.uInt4=new d({bits:4});a.exports.int8=new d({bits:8,signed:!0});a.exports.uInt8=new d({bits:8});a.exports.int16=new d({bits:16,signed:!0});a.exports.uInt16=new d({bits:16});a.exports.float16=new d({bits:16,"float":!0});a.exports.int24=new d({bits:24,
signed:!0});a.exports.uInt24=new d({bits:24});a.exports.int32=new d({bits:32,signed:!0});a.exports.uInt32=new d({bits:32});a.exports.float32=new d({bits:32,"float":!0});a.exports.int40=new d({bits:40,signed:!0});a.exports.uInt40=new d({bits:40});a.exports.int48=new d({bits:48,signed:!0});a.exports.uInt48=new d({bits:48});a.exports.float64=new d({bits:64,"float":!0});a.exports.int16BE=new d({bits:16,signed:!0,be:!0});a.exports.uInt16BE=new d({bits:16,be:!0});a.exports.float16BE=new d({bits:16,"float":!0,
be:!0});a.exports.int24BE=new d({bits:24,signed:!0,be:!0});a.exports.uInt24BE=new d({bits:24,be:!0});a.exports.int32BE=new d({bits:32,signed:!0,be:!0});a.exports.uInt32BE=new d({bits:32,be:!0});a.exports.float32BE=new d({bits:32,"float":!0,be:!0});a.exports.int40BE=new d({bits:40,signed:!0,be:!0});a.exports.uInt40BE=new d({bits:40,be:!0});a.exports.int48BE=new d({bits:48,signed:!0,be:!0});a.exports.uInt48BE=new d({bits:48,be:!0});a.exports.float64BE=new d({bits:64,"float":!0,be:!0})},function(a,g,
e){g=new Int8Array(4);var f=new Int32Array(g.buffer,0,1),c=new Float32Array(g.buffer,0,1);g=new Int8Array(8);var l=new Float64Array(g.buffer),d=new Uint32Array(g.buffer),b=e(6),n=function(a){var c=b.call(this,a)||this;c.char=a["char"];c.float=a["float"];c.base=a.base?a.base:10;c.buildType_();return c};$jscomp.inherits(n,b);n.decodeSample=b.decodeSample;n.encodeSample=b.encodeSample;n.mulaw=b.mulaw;n.alaw=b.alaw;n.decodeBlock=b.decodeBlock;n.encodeBlock=b.encodeBlock;n.decode=b.decode;n.encode=b.encode;
n.prototype.read16F_=function(a,b){a=this.read(a,b,{bits:16,offset:2});b=(a&31744)>>10;var h=a&1023;return(b?Math.pow(2,b-15)*(1+h/1024):h/1024*.00006103515625)*(a>>15?-1:1)};n.prototype.read32F_=function(a,b){f[0]=this.read(a,b,{bits:32,offset:4});return c[0]};n.prototype.read64F_=function(a,b){var h=new n({bits:32,offset:4});d[0]=h.read(a,b,{bits:32,offset:4});d[1]=h.read(a,b+4,{bits:32,offset:4});return l[0]};n.prototype.readChar_=function(a,b){for(var h="",c=0;c<this.offset;)h+=String.fromCharCode(a[b+
c]),c++;return h};n.prototype.write64F_=function(a,b,h){l[0]=b;b=new n({bits:32,offset:4,lastByteMask:255});h=b.write(a,d[0],h);return b.write(a,d[1],h)};n.prototype.write32F_=function(a,b,h){c[0]=b;return h=this.write(a,f[0],h)};n.prototype.write16F_=function(a,b,h){c[0]=b;var d=f[0];b=d>>16&32768;var e=d>>12&2047;d=d>>23&255;103<=d&&(b=(b|d-112<<10|e>>1)+(e&1));a[h++]=b&255;a[h++]=b>>>8&255;return h};n.prototype.writeChar_=function(a,b,h){a[h++]=b.charCodeAt(0);return h};n.prototype.buildType_=
function(){this.setReader_();this.setWriter_();this.float&&(this.min=-Infinity,this.max=Infinity)};n.prototype.setReader_=function(){this.float?16==this.bits?this.reader=this.read16F_:32==this.bits?this.reader=this.read32F_:64==this.bits&&(this.reader=this.read64F_):this.char&&(this.reader=this.readChar_)};n.prototype.setWriter_=function(){this.float?16==this.bits?this.writer=this.write16F_:32==this.bits?this.writer=this.write32F_:64==this.bits&&(this.writer=this.write64F_):this.char&&(this.writer=
this.writeChar_)};a.exports=n},function(a,g,e){var f=e(3),c=e(4),l=e(8),d=e(9),b=e(0),n=e(0).uInt8,m=e(0).uInt16,k=e(0).uInt32;a=function(a){this.container="";this.chunkSize=0;this.format="";this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]};this.fact={chunkId:"",chunkSize:0,dwSampleLength:0};this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]};this.bext={chunkId:"",chunkSize:0,
description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""};this.ds64={chunkId:"",riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0,tableLength:0,table:[]};this.data={chunkId:"",chunkSize:0,samples:[]};this.bitDepth="0";this.audioFormats_={4:17,8:1,
"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,40:65534,48:65534,64:3};this.head_=0;this.enforceFact_=!1;this.isInterleaved=!0;a&&this.fromBuffer(a)};a.prototype.fromScratch=function(a,b,c,d,e){e=void 0===e?{}:e;e.container||(e.container="RIFF");var h=((parseInt(c,10)-1|7)+1)/8;this.clearHeader_();this.bitDepth=c;this.container=e.container;this.chunkSize=36+d.length*h;this.format="WAVE";this.fmt.chunkId="fmt ";this.fmt.chunkSize=16;this.fmt.byteRate=a*h*b;this.fmt.blockAlign=a*h;this.fmt.audioFormat=this.audioFormats_[c]?
this.audioFormats_[c]:65534;this.fmt.numChannels=a;this.fmt.sampleRate=b;this.fmt.bitsPerSample=parseInt(c,10);this.data.chunkId="data";this.data.samples=d;0<d.length&&d[0].constructor===Array&&(this.isInterleaved=!1,this.interleave());this.data.chunkSize=d.length*h;"4"==c&&(this.chunkSize=44+d.length,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact.chunkId="fact",this.fact.chunkSize=4,this.fact.dwSampleLength=
2*d.length,this.data.chunkSize=d.length);if("8a"==c||"8m"==c)this.chunkSize=44+d.length,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact.chunkId="fact",this.fact.chunkSize=4,this.fact.dwSampleLength=d.length;65534==this.fmt.audioFormat&&(this.chunkSize=60+d.length*h,this.fmt.chunkSize=40,this.fmt.bitsPerSample=(parseInt(c,10)-1|7)+1,this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(c,10),this.fmt.dwChannelMask=0,this.fmt.subformat=[1,1048576,2852126848,1905997824])};
a.prototype.fromBuffer=function(a){this.readRIFFChunk_(a);var h="RIFX"==this.container;a=c.read(a,h);this.readFmtChunk_(a.subChunks);this.readFactChunk_(a.subChunks);this.readBextChunk_(a.subChunks);this.readCueChunk_(a.subChunks);this.readDataChunk_(a.subChunks,{be:h,single:!0});this.bitDepth=3==this.fmt.audioFormat&&32==this.fmt.bitsPerSample?"32f":6==this.fmt.audioFormat?"8a":7==this.fmt.audioFormat?"8m":this.fmt.bitsPerSample.toString()};a.prototype.toBuffer=function(){this.checkWriteInput_();
this.assureInterleaved_();return this.createWaveFile_()};a.prototype.toRIFF=function(){this.container="RIFF";this.LEorBE_()};a.prototype.toRIFX=function(){this.container="RIFX";this.LEorBE_()};a.prototype.toBitDepth=function(a,b){var h=a,c=this.bitDepth;void 0===b||b||(h=this.realBitDepth_(a),c=this.realBitDepth_(this.bitDepth));this.assureInterleaved_();f.toBitDepth(this.data.samples,c,h);this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,a,this.data.samples,{container:this.container})};a.prototype.interleave=
function(){if(!this.isInterleaved){for(var a=[],b=this.data.samples[0].length,c=0;c<b;c++)for(var d=0;d<this.data.samples.length;d++)a.push(this.data.samples[d][c]);this.data.samples=a;this.isInterleaved=!0}};a.prototype.deInterleave=function(){if(this.isInterleaved){var a=[],b;for(b=0;b<this.fmt.numChannels;b++)a[b]=[];b=0;for(var c;b<this.data.samples.length;){for(c=0;c<this.fmt.numChannels;c++)a[c].push(this.data.samples[b+c]);b+=c}this.data.samples=a;this.isInterleaved=!1}};a.prototype.toIMAADPCM=
function(){if(8E3!=this.fmt.sampleRate)throw Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!=this.fmt.numChannels)throw Error("Only mono files can be compressed as IMA-ADPCM.");this.assure16Bit_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"4",l.encode(this.data.samples),{container:this.container})};a.prototype.fromIMAADPCM=function(){this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",l.decode(this.data.samples,this.fmt.blockAlign),{container:this.container})};
a.prototype.toALaw=function(){this.assure16Bit_();this.assureInterleaved_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"8a",d.alaw.encode(this.data.samples),{container:this.container})};a.prototype.fromALaw=function(){this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",d.alaw.decode(this.data.samples),{container:this.container})};a.prototype.toMuLaw=function(){this.assure16Bit_();this.assureInterleaved_();this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"8m",d.mulaw.encode(this.data.samples),
{container:this.container})};a.prototype.fromMuLaw=function(){this.fromScratch(this.fmt.numChannels,this.fmt.sampleRate,"16",d.mulaw.decode(this.data.samples),{container:this.container})};a.prototype.realBitDepth_=function(a){"32f"!=a&&(a=((parseInt(a,10)-1|7)+1).toString());return a};a.prototype.checkWriteInput_=function(){this.validateBitDepth_();this.validateNumChannels_();this.validateSampleRate_()};a.prototype.validateBitDepth_=function(){if(!this.audioFormats_[this.bitDepth]){if(8<parseInt(this.bitDepth,
10)&&54>parseInt(this.bitDepth,10))return!0;throw Error("Invalid bit depth.");}return!0};a.prototype.validateNumChannels_=function(){var a=this.fmt.numChannels*this.fmt.bitsPerSample/8;if(1>this.fmt.numChannels||65535<a)throw Error("Invalid number of channels.");return!0};a.prototype.validateSampleRate_=function(){var a=this.fmt.bitsPerSample/8*this.fmt.numChannels*this.fmt.sampleRate;if(1>this.fmt.sampleRate||4294967295<a)throw Error("Invalid sample rate.");return!0};a.prototype.clearHeader_=function(){this.fmt.cbSize=
0;this.fmt.validBitsPerSample=0;this.fact.chunkId="";this.fact.chunkSize=0;this.fact.dwSampleLength=0};a.prototype.assure16Bit_=function(){this.assureUncompressed_();"16"!=this.bitDepth&&this.toBitDepth("16")};a.prototype.assureUncompressed_=function(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()};a.prototype.assureInterleaved_=function(){this.isInterleaved||this.interleave()};a.prototype.LEorBE_=function(){var a="RIFX"==this.container;
n.be=a;m.be=a;return k.be=a};a.prototype.findChunk_=function(a,b){for(var h=0;h<a.length;h++)if(a[h].chunkId==b)return a[h];return null};a.prototype.readRIFFChunk_=function(a){this.container=b.unpackArray(a.slice(0,4),b.chr);if("RIFF"!=this.container&&"RIFX"!=this.container)throw Error("Not a supported format.");this.LEorBE_();this.chunkSize=b.unpack(a.slice(4,8),k);this.format=b.unpackArray(a.slice(8,12),b.chr);if("WAVE"!=this.format)throw Error("Could not find the 'WAVE' format identifier");};a.prototype.readFmtChunk_=
function(a){if(a=this.findChunk_(a,"fmt "))this.fmt.chunkId="fmt ",this.fmt.chunkSize=a.chunkSize,this.fmt.audioFormat=b.unpack(a.chunkData.slice(0,2),m),this.fmt.numChannels=b.unpack(a.chunkData.slice(2,4),m),this.fmt.sampleRate=b.unpack(a.chunkData.slice(4,8),k),this.fmt.byteRate=b.unpack(a.chunkData.slice(8,12),k),this.fmt.blockAlign=b.unpack(a.chunkData.slice(12,14),m),this.fmt.bitsPerSample=b.unpack(a.chunkData.slice(14,16),m),this.readFmtExtension_(a);else throw Error("Could not find the 'fmt ' chunk");
};a.prototype.readFmtExtension_=function(a){a=a.chunkData;16<this.fmt.chunkSize&&(this.fmt.cbSize=b.unpack(a.slice(16,18),m),18<this.fmt.chunkSize&&(this.fmt.validBitsPerSample=b.unpack(a.slice(18,20),m),20<this.fmt.chunkSize&&(this.fmt.dwChannelMask=b.unpack(a.slice(20,24),k),this.fmt.subformat=[b.unpack(a.slice(24,28),k),b.unpack(a.slice(28,32),k),b.unpack(a.slice(32,36),k),b.unpack(a.slice(36,40),k)])))};a.prototype.readFactChunk_=function(a){if(a=this.findChunk_(a,"fact"))this.fact.chunkId="fact",
this.fact.chunkSize=a.chunkSize,this.fact.dwSampleLength=b.unpack(a.chunkData.slice(0,4),k);else if(this.enforceFact_)throw Error("Could not find the 'fact' chunk");};a.prototype.readCueChunk_=function(a){var c=this.findChunk_(a,"cue ");if(c)for(a=c.chunkData,this.cue.chunkId="cue ",this.cue.chunkSize=c.chunkSize,this.cue.dwCuePoints=b.unpack(a.slice(0,4),k),c=0;c<this.cue.dwCuePoints;c++){var d=4+24*c;this.cue.points.push({dwName:b.unpack(a.slice(d,d+4),k),dwPosition:b.unpack(a.slice(d+4,d+8),k),
fccChunk:b.unpack(a.slice(d+8,d+12),b.fourCC),dwChunkStart:b.unpack(a.slice(d+12,d+16),k),dwBlockStart:b.unpack(a.slice(d+16,d+20),k),dwSampleOffset:b.unpack(a.slice(d+20,d+24),k)})}};a.prototype.readDataChunk_=function(a,b){if(a=this.findChunk_(a,"data"))this.data.chunkId="data",this.data.chunkSize=a.chunkSize,this.samplesFromBytes_(a.chunkData,b);else throw Error("Could not find the 'data' chunk");};a.prototype.readBextChunk_=function(a){if(a=this.findChunk_(a,"bext"))a=a.chunkData,this.head_=0,
this.bext={chunkId:"bext",chunkSize:a.length,description:this.readString_(a,256),originator:this.readString_(a,32),originatorReference:this.readString_(a,32),originationDate:this.readString_(a,10),originationTime:this.readString_(a,8),timeReference:[this.readFromChunk_(a,k),this.readFromChunk_(a,k)],version:this.readFromChunk_(a,m),UMID:this.readString_(a,64),loudnessValue:this.readFromChunk_(a,m),loudnessRange:this.readFromChunk_(a,m),maxTruePeakLevel:this.readFromChunk_(a,m),maxMomentaryLoudness:this.readFromChunk_(a,
m),maxShortTermLoudness:this.readFromChunk_(a,m),reserved:this.readString_(a,180),codingHistory:this.readString_(a,a.length-602)}};a.prototype.readString_=function(a,c){for(var d="",h=0;h<c;h++)d+=b.unpack([a[this.head_]],b.chr),this.head_++;return d};a.prototype.readFromChunk_=function(a,c){var d=c.bits/8;a=b.unpack(a.slice(this.head_,this.head_+d),c);this.head_+=d;return a};a.prototype.writeString_=function(a,c){a=b.packArray(a,b.chr);for(var d=a.length;d<c;d++)a.push(0);return a};a.prototype.samplesToBytes_=
function(a){a.bits=4==this.fmt.bitsPerSample?8:this.fmt.bitsPerSample;a.signed=8==a.bits?!1:!0;a.float=3==this.fmt.audioFormat||64==this.fmt.bitsPerSample?!0:!1;a=b.packArray(this.data.samples,new b.Type(a));a.length%2&&a.push(0);return a};a.prototype.samplesFromBytes_=function(a,c){c.bits=4==this.fmt.bitsPerSample?8:this.fmt.bitsPerSample;c.signed=8==c.bits?!1:!0;c.float=3==this.fmt.audioFormat||64==this.fmt.bitsPerSample?!0:!1;c.single=!1;this.data.samples=b.unpackArray(a,new b.Type(c))};a.prototype.getBextBytes_=
function(){return this.bext.chunkId?[].concat(b.packArray(this.bext.chunkId,b.chr),b.pack(this.bext.chunkSize,k),this.writeString_(this.bext.description,256),this.writeString_(this.bext.originator,32),this.writeString_(this.bext.originatorReference,32),this.writeString_(this.bext.originationDate,10),this.writeString_(this.bext.originationTime,8),b.pack(this.bext.timeReference[0],k),b.pack(this.bext.timeReference[1],k),b.pack(this.bext.version,m),this.writeString_(this.bext.UMID,64),b.pack(this.bext.loudnessValue,
m),b.pack(this.bext.loudnessRange,m),b.pack(this.bext.maxTruePeakLevel,m),b.pack(this.bext.maxMomentaryLoudness,m),b.pack(this.bext.maxShortTermLoudness,m),this.writeString_(this.bext.reserved,180),this.writeString_(this.bext.codingHistory,this.bext.chunkSize-602)):[]};a.prototype.getCueBytes_=function(){return this.cue.chunkId?[].concat(b.packArray(this.cue.chunkId,b.chr),b.pack(this.cue.chunkSize,k),b.pack(this.cue.dwCuePoints,k),this.getCuePointsBytes_()):[]};a.prototype.getCuePointsBytes_=function(){for(var a=
[],c=0;c<this.cue.dwCuePoints;c++)a=a.concat(b.pack(this.cue.points[c].dwName,k),b.pack(this.cue.points[c].dwPosition,k),b.pack(this.cue.points[c].fccChunk,b.fourCC),b.pack(this.cue.points[c].dwChunkStart,k),b.pack(this.cue.points[c].dwBlockStart,k),b.pack(this.cue.points[c].dwSampleOffset,k));return a};a.prototype.getFactBytes_=function(){return this.fact.chunkId?[].concat(b.packArray(this.fact.chunkId,b.chr),b.pack(this.fact.chunkSize,k),b.pack(this.fact.dwSampleLength,k)):[]};a.prototype.getFmtBytes_=
function(){if(this.fmt.chunkId)return[].concat(b.packArray(this.fmt.chunkId,b.chr),b.pack(this.fmt.chunkSize,k),b.pack(this.fmt.audioFormat,m),b.pack(this.fmt.numChannels,m),b.pack(this.fmt.sampleRate,k),b.pack(this.fmt.byteRate,k),b.pack(this.fmt.blockAlign,m),b.pack(this.fmt.bitsPerSample,m),this.getFmtExtensionBytes_());throw Error("Could not find the 'fmt ' chunk");};a.prototype.getFmtExtensionBytes_=function(){var a=[];16<this.fmt.chunkSize&&(a=a.concat(b.pack(this.fmt.cbSize,m)));18<this.fmt.chunkSize&&
(a=a.concat(b.pack(this.fmt.validBitsPerSample,m)));20<this.fmt.chunkSize&&(a=a.concat(b.pack(this.fmt.dwChannelMask,k)));24<this.fmt.chunkSize&&(a=a.concat(b.pack(this.fmt.subformat[0],k),b.pack(this.fmt.subformat[1],k),b.pack(this.fmt.subformat[2],k),b.pack(this.fmt.subformat[3],k)));return a};a.prototype.createWaveFile_=function(){var a={be:this.LEorBE_()};return new Uint8Array([].concat(b.packArray(this.container,b.chr),b.pack(this.chunkSize,k),b.packArray(this.format,b.chr),this.getBextBytes_(),
this.getFmtBytes_(),this.getFactBytes_(),b.packArray(this.data.chunkId,b.chr),b.pack(this.data.chunkSize,k),this.samplesToBytes_(a),this.getCueBytes_()))};window.WaveFile=window.WaveFile?window.WaveFile:a},function(a,g){var e=new Float32Array(1),f={intToInt:function(a,e){return a=0<a?parseInt(a/e.oldPositive*e.newPositive,10):parseInt(a/e.oldNegative*e.newNegative,10)},floatToInt:function(a,e){return 0<a?parseInt(a*e.newPositive,10):parseInt(a*e.newNegative,10)},intToFloat:function(a,e){return 0<
a?a/e.oldPositive:a/e.oldNegative},floatToFloat:function(a,l){"64"==l.original&&"32f"==l.target&&(e[0]=a,a=e[0]);return a}};a.exports.toBitDepth=function(a,e,d){for(var b=[],c=8;49>c;c++)b.push(c.toString());b.push("32f");b.push("64");if(-1==b.indexOf(e)||-1==b.indexOf(d))throw Error("Invalid bit depth.");b=["32f","64"].includes(e)?"float":"int";c=["32f","64"].includes(d)?"Float":"Int";b=f[b+"To"+c];c=a.length;for(var l=0;l<c;l++){var k=l,h=a[l];"8"==e&&(h-=128);a[k]=h;a[l]=b(a[l],{oldNegative:parseInt(Math.pow(2,
parseInt(e,10))/2,10),newNegative:parseInt(Math.pow(2,parseInt(d,10))/2,10),oldPositive:parseInt(Math.pow(2,parseInt(e,10))/2-1,10),newPositive:parseInt(Math.pow(2,parseInt(d,10))/2-1,10),original:e,target:d});k=l;h=a[l];"8"==d&&(h+=128);a[k]=h}}},function(a,g,e){function f(a){m.be="RIFX"===a.chunkId;var d=b.packArray(a.chunkId,n).concat(b.pack(a.chunkSize,m),b.packArray(a.format,n),c(a.subChunks));if("RIFF"===a.chunkId||"RIFX"===a.chunkId)d=new Uint8Array(d);return d}function c(a){for(var c=[],d=
0;d<a.length;)c="LIST"===a[d].chunkId?c.concat(f(a[d])):c.concat(b.packArray(a[d].chunkId,n),b.pack(a[d].chunkSize,m),a[d].chunkData),d++;return c}function l(a){for(var b=[],c=12;c<a.length;)b.push(d(a,c)),c+=8+b[b.length-1].chunkSize;return b}function d(a,c){var d={chunkId:b.unpackArray(a.slice(c,c+4),n),chunkSize:b.unpack(a.slice(c+4,c+8),m)};"LIST"===d.chunkId?(d.format=b.unpackArray(a.slice(8,12),n),d.subChunks=l(a.slice(c,c+d.chunkSize))):d.chunkData=a.slice(c+8,c+8+d.chunkSize);return d}var b=
e(0),n=b.chr,m=b.uInt32;a.exports.read=function(a){a=[].slice.call(a);var c=b.unpackArray(a.slice(0,4),n);m.be="RIFX"===c;return{chunkId:c,chunkSize:b.unpack(a.slice(4,8),m),format:b.unpackArray(a.slice(8,12),n),subChunks:l(a)}};a.exports.write=f},function(a,g,e){var f=e(1),c=e(7);a.exports.getType=function(a,c){a=Object.assign(new f({}),a);a.base=c;return a};a.exports.toBytes=function(a,d){for(var b=0,e=0,l=a.length,f=[];b<l;)e=d.writer(f,a[b++],e);d.be&&c(f,d.offset);if(10!=d.base){a=d.base;b=0;
for(e=f.length;b<e;)f[b]=f[b].toString(a),b++;a=0;b=f.length;for(d=(2==d.base?8:2)+1;a<b;)f[a]=Array(d-f[a].length).join("0")+f[a],a++}return f};a.exports.fromBytes=function(a,d){d.be&&c(a,d.offset);if(10!=d.base)for(var b=d.base,e=0,f=a.length;e<f;)a[e]=parseInt(a[e],b),e++;b=[];e=0;for(f=a.length-(d.offset-1);e<f;)b.push(d.reader(a,e)),e+=d.offset;d.char&&(b=b.join(""));return b}},function(a,g){g=function(a){this.bits=a.bits;this.be=a.be;this.signed=a.signed;this.reader=this.read;this.writer=this.write;
this.offset=0;this.min=-Infinity;this.max=Infinity;this.realBits_=this.bits;this.lastByteMask_=255;this.build_()};g.prototype.read=function(a,f){f=void 0===f?0:f;if(32<this.bits)return this.readBits_(a,f);for(var c=0,e=this.offset-1;0<e;)c|=a[e+f]<<8*e,e--;c=(a[f]|c)>>>0;return this.overflow_(this.sign_(c))};g.prototype.write=function(a,f,c){c=void 0===c?0:c;f=this.overflow_(f);var e=255;c=this.writeFirstByte_(a,f,c);for(var d=2;d<=this.offset;d++)d==this.offset&&(e=this.lastByteMask_),a[c++]=Math.floor(f/
Math.pow(2,8*(d-1)))&e;return c};g.prototype.readBits_=function(a,f){f=void 0===f?0:f;for(var c="",e=0;e<this.offset;){var d=a[f+e].toString(2);c=Array(9-d.length).join("0")+d+c;e++}return this.overflow_(this.sign_(parseInt(c,2)))};g.prototype.build_=function(){this.validateWordSize_();this.setRealBits_();this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?1:Math.ceil(this.realBits_/8)};g.prototype.sign_=function(a){a>this.max&&(a-=2*this.max+2);return a};g.prototype.overflow_=function(a){a>
this.max?a=this.max:a<this.min&&(a=this.min);return a};g.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};g.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");};g.prototype.setRealBits_=function(){8<this.bits&&(this.realBits_=(this.bits-1|7)+1)};g.prototype.setLastByteMask_=function(){var a=8-(this.realBits_-this.bits);this.lastByteMask_=Math.pow(2,0<a?a:8)-1};g.prototype.writeFirstByte_=
function(a,f,c){8>this.bits?a[c++]=0>f?f+Math.pow(2,this.bits):f:a[c++]=f&255;return c};a.exports=g},function(a,g){a.exports=function(a,f){for(var c=a.length,e=0;e<c;){for(var d=a,b=e,g=0,m=f-1,k=parseInt(f/2,10);g<k;){var h=d[b+g];d[b+g]=d[b+m];d[b+m]=h;g++;m--}e+=f}}},function(a,g){function e(a){return 32768<a?a-65536:a}function f(a){var c=a-m;0<=c?a=0:(a=8,c=-c);var d=n[k],e=d>>3;c>d&&(a|=4,c-=d,e+=d);d>>=1;c>d&&(a|=2,c-=d,e+=d);d>>=1;c>d&&(a|=1,e+=d);c=a;m=c&8?m-e:m+e;-32768>m?m=-32768:32767<
m&&(m=32767);k+=b[c&7];0>k?k=0:88<k&&(k=88);return a}function c(a){var c=0;a&4&&(c+=q);a&2&&(c+=q>>1);a&1&&(c+=q>>2);c+=q>>3;a&8&&(c=-c);h+=c;32767<h?h=32767:-32767>h&&(h=-32767);p+=b[a];0>p?p=0:88<p&&(p=88);q=n[p];return h}function l(a){var c=a[0];f(c);var b=[];b.push(c&255);b.push(c>>8&255);b.push(k);b.push(0);for(c=3;c<a.length;c+=2){var d=f(a[c]),e=f(a[c+1]);b.push(e<<4|d)}for(;256>b.length;)b.push(0);return b}function d(a){h=e(a[1]<<8|a[0]);p=a[2];q=n[p];for(var b=[h,e(a[3]<<8|a[2])],d=4;d<a.length;d++){var f=
a[d],g=f>>4;b.push(c(g<<4^f));b.push(c(g))}return b}var b=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],n=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],m=0,k=0,h=0,p=0,q=7;a.exports.encode=
function(a){for(var c=[],b=[],d=0;d<a.length;d++)if(b.push(a[d]),0==d%505&&0!=d||d==a.length-1)c=c.concat(l(b)),b=[];return c};a.exports.decode=function(a,c){c=void 0===c?256:c;for(var b=[],e=[],f=0;f<a.length;f++)0==f%c&&0!=f&&(b=b.concat(d(e)),e=[]),e.push(a[f]);return b};a.exports.encodeBlock=l;a.exports.decodeBlock=d},function(a,g,e){a.exports.alaw=e(10);a.exports.mulaw=e(11)},function(a,g){function e(a){var c=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,
6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],d;a=-32768==a?-32767:a;(d=~a>>8&128)||(a*=-1);32635<a&&(a=32635);256<=a?(c=c[a>>8&127],a=c<<4|a>>c+3&15):a>>=4;return a^d^85}function f(a){var c=0;a^=85;a&128&&(a&=-129,c=-1);var d=((a&240)>>4)+4;a=4!=d?1<<d|(a&15)<<d-4|1<<d-5:a<<1|1;return-8*(0===c?a:-a)}a.exports.encodeSample=e;a.exports.decodeSample=f;a.exports.encode=function(a){for(var c=
[],d=0;d<a.length;d++)c.push(e(a[d]));return c};a.exports.decode=function(a){for(var c=[],d=0;d<a.length;d++)c.push(f(a[d]));return c}},function(a,g){function e(a){if(0>a){a=132-a;var c=127}else a+=132,c=255;32767<a&&(a=32767);var d=0;var b=a>>7;b&240&&(b>>=4,d+=4);b&12&&(b>>=2,d+=2);b&2&&(d+=1);b=d;return(b<<4|a>>b+3&15)^c}function f(a){a=~a;var c=((a&15)<<3)+132<<((a&112)>>4);return a&128?132-c:c-132}a.exports.encodeSample=e;a.exports.decodeSample=f;a.exports.encode=function(a){for(var c=[],d=0;d<
a.length;d++)c.push(e(a[d]));return c};a.exports.decode=function(a){for(var c=[],d=0;d<a.length;d++)c.push(f(a[d]));return c}}]);