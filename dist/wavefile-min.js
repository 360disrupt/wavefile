/*
 Wavefile
 Read wave files with 4, 8, 16, 24, 32 PCM, 32 IEEE & 64-bit data.
 Copyright (c) 2017 Rafael da Silva Rocha. MIT License.
 https://github.com/rochars/wavefile

 byte-data
 Bytes to and from numbers and strings.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

*/
(function(f){function g(c){if(h[c])return h[c].exports;var a=h[c]={i:c,l:!1,exports:{}};f[c].call(a.exports,a,a.exports,g);a.l=!0;return a.exports}var h={};g.m=f;g.c=h;g.d=function(c,a,b){g.o(c,a)||Object.defineProperty(c,a,{configurable:!1,enumerable:!0,get:b})};g.n=function(c){var a=c&&c.__esModule?function(){return c["default"]}:function(){return c};g.d(a,"a",a);return a};g.o=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)};g.p="";return g(g.s=1)})([function(f,g){function h(b){c[0]=
b;return a[0]}g=new Int8Array(4);var c=new Int32Array(g.buffer,0,1),a=new Float32Array(g.buffer,0,1);f.exports=h;f.exports.pack=h;f.exports.unpack=function(b){a[0]=b;return c[0]}},function(f,g,h){var c=h(2);g=function(a){this.chunkId="";this.chunkSize=0;this.format=this.subChunk1Id="";this.bitsPerSample=this.blockAlign=this.byteRate=this.sampleRate=this.numChannels=this.audioFormat=this.subChunk1Size=0;this.subChunk2Id="";this.subChunk2Size=0;this.samples=[];this.bitDepth_="";a&&(this.readRIFFChunk_(a),
this.readWAVEChunk_(a),this.readFmtChunk_(a),this.readDataChunk_(a))};g.prototype.readRIFFChunk_=function(a){this.chunkId=c.stringFromBytes(a.slice(0,4));if("RIFF"!=this.chunkId)throw Error("Not a supported format.");this.chunkSize=c.intFrom4Bytes(a.slice(4,8))[0]};g.prototype.readWAVEChunk_=function(a){var b=c.findString(a,"WAVE");if(-1===b)throw Error("Could not find the 'WAVE' chunk");this.subChunk1Id=c.stringFromBytes(a.slice(b,b+4))};g.prototype.readFmtChunk_=function(a){var b=c.findString(a,
"fmt ");if(-1===b)throw Error("Could not find the 'fmt ' chunk");this.format=c.stringFromBytes(a.slice(b,b+4));this.subChunk1Size=c.uIntFrom4Bytes(a.slice(b+4,b+8))[0];this.audioFormat=c.intFrom2Bytes(a.slice(b+8,b+10))[0];this.numChannels=c.uIntFrom2Bytes(a.slice(b+10,b+12))[0];this.sampleRate=c.uIntFrom4Bytes(a.slice(b+12,b+16))[0];this.byteRate=c.uIntFrom4Bytes(a.slice(b+16,b+20))[0];this.blockAlign=c.uIntFrom2Bytes(a.slice(b+20,b+22))[0];this.bitsPerSample=c.uIntFrom2Bytes(a.slice(b+22,b+24))[0];
this.bitDepth_=3==this.audioFormat&&32==this.bitsPerSample?"32f":this.bitsPerSample.toString()};g.prototype.readDataChunk_=function(a){var b=c.findString(a,"data");if(-1===b)throw Error("Could not find the 'data' chunk");this.subChunk2Id=c.stringFromBytes(a.slice(b,b+4));this.subChunk2Size=c.intFrom4Bytes(a.slice(b+4,b+8))[0];this.readSamples_(a,b)};g.prototype.readSamples_=function(a,b){this.samples={4:c.intFrom1Byte,8:c.uIntFrom1Byte,16:c.intFrom2Bytes,24:c.intFrom3Bytes,32:c.intFrom4Bytes,"32f":c.floatFrom4Bytes,
64:c.floatFrom8Bytes}[this.bitDepth_](a.slice(b+8,b+8+this.subChunk2Size))};f.exports.Wavefile=g},function(f,g,h){g=h(3);var c=h(4);f.exports.floatTo8Bytes=g.floatTo8Bytes;f.exports.floatTo4Bytes=g.floatTo4Bytes;f.exports.intTo5Bytes=g.intTo5Bytes;f.exports.intTo4Bytes=g.intTo4Bytes;f.exports.intTo3Bytes=g.intTo3Bytes;f.exports.intTo2Bytes=g.intTo2Bytes;f.exports.intTo1Byte=g.intTo1Byte;f.exports.stringToBytes=g.stringToBytes;f.exports.intFrom1Byte=c.intFrom1Byte;f.exports.uIntFrom1Byte=c.uIntFrom1Byte;
f.exports.intFrom2Bytes=c.intFrom2Bytes;f.exports.uIntFrom2Bytes=c.uIntFrom2Bytes;f.exports.intFrom3Bytes=c.intFrom3Bytes;f.exports.uIntFrom3Bytes=c.uIntFrom3Bytes;f.exports.intFrom4Bytes=c.intFrom4Bytes;f.exports.uIntFrom4Bytes=c.uIntFrom4Bytes;f.exports.floatFrom4Bytes=c.floatFrom4Bytes;f.exports.floatFrom8Bytes=c.floatFrom8Bytes;f.exports.stringFromBytes=c.stringFromBytes;f.exports.findString=function(a,b){for(var d,m=0;m<a.length;m++)if(d=c.stringFromBytes(a.slice(m,m+b.length)),d==b)return m;
return-1}},function(f,g,h){var c=h(0);f.exports.floatTo8Bytes=function(a){for(var b=0,d=0,c=a.length,e=[];b<c;){if(0==a[b])e[d++]=0,e[d++]=0,e[d++]=0,e[d++]=0,e[d++]=0,e[d++]=0,e[d++]=0,e[d++]=0;else{var f=b,g=a[b],h=0;0>=g&&(h=2147483648,g=-g);var k=Math.floor(Math.log(g)/Math.log(2)),l=Math.floor(g/Math.pow(2,k)*Math.pow(2,52));g=l&4294967295;l/=Math.pow(2,32);h=h|k+1023<<20|l&1048575;a[f]=[h,g];e[d++]=a[b][1]&255;e[d++]=a[b][1]>>8&255;e[d++]=a[b][1]>>16&255;e[d++]=a[b][1]>>24&255;e[d++]=a[b][0]&
255;e[d++]=a[b][0]>>8&255;e[d++]=a[b][0]>>16&255;e[d++]=a[b][0]>>24&255}b++}return e};f.exports.floatTo4Bytes=function(a){for(var b=0,d=0,m=a.length,e=[];b<m;)a[b]=c.unpack(a[b]),e[d++]=a[b]&255,e[d++]=a[b]>>8&255,e[d++]=a[b]>>16&255,e[d++]=a[b]>>24&255,b++;return e};f.exports.intTo4Bytes=function(a){for(var b=0,d=0,c=a.length,e=[];b<c;)e[d++]=a[b]&255,e[d++]=a[b]>>8&255,e[d++]=a[b]>>16&255,e[d++]=a[b]>>24&255,b++;return e};f.exports.intTo3Bytes=function(a){for(var b=0,d=0,c=a.length,e=[];b<c;)e[d++]=
a[b]&255,e[d++]=a[b]>>8&255,e[d++]=a[b]>>16&255,b++;return e};f.exports.intTo2Bytes=function(a){for(var b=0,d=0,c=a.length,e=[];b<c;)e[d++]=a[b]&255,e[d++]=a[b]>>8&255,b++;return e};f.exports.intTo1Byte=function(a){for(var b=0,d=0,c=a.length,e=[];b<c;)e[d++]=a[b]&255,b++;return e};f.exports.stringToBytes=function(a){for(var b=0,d=0,c=a.length,e=[];b<c;)e[d++]=a.charCodeAt(b),b++;return e}},function(f,g,h){var c=h(0);f.exports.intFrom1Byte=function(a){for(var b=[],d=0,c=a.length;d<c;)b[d]=a[d],127<
b[d]&&(b[d]-=256),d+=1;return b};f.exports.uIntFrom1Byte=function(a){return a.slice()};f.exports.intFrom2Bytes=function(a){for(var b=[],d=0,c=0,e=a.length;d<e;)b[c]=a[1+d]<<8|a[d],a[1+d]&128&&(b[c]|=4294901760),c++,d+=2;return b};f.exports.uIntFrom2Bytes=function(a){for(var b=[],d=0,c=0,e=a.length;d<e;)b[c]=a[1+d]<<8|a[d],c++,d+=2;return b};f.exports.intFrom3Bytes=function(a){for(var b=[],d=0,c=0,e=a.length;d<e;)b[c]=a[2+d]<<16|a[1+d]<<8|a[d],b[c]=0<(b[c]&8388608)?b[c]|4278190080:b[c]&16777215,c++,
d+=3;return b};f.exports.uIntFrom3Bytes=function(a){for(var b=[],d=0,c=0,e=a.length;d<e;)b[c]=a[2+d]<<16|a[1+d]<<8|a[d],c++,d+=3;return b};f.exports.intFrom4Bytes=function(a){for(var b=[],d=0,c=0,e=a.length;d<e;)b[c]=a[3+d]<<24|a[2+d]<<16|a[1+d]<<8|a[d],0>(b[c]&2147483648)&&(b[c]&=4294967295),c++,d+=4;return b};f.exports.uIntFrom4Bytes=function(a){for(var b=[],d=0,c=0,e=a.length;d<e;)b[c]=a[3+d]<<24|a[2+d]<<16|a[1+d]<<8|a[d],b[c]>>>=0,c++,d+=4;return b};f.exports.floatFrom4Bytes=function(a){for(var b=
[],d=0,f=0,e=a.length;d<e;)b[f]=c.pack(a[3+d]<<24|a[2+d]<<16|a[1+d]<<8|a[d]),f++,d+=4;return b};f.exports.floatFrom8Bytes=function(a){for(var b=[],d=0,c=0,e=a.length;d<e;){var f=c;var g,h=[a[d],a[1+d],a[2+d],a[3+d],a[4+d],a[5+d],a[6+d],a[7+d]];if("0,0,0,0,0,0,0,0"==h.toString())var k=0;else{k="";for(var l=0,n=h.length;l<n;){for(g=h[l].toString(2);8>g.length;)g="0"+g;k=g+k;l++}g="1"+k.substr(12,52);h=1;for(l=n=0;l<g.length;)n+=h*parseInt(g.charAt(l),10),h/=2,l++;k=("1"==k.charAt(0)?-1:1)*n*Math.pow(2,
parseInt(k.substr(1,11),2)-1023);k=2===k?0:k}b[f]=k;c++;d+=8}return b};f.exports.stringFromBytes=function(a){for(var b="",d=0,c=a.length;d<c;)b+=String.fromCharCode(a[d]),d++;return b}}]);
