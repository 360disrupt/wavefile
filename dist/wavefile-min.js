/*
 byte-data
 Readable data to and from byte buffers.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

 endianness
 Swap endianness in byte arrays.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/endianness

 alawmulaw
 JavaScript A-Law and mu-Law codecs.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/alawmulaw

 wavefile
 Read & write wave files with 4, 8, 16, 24, 32 & 64-bit data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/wavefile

 bitdepth
 Change the bit depth of samples to and from 8, 16, 24, 32 & 64-bit.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/bitdepth

 riff-chunks
 Read and write the chunks of RIFF and RIFX files.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/riff-chunks

 imaadpcm
 JavaScript IMA ADPCM codec.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/imaadpcm

 References:
 http://www.cs.columbia.edu/~hgs/audio/dvi/
 https://github.com/acida/pyima
 https://wiki.multimedia.cx/index.php/IMA_ADPCM

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(g){var a=function(){};a.prototype=g;return new a};$jscomp.underscoreProtoCanBeSet=function(){var g={a:!0},a={};try{return a.__proto__=g,a.a}catch(h){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(g,a){g.__proto__=a;if(g.__proto__!==a)throw new TypeError(g+" is not extensible");return g}:null;
$jscomp.inherits=function(g,a){g.prototype=$jscomp.objectCreate(a.prototype);g.prototype.constructor=g;if($jscomp.setPrototypeOf){var h=$jscomp.setPrototypeOf;h(g,a)}else for(h in a)if("prototype"!=h)if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(a,h);c&&Object.defineProperty(g,h,c)}else g[h]=a[h];g.superClass_=a.prototype};$jscomp.owns=function(g,a){return Object.prototype.hasOwnProperty.call(g,a)};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(g,a,h){g!=Array.prototype&&g!=Object.prototype&&(g[a]=h.value)};$jscomp.getGlobal=function(g){return"undefined"!=typeof window&&window===g?g:"undefined"!=typeof global&&null!=global?global:g};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(g,a,h,c){if(a){h=$jscomp.global;g=g.split(".");for(c=0;c<g.length-1;c++){var k=g[c];k in h||(h[k]={});h=h[k]}g=g[g.length-1];c=h[g];a=a(c);a!=c&&null!=a&&$jscomp.defineProperty(h,g,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Object.assign",function(g){return g?g:function(a,h){for(var c=1;c<arguments.length;c++){var k=arguments[c];if(k)for(var e in k)$jscomp.owns(k,e)&&(a[e]=k[e])}return a}},"es6","es3");
$jscomp.polyfill("Object.is",function(g){return g?g:function(a,h){return a===h?0!==a||1/a===1/h:a!==a&&h!==h}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(g){return g?g:function(a,h){var c=this;c instanceof String&&(c=String(c));var k=c.length;for(h=h||0;h<k;h++)if(c[h]==a||Object.is(c[h],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(g,a,h){if(null==g)throw new TypeError("The 'this' value for String.prototype."+h+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");return g+""};$jscomp.polyfill("String.prototype.includes",function(g){return g?g:function(a,h){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,h||0)}},"es6","es3");
(function(g){function a(c){if(h[c])return h[c].exports;var k=h[c]={i:c,l:!1,exports:{}};g[c].call(k.exports,k,k.exports,a);k.l=!0;return k.exports}var h={};a.m=g;a.c=h;a.d=function(c,k,e){a.o(c,k)||Object.defineProperty(c,k,{configurable:!1,enumerable:!0,get:e})};a.n=function(c){var k=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(k,"a",k);return k};a.o=function(a,k){return Object.prototype.hasOwnProperty.call(a,k)};a.p="";return a(a.s=6)})([function(g,a,h){function c(a,
b,f){f=void 0===f?10:f;var d=[];b.char?d=b.char?a.slice(0,b.realBits/8):a:Array.isArray(a)||(d=[a]);return e.toBytes(d,e.getType(b,f))}function k(a,b,f){f=void 0===f?10:f;a=e.fromBytes(a.slice(0,8>b.bits?b.bits:b.realBits/8),e.getType(b,f));return a=b.char?a.slice(0,b.bits/8):a[0]}var e=h(7),b=h(1);a.pack=c;a.unpack=k;a.packArray=function(a,b,f){return e.toBytes(a,e.getType(b,void 0===f?10:f))};a.unpackArray=function(a,b,f){return e.fromBytes(a,e.getType(b,void 0===f?10:f))};a.unpackStruct=function(a,
b,f){f=void 0===f?10:f;for(var d=a.length,m=0,e=0;e<b.length;e++)m+=b[e].realBits/8;if(d<m)return[];d=[];for(e=m=0;m<b.length;){var c=8>b[m].bits?1:b[m].realBits/8;d=d.concat(k(a.slice(e,e+c),b[m],f));e+=c;m++}return d};a.packStruct=function(a,b,f){f=void 0===f?10:f;if(a.length<b.length)return[];for(var d=[],m=0;m<b.length;m++)d=d.concat(c(a[m],b[m],f));return d};a.findString=function(a,e){for(var f,d=0;d<a.length;d++)if(f=k(a.slice(d,d+e.length+1),new b({bits:8*e.length,"char":!0})),f==e)return d;
return-1};a.Type=b;a.chr=new b({bits:8,"char":!0});a.fourCC=new b({bits:32,"char":!0});a.bool=new b({bits:1});a.int2=new b({bits:2,signed:!0});a.uInt2=new b({bits:2});a.int4=new b({bits:4,signed:!0});a.uInt4=new b({bits:4});a.int8=new b({bits:8,signed:!0});a.uInt8=new b({bits:8});a.int16=new b({bits:16,signed:!0});a.uInt16=new b({bits:16});a.float16=new b({bits:16,"float":!0});a.int24=new b({bits:24,signed:!0});a.uInt24=new b({bits:24});a.int32=new b({bits:32,signed:!0});a.uInt32=new b({bits:32});
a.float32=new b({bits:32,"float":!0});a.int40=new b({bits:40,signed:!0});a.uInt40=new b({bits:40});a.int48=new b({bits:48,signed:!0});a.uInt48=new b({bits:48});a.float64=new b({bits:64,"float":!0});a.int16BE=new b({bits:16,signed:!0,be:!0});a.uInt16BE=new b({bits:16,be:!0});a.float16BE=new b({bits:16,"float":!0,be:!0});a.int24BE=new b({bits:24,signed:!0,be:!0});a.uInt24BE=new b({bits:24,be:!0});a.int32BE=new b({bits:32,signed:!0,be:!0});a.uInt32BE=new b({bits:32,be:!0});a.float32BE=new b({bits:32,
"float":!0,be:!0});a.int40BE=new b({bits:40,signed:!0,be:!0});a.uInt40BE=new b({bits:40,be:!0});a.int48BE=new b({bits:48,signed:!0,be:!0});a.uInt48BE=new b({bits:48,be:!0});a.float64BE=new b({bits:64,"float":!0,be:!0})},function(g,a,h){var c=new Float32Array(1),k=new Int32Array(c.buffer),e=new Float64Array(1),b=new Uint32Array(e.buffer),l=h(8);a=function(a){var b=l.call(this,a)||this;b.char=a["char"];b.float=a["float"];b.buildType_();return b};$jscomp.inherits(a,l);a.BitDepthMaxValues=l.BitDepthMaxValues;
a.toBitDepth=l.toBitDepth;a.prototype.read16F_=function(a,b){a=this.read_(a,b,{bits:16,offset:2});b=(a&31744)>>10;var d=a&1023;return(b?Math.pow(2,b-15)*(1+d/1024):d/1024*.00006103515625)*(a>>15?-1:1)};a.prototype.read32F_=function(a,b){k[0]=this.read_(a,b,{bits:32,offset:4});return c[0]};a.prototype.read64F_=function(a,f){b[0]=this.read_(a,f,{bits:32,offset:4});b[1]=this.read_(a,f+4,{bits:32,offset:4});return e[0]};a.prototype.readChar_=function(a,b){for(var d="",m=0;m<this.offset;)d+=String.fromCharCode(a[b+
m]),m++;return d};a.prototype.write64F_=function(a,f,d){e[0]=f;f={bits:32,offset:4,lastByteMask:255};d=this.write_(a,b[0],d,f);return this.write_(a,b[1],d,f)};a.prototype.write32F_=function(a,b,d,m){c[0]=b;return d=this.write_(a,k[0],d,m)};a.prototype.write16F_=function(a,b,d){c[0]=b;var m=k[0];b=m>>16&32768;var f=m>>12&2047;m=m>>23&255;103<=m&&(b=(b|m-112<<10|f>>1)+(f&1));a[d++]=b&255;a[d++]=b>>>8&255;return d};a.prototype.writeChar_=function(a,b,d){a[d++]=b.charCodeAt(0);return d};a.prototype.buildType_=
function(){this.setReader_();this.setWriter_();this.float&&(this.min=-Infinity,this.max=Infinity)};a.prototype.setReader_=function(){this.float?16==this.bits?this.reader=this.read16F_:32==this.bits?this.reader=this.read32F_:64==this.bits&&(this.reader=this.read64F_):this.char?this.reader=this.readChar_:32<this.bits&&(this.reader=this.readBits_)};a.prototype.setWriter_=function(){this.float?16==this.bits?this.writer=this.write16F_:32==this.bits?this.writer=this.write32F_:64==this.bits&&(this.writer=
this.write64F_):this.char&&(this.writer=this.writeChar_)};g.exports=a},function(g,a){g.exports=function(a,c){for(var k=a.length,e=0;e<k;){for(var b=a,l=e,h=0,f=c-1,d=parseInt(c/2,10);h<d;){var m=b[l+h];b[l+h]=b[l+f];b[l+f]=m;h++;f--}e+=c}}},function(g,a){g.exports={format:"Not a supported format.",wave:"Could not find the 'WAVE' format identifier","fmt ":"Could not find the 'fmt ' chunk",data:"Could not find the 'data' chunk",fact:"Could not find the 'fact' chunk",bitDepth:"Invalid bit depth.",numChannels:"Invalid number of channels.",
sampleRate:"Invalid sample rate."}},function(g,a,h){var c=h(15);a=function(a){this.bits=a.bits;this.char=a["char"];this.float=a["float"];this.be=a.be;this.signed=this.float?!0:a.signed;this.writer=this.reader=null;this.offset=0;this.base=a.base?a.base:10;this.min=-Infinity;this.max=Infinity;this.build_();this.realBits=this.bits};a.prototype.sign=function(a){a>this.max&&(a-=2*this.max+2);return a};a.prototype.overflow=function(a){a>this.max?a=this.max:a<this.min&&(a=this.min);return a};a.prototype.build_=
function(){this.setRealBits_();this.offset=8>this.bits?1:this.realBits/8;this.setReader_();this.setWriter_();this.float||this.setMinMax_()};a.prototype.setReader_=function(){this.reader=this.char?c.BitReader.readChar:c.BitReader["read"+(8>this.bits?8:this.realBits)+"Bit"+(this.float?"Float":"")]};a.prototype.setWriter_=function(){this.writer=this.char?c.BitWriter.writeString:c.BitWriter["write"+this.realBits+"Bit"+(this.float?"Float":"")]};a.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);
this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};a.prototype.setRealBits_=function(){this.realBits=8<this.bits?16>=this.bits?16:24>=this.bits?24:32>=this.bits?32:40>=this.bits?40:48>=this.bits?48:53>=this.bits?53:64:this.bits};g.exports=a},function(g,a,h){g.exports.alaw=h(17);g.exports.mulaw=h(18)},function(g,a,h){h(0);var c=h(9),k=h(3),e=h(10),b=h(12),l=h(16),n=h(5).alaw,f=h(5).mulaw;g=function(d){var a=e.call(this)||this;d&&a.fromBuffer(d);return a};$jscomp.inherits(g,e);g.prototype.fromScratch=
function(d,a,b,f,e){e=void 0===e?{}:e;this.validBitsPerSample=this.cbSize=0;this.factChunkId="";this.factChunkSize=0;this.factChunkData=[];this.dwSampleLength=0;e.container||(e.container="RIFF");var m=parseInt(b,10)/8;this.chunkSize=36+f.length*m;this.fmtChunkSize=16;this.byteRate=d*m*a;this.blockAlign=d*m;this.chunkId=e.container;this.format="WAVE";this.fmtChunkId="fmt ";this.audioFormat=this.headerFormats_[b];this.numChannels=d;this.sampleRate=a;this.bitsPerSample=parseInt(b,10);this.dataChunkId=
"data";this.dataChunkSize=f.length*m;this.samples=f;this.bitDepth=b;"4"==b&&(this.chunkSize=44+f.length,this.fmtChunkSize=20,this.byteRate=4055,this.blockAlign=256,this.bitsPerSample=4,this.dataChunkSize=f.length,this.cbSize=2,this.validBitsPerSample=505,this.factChunkId="fact",this.factChunkSize=4,this.dwSampleLength=2*f.length);if("8a"==b||"8m"==b)this.chunkSize=44+f.length,this.fmtChunkSize=20,this.cbSize=2,this.validBitsPerSample=8,this.factChunkId="fact",this.factChunkSize=4,this.dwSampleLength=
f.length};g.prototype.fromBuffer=function(d){this.readRIFFChunk_(d);var a="RIFX"==this.chunkId;d=b.read(d,a);this.readFmtChunk_(d.subChunks);this.readFactChunk_(d.subChunks);this.readBextChunk_(d.subChunks);this.readCueChunk_(d.subChunks);this.readDataChunk_(d.subChunks,{be:a,single:!0});this.bitDepth=3==this.audioFormat&&32==this.bitsPerSample?"32f":this.bitsPerSample.toString()};g.prototype.toBuffer=function(){this.checkWriteInput_();return new Uint8Array(this.createWaveFile_())};g.prototype.toRIFF=
function(){this.chunkId="RIFF";this.LEorBE()};g.prototype.toRIFX=function(){this.chunkId="RIFX";this.LEorBE()};g.prototype.toBitDepth=function(d){c.toBitDepth(this.samples,this.bitDepth,d);this.fromScratch(this.numChannels,this.sampleRate,d,this.samples,{container:this.chunkId})};g.prototype.interleave=function(){var d=[],a,b,f=this.samples[0].length;for(a=0;a<f;a++)for(b=0;b<this.samples.length;b++)d.push(this.samples[b][a]);this.samples=d};g.prototype.deInterleave=function(){var d=[],a;for(a=0;a<
this.numChannels;a++)d[a]=[];a=0;for(var b;a<this.samples.length;){for(b=0;b<this.numChannels;b++)d[b].push(this.samples[a+b]);a+=b}this.samples=d};g.prototype.toIMAADPCM=function(){this.fromScratch(this.numChannels,this.sampleRate,"4",l.encode(this.samples),{container:this.chunkId})};g.prototype.fromIMAADPCM=function(d){this.fromScratch(this.numChannels,this.sampleRate,"16",l.decode(this.samples,void 0===d?256:d),{container:this.chunkId})};g.prototype.toALaw=function(){this.fromScratch(this.numChannels,
this.sampleRate,"8a",n.encode(this.samples),{container:this.chunkId})};g.prototype.fromALaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"16",n.decode(this.samples),{container:this.chunkId})};g.prototype.toMuLaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"8m",f.encode(this.samples),{container:this.chunkId})};g.prototype.fromMuLaw=function(){this.fromScratch(this.numChannels,this.sampleRate,"16",f.decode(this.samples),{container:this.chunkId})};g.prototype.checkWriteInput_=
function(){this.validateBitDepth_();this.validateNumChannels_();this.validateSampleRate_()};g.prototype.validateBitDepth_=function(){if(!this.headerFormats_[this.bitDepth])throw Error(k.bitDepth);return!0};g.prototype.validateNumChannels_=function(){var d=this.numChannels*this.bitsPerSample/8;if(1>this.numChannels||65535<d)throw Error(k.numChannels);return!0};g.prototype.validateSampleRate_=function(){var d=this.bitsPerSample/8*this.numChannels*this.sampleRate;if(1>this.sampleRate||4294967295<d)throw Error(k.sampleRate);
return!0};window.WaveFile=g},function(g,a,h){var c=h(1),k=h(2);a.getType=function(a,b){a=Object.assign(new c({}),a);a.base=b;return a};a.toBytes=function(a,b){for(var e=0,c=0,f=a.length,d=[];e<f;)c=b.writer(d,a[e++],c);b.be&&k(d,b.offset);if(10!=b.base){a=b.base;e=0;for(c=d.length;e<c;)d[e]=d[e].toString(a),e++;a=0;e=d.length;for(b=(2==b.base?8:2)+1;a<e;)d[a]=Array(b-d[a].length).join("0")+d[a],a++}return d};a.fromBytes=function(a,b){b.be&&k(a,b.offset);if(10!=b.base)for(var e=b.base,c=0,f=a.length;c<
f;)a[c]=parseInt(a[c],e),c++;e=[];c=0;for(f=a.length-(b.offset-1);c<f;)e.push(b.reader(a,c)),c+=b.offset;b.char&&(e=e.join(""));return e}},function(g,a){a=function(a){this.bits=a.bits;this.be=a.be;this.signed=a.signed;this.base=a.base?a.base:10;this.reader=this.read_;this.writer=this.write_;this.offset=0;this.min=-Infinity;this.max=Infinity;this.realBits=this.bits;this.lastByteMask=255;this.build_()};a.prototype.sign=function(a){a>this.max&&(a-=2*this.max+2);return a};a.prototype.overflow=function(a){a>
this.max?a=this.max:a<this.min&&(a=this.min);return a};a.prototype.read_=function(a,c,k){var e=0;for(k=(void 0===k?this:k).offset-1;0<k;)e|=a[k+c]<<8*k,k--;e=(a[c]|e)>>>0;return this.overflow(this.sign(e))};a.prototype.readBits_=function(a,c,k){k=void 0===k?this:k;for(var e="",b=0;b<k.offset;){var g=a[c+b].toString(2);e=Array(9-g.length).join("0")+g+e;b++}return this.overflow(this.sign(parseInt(e,2)))};a.prototype.write_=function(a,c,k,e){e=void 0===e?this:e;c=this.overflow(c);var b=255,g=e.offset;
k=this.writeFirstByte_(a,c,k,e);for(var h=2;h<=g;h++)h==g&&(b=e.lastByteMask),a[k++]=Math.floor(c/Math.pow(2,8*(h-1)))&b;return k};a.prototype.build_=function(){this.validateWordSize_();this.setRealBits_();this.setLastByteMask_();this.setMinMax_();this.offset=8>this.bits?1:Math.ceil(this.realBits/8)};a.prototype.setMinMax_=function(){var a=Math.pow(2,this.bits);this.signed?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};a.prototype.validateWordSize_=function(){if(1>this.bits||64<this.bits)throw Error("Not a supported type.");
};a.prototype.setRealBits_=function(){this.realBits=8<this.bits?16>=this.bits?16:24>=this.bits?24:32>=this.bits?32:40>=this.bits?40:48>=this.bits?48:56>=this.bits?56:64:this.bits};a.prototype.setLastByteMask_=function(){var a=8-(this.realBits-this.bits);this.lastByteMask=Math.pow(2,0<a?a:8)-1};a.prototype.writeFirstByte_=function(a,c,k,e){e=void 0===e?this:e;8>e.bits?a[k++]=0>c?c+Math.pow(2,e.bits):c:a[k++]=c&255;return k};g.exports=a},function(g,a){var h=new Float32Array(1),c={8:256,16:65536,24:16777216,
32:4294967296,"32f":1,64:1},k={intToInt:function(a,b){return a=0<a?parseInt(a/b.oldPositive*b.newPositive,10):parseInt(a/b.oldNegative*b.newNegative,10)},floatToInt:function(a,b){return 0<a?a*b.newPositive:a*b.newNegative},intToFloat:function(a,b){return 0<a?a/b.oldPositive:a/b.oldNegative},floatToFloat:function(a,b){"64"==b.original&&"32f"==b.target&&(h[0]=a,a=h[0]);return a}};g.exports.toBitDepth=function(a,b,g){var e="8 16 24 32 32f 64".split(" ");if(-1==e.indexOf(b)||-1==e.indexOf(g))throw Error("Invalid bit depth.");
e=["32f","64"].includes(b)?"float":"int";var f=["32f","64"].includes(g)?"Float":"Int";e=k[e+"To"+f];f=a.length;for(var d=0;d<f;d++){var m=d,l=a[d];"8"==b&&(l-=128);a[m]=l;a[d]=e(a[d],{oldNegative:c[b]/2,newNegative:c[g]/2,oldPositive:c[b]/2-1,newPositive:c[g]/2-1,original:b,target:g});m=d;l=a[d];"8"==g&&(l+=128);a[m]=l}};g.exports.BitDepthMaxValues=c},function(g,a,h){var c=h(0),k=h(3),e=c.uInt8,b=c.uInt16,l=c.uInt32,n=c.chr,f=h(11);a=function(){var a=f.call(this)||this;a.headerFormats_={4:17,8:1,
"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3};a.samples=[];a.head_=0;return a};$jscomp.inherits(a,f);a.decodeSample=f.decodeSample;a.encodeSample=f.encodeSample;a.decodeBlock=f.decodeBlock;a.encodeBlock=f.encodeBlock;a.decode=f.decode;a.encode=f.encode;a.write=f.write;a.read=f.read;a.prototype.readRIFFChunk_=function(a){this.chunkId=c.unpackArray(a.slice(0,4),n);if("RIFF"!=this.chunkId&&"RIFX"!=this.chunkId)throw Error(k.format);this.LEorBE();this.chunkSize=c.unpack(a.slice(4,8),l);this.format=c.unpackArray(a.slice(8,
12),n);if("WAVE"!=this.format)throw Error(k.wave);};a.prototype.LEorBE=function(){var a="RIFX"==this.chunkId;e.be=a;b.be=a;return l.be=a};a.prototype.readFmtChunk_=function(a){if(a=this.findChunk(a,"fmt "))this.fmtChunkId="fmt ",this.fmtChunkSize=a.chunkSize,this.audioFormat=c.unpack(a.chunkData.slice(0,2),b),this.numChannels=c.unpack(a.chunkData.slice(2,4),b),this.sampleRate=c.unpack(a.chunkData.slice(4,8),l),this.byteRate=c.unpack(a.chunkData.slice(8,12),l),this.blockAlign=c.unpack(a.chunkData.slice(12,
14),b),this.bitsPerSample=c.unpack(a.chunkData.slice(14,16),b),this.readFmtExtension(a);else throw Error(k["fmt "]);};a.prototype.readFmtExtension=function(a){16<this.fmtChunkSize&&(this.cbSize=c.unpack(a.chunkData.slice(16,18),b),18<this.fmtChunkSize&&(this.validBitsPerSample=c.unpack(a.chunkData.slice(18,20),b)))};a.prototype.readFactChunk_=function(a){if(a=this.findChunk(a,"fact"))this.factChunkId="fact",this.factChunkSize=a.chunkSize,this.dwSampleLength=c.unpack(a.chunkData.slice(0,4),l);else if(this.enforceFact)throw Error(k.fact);
};a.prototype.readBextChunk_=function(a){if(a=this.findChunk(a,"bext"))this.bextChunkId="bext",this.bextChunkSize=a.chunkSize,this.bextChunkData=a.chunkData,this.readBextChunkFields_()};a.prototype.readBextChunkFields_=function(){this.head_=0;this.bextChunkFields={description:this.readVariableSizeString_(this.bextChunkData,256),originator:this.readVariableSizeString_(this.bextChunkData,32),originatorReference:this.readVariableSizeString_(this.bextChunkData,32),originationDate:this.readVariableSizeString_(this.bextChunkData,
10),originationTime:this.readVariableSizeString_(this.bextChunkData,8),timeReference:this.readBytes(this.bextChunkData,8),version:this.readFromChunk_(this.bextChunkData,b),UMID:this.readVariableSizeString_(this.bextChunkData,64),loudnessValue:this.readFromChunk_(this.bextChunkData,b),loudnessRange:this.readFromChunk_(this.bextChunkData,b),maxTruePeakLevel:this.readFromChunk_(this.bextChunkData,b),maxMomentaryLoudness:this.readFromChunk_(this.bextChunkData,b),maxShortTermLoudness:this.readFromChunk_(this.bextChunkData,
b),reserved:this.readVariableSizeString_(this.bextChunkData,180),codingHistory:this.readVariableSizeString_(this.bextChunkData,this.bextChunkData.length-602)}};a.prototype.readBytes=function(a,b){var d=this.head_;this.head_+=b;return a.slice(d,this.head_)};a.prototype.readVariableSizeString_=function(a,b){for(var d="",f=0;f<b;f++)d+=c.unpack([a[this.head_]],n),this.head_++;return d};a.prototype.readFromChunk_=function(a,b){var d=b.bits/8;a=c.unpack(a.slice(this.head_,this.head_+d),b);this.head_+=
d;return a};a.prototype.writeVariableSizeString_=function(a,b){a=c.packArray(a,n);for(var d=a.length;d<b;d++)a.push(0);return a};a.prototype.readCueChunk_=function(a){if(a=this.findChunk(a,"cue "))this.cueChunkId="cue ",this.cueChunkSize=a.chunkSize,this.cueChunkData=a.chunkData};a.prototype.readDataChunk_=function(a,b){if(a=this.findChunk(a,"data"))this.dataChunkId="data",this.dataChunkSize=a.chunkSize,this.samplesFromBytes_(a.chunkData,b);else throw Error(k.data);};a.prototype.samplesFromBytes_=
function(a,b){b.bits=4==this.bitsPerSample?8:this.bitsPerSample;b.signed=8==b.bits?!1:!0;b.float=3==this.audioFormat||64==this.bitsPerSample?!0:!1;b.single=!1;this.samples=c.unpackArray(a,new c.Type(b))};a.prototype.findChunk=function(a,b){for(var d=0;d<a.length;d++)if(a[d].chunkId==b)return a[d];return null};a.prototype.samplesToBytes_=function(a){a.bits=4==this.bitsPerSample?8:this.bitsPerSample;a.signed=8==a.bits?!1:!0;a.float=3==this.audioFormat||64==this.bitsPerSample?!0:!1;a=c.packArray(this.samples,
new c.Type(a));a.length%2&&a.push(0);return a};a.prototype.getBextBytes_=function(){if(this.bextChunkId){var a=[].concat(this.writeVariableSizeString_(this.bextChunkFields.description,256));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originator,32));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originatorReference,32));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originationDate,10));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.originationTime,
8));a=a.concat(this.bextChunkFields.timeReference);a=a.concat(c.pack(this.bextChunkFields.version,b));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.UMID,64));a=a.concat(c.pack(this.bextChunkFields.loudnessValue,b));a=a.concat(c.pack(this.bextChunkFields.loudnessRange,b));a=a.concat(c.pack(this.bextChunkFields.maxTruePeakLevel,b));a=a.concat(c.pack(this.bextChunkFields.maxMomentaryLoudness,b));a=a.concat(c.pack(this.bextChunkFields.maxShortTermLoudness,b));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.reserved,
180));a=a.concat(this.writeVariableSizeString_(this.bextChunkFields.codingHistory,this.bextChunkData.length-602));return[].concat(c.packArray(this.bextChunkId,n),c.pack(a.length,l),a)}return[]};a.prototype.getCueBytes_=function(){return this.cueChunkId?[].concat(c.packArray(this.cueChunkId,n),c.pack(this.cueChunkSize,l),this.cueChunkData):[]};a.prototype.getFactBytes_=function(){return this.factChunkId?[].concat(c.packArray(this.factChunkId,n),c.pack(this.factChunkSize,l),c.pack(this.dwSampleLength,
l)):[]};a.prototype.getCbSizeBytes_=function(){return 16<this.fmtChunkSize?c.pack(this.cbSize,b):[]};a.prototype.getValidBitsPerSampleBytes_=function(){return 18<this.fmtChunkSize?c.pack(this.validBitsPerSample,b):[]};a.prototype.createWaveFile_=function(){var a={be:this.LEorBE()};return c.packArray(this.chunkId,n).concat(c.pack(this.chunkSize,l),c.packArray(this.format,n),this.getBextBytes_(),c.packArray(this.fmtChunkId,n),c.pack(this.fmtChunkSize,l),c.pack(this.audioFormat,b),c.pack(this.numChannels,
b),c.pack(this.sampleRate,l),c.pack(this.byteRate,l),c.pack(this.blockAlign,b),c.pack(this.bitsPerSample,b),this.getCbSizeBytes_(),this.getValidBitsPerSampleBytes_(),this.getFactBytes_(),c.packArray(this.dataChunkId,n),c.pack(this.dataChunkSize,l),this.samplesToBytes_(a),this.getCueBytes_())};g.exports=a},function(g,a){g.exports=function(){this.chunkId="";this.chunkSize=0;this.fmtChunkId=this.format="";this.validBitsPerSample=this.cbSize=this.bitsPerSample=this.blockAlign=this.byteRate=this.sampleRate=
this.numChannels=this.audioFormat=this.fmtChunkSize=0;this.factChunkId="";this.factChunkSize=0;this.factChunkData=[];this.dwSampleLength=0;this.cueChunkId="";this.cueChunkSize=-1;this.cueChunkData=[];this.dataChunkId="";this.dataChunkSize=0;this.bextChunkId="";this.bextChunkSize=0;this.bextChunkData=[];this.bextChunkFields={description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReferenceLow:"",timeReferenceHigh:"",version:"","UMID_0 ":"","UMID_63 ":"",loudnessValue:"",
loudnessRange:"",maxTruePeakLevel:"",maxMomentaryLoudness:"",maxShortTermLoudness:"",reserved:"",codingHistory:""}}},function(g,a,h){function c(a,b){(void 0===b?0:b)||(n.be="RIFX"==a.chunkId);b=l.packArray(a.chunkId,f).concat(l.pack(a.chunkSize,n),l.packArray(a.format,f),k(a.subChunks,n.be));if("RIFF"==a.chunkId||"RIFX"==a.chunkId)b=new Uint8Array(b);return b}function k(a,b){for(var d=[],e=0;e<a.length;)d="LIST"==a[e].chunkId?d.concat(c(a[e],b)):d.concat(l.packArray(a[e].chunkId,f),l.pack(a[e].chunkSize,
n),a[e].chunkData),e++;return d}function e(a){for(var d=[],f=12;f<a.length;)d.push(b(a,f)),f+=8+d[d.length-1].chunkSize;return d}function b(a,b){var d={chunkId:l.unpackArray(a.slice(b,b+4),f),chunkSize:l.unpack(a.slice(b+4,b+8),n)};"LIST"==d.chunkId?(d.format=l.unpackArray(a.slice(8,12),f),d.subChunks=e(a.slice(b,b+d.chunkSize))):d.chunkData=a.slice(b+8,b+8+d.chunkSize);return d}var l=h(13),n=l.uInt32,f=l.chr;g.exports.read=function(a){a=[].slice.call(a);var b=l.unpackArray(a.slice(0,4),f);n.be="RIFX"==
b;return{chunkId:b,chunkSize:l.unpack(a.slice(4,8),n),format:l.unpackArray(a.slice(8,12),f),subChunks:e(a)}};g.exports.write=c},function(g,a,h){function c(a,b,f){f=void 0===f?10:f;var d=[];b.char?d=b.char?a.slice(0,b.realBits/8):a:Array.isArray(a)||(d=[a]);return e.toBytes(d,e.getType(b,f))}function k(a,b,f){f=void 0===f?10:f;a=e.fromBytes(a.slice(0,8>b.bits?b.bits:b.realBits/8),e.getType(b,f));return a=b.char?a.slice(0,b.bits/8):a[0]}var e=h(14),b=h(4);a.pack=c;a.unpack=k;a.packArray=function(a,
b,f){return e.toBytes(a,e.getType(b,void 0===f?10:f))};a.unpackArray=function(a,b,f){return e.fromBytes(a,e.getType(b,void 0===f?10:f))};a.unpackStruct=function(a,b,f){f=void 0===f?10:f;for(var d=a.length,c=0,e=0;e<b.length;e++)c+=b[e].realBits/8;if(d<c)return[];d=[];for(e=c=0;c<b.length;){var g=8>b[c].bits?1:b[c].realBits/8;d=d.concat(k(a.slice(e,e+g),b[c],f));e+=g;c++}return d};a.packStruct=function(a,b,f){f=void 0===f?10:f;if(a.length<b.length)return[];for(var d=[],e=0;e<b.length;e++)d=d.concat(c(a[e],
b[e],f));return d};a.findString=function(a,e){for(var f,d=0;d<a.length;d++)if(f=k(a.slice(d,d+e.length+1),new b({bits:8*e.length,"char":!0})),f==e)return d;return-1};a.Type=b;a.chr=new b({bits:8,"char":!0});a.fourCC=new b({bits:32,"char":!0});a.bool=new b({bits:1});a.int2=new b({bits:2,signed:!0});a.uInt2=new b({bits:2});a.int4=new b({bits:4,signed:!0});a.uInt4=new b({bits:4});a.int8=new b({bits:8,signed:!0});a.uInt8=new b({bits:8});a.int16=new b({bits:16,signed:!0});a.uInt16=new b({bits:16});a.float16=
new b({bits:16,"float":!0});a.int24=new b({bits:24,signed:!0});a.uInt24=new b({bits:24});a.int32=new b({bits:32,signed:!0});a.uInt32=new b({bits:32});a.float32=new b({bits:32,"float":!0});a.int40=new b({bits:40,signed:!0});a.uInt40=new b({bits:40});a.int48=new b({bits:48,signed:!0});a.uInt48=new b({bits:48});a.float64=new b({bits:64,"float":!0});a.int16BE=new b({bits:16,signed:!0,be:!0});a.uInt16BE=new b({bits:16,be:!0});a.float16BE=new b({bits:16,"float":!0,be:!0});a.int24BE=new b({bits:24,signed:!0,
be:!0});a.uInt24BE=new b({bits:24,be:!0});a.int32BE=new b({bits:32,signed:!0,be:!0});a.uInt32BE=new b({bits:32,be:!0});a.float32BE=new b({bits:32,"float":!0,be:!0});a.int40BE=new b({bits:40,signed:!0,be:!0});a.uInt40BE=new b({bits:40,be:!0});a.int48BE=new b({bits:48,signed:!0,be:!0});a.uInt48BE=new b({bits:48,be:!0});a.float64BE=new b({bits:64,"float":!0,be:!0})},function(g,a,h){var c=h(4),k=h(2);a.getType=function(a,b){a=Object.assign(new c({}),a);a.base=b;return a};a.toBytes=function(a,b){for(var c=
0,e=0,f=a.length,d=[];c<f;)e=b.writer(d,b.overflow(a[c]),e),c++;b.be&&k(d,b.offset);if(10!=b.base){a=b.base;c=0;for(e=d.length;c<e;)d[c]=d[c].toString(a),c++;a=0;c=d.length;for(b=8>b.realBits?(2==b.base?b.bits:5>b.bits?1:2)+1:(2==b.base?8:2)+1;a<c;)d[a]=Array(b-d[a].length).join("0")+d[a],a++}return d};a.fromBytes=function(a,b){b.be&&k(a,b.offset);if(10!=b.base)for(var c=b.base,e=0,f=a.length;e<f;)a[e]=parseInt(a[e],c),e++;c=[];e=0;for(f=a.length-(b.offset-1);e<f;)c.push(b.overflow(b.sign(b.reader(a,
e,b)))),e+=b.offset;b.char&&(c=c.join(""));return c}},function(g,a){function h(a,b,c){--c;for(var d="";0<=c;){var f=a[c+b].toString(2);d+=Array(9-f.length).join("0")+f;c--}return parseInt(d,2)}var c=new Float32Array(1),k=new Int32Array(c.buffer),e=new Float64Array(1),b=new Uint32Array(e.buffer),l={read8Bit:function(a,b){return a[b]},read16Bit:function(a,b){return a[1+b]<<8|a[b]},read16BitFloat:function(a,b){var d=parseInt;a=[a[b],a[b+1]];b="";for(var c=0,f=a.length;c<f;){var e=a[c].toString(2);b=
Array(9-e.length).join("0")+e+b;c++}d=d(b,2);a=(d&31744)>>10;b=d&1023;return(a?Math.pow(2,a-15)*(1+b/1024):b/1024*.00006103515625)*(d>>15?-1:1)},read24Bit:function(a,b){return a[2+b]<<16|l.read16Bit(a,b)},read32Bit:function(a,b){return(a[3+b]<<24|l.read24Bit(a,b))>>>0},read32BitFloat:function(a,b){k[0]=l.read32Bit(a,b);return c[0]},read40Bit:function(a,b){return h(a,b,5)},read48Bit:function(a,b){return h(a,b,6)},read53Bit:function(a,b){return h(a,b,7)},read64BitFloat:function(a,d){b[0]=l.read32Bit(a,
d);b[1]=l.read32Bit(a,d+4);return e[0]},readChar:function(a,b,c){var d="",e=0;for(c=c.bits/8;e<c;)d+=String.fromCharCode(a[b+e]),e++;return d}},n={write64BitFloat:function(a,d,c){e[0]=d;c=n.write32Bit(a,b[0],c);return n.write32Bit(a,b[1],c)},write53Bit:function(a,b,c){c=n.write48Bit(a,b,c);a[c++]=Math.floor(b/Math.pow(2,48))&255;return c},write48Bit:function(a,b,c){c=n.write40Bit(a,b,c);a[c++]=Math.floor(b/Math.pow(2,40))&255;return c},write40Bit:function(a,b,c){c=n.write32Bit(a,b,c);a[c++]=Math.floor(b/
Math.pow(2,32))&255;return c},write32BitFloat:function(a,b,e){c[0]=b;return e=n.write32Bit(a,k[0],e)},write32Bit:function(a,b,c){c=n.write24Bit(a,b,c);a[c++]=b>>>24&255;return c},write24Bit:function(a,b,c){c=n.write16Bit(a,b,c);a[c++]=b>>>16&255;return c},write16Bit:function(a,b,c){a[c++]=b&255;a[c++]=b>>>8&255;return c},write16BitFloat:function(a,b,e){c[0]=b;var d=k[0];b=d>>16&32768;var f=d>>12&2047;d=d>>23&255;103<=d&&(b=(b|d-112<<10|f>>1)+(f&1));a[e]=b&255;a[e+1]=b>>>8&255;return e+2},write8Bit:function(a,
b,c){a[c++]=b&255;return c},write4Bit:function(a,b,c){a[c++]=b&15;return c},write2Bit:function(a,b,c){a[c++]=0>b?b+4:b;return c},write1Bit:function(a,b,c){a[c++]=b?1:0;return c},writeString:function(a,b,c){a[c++]=b.charCodeAt(0);return c}};a.BitWriter=n;a.BitReader=l},function(g,a,h){function c(a){a-=m;if(0<=a)var b=0;else b=8,a=-a;var c=d[r],e=c>>3;a>c&&(b|=4,a-=c,e+=c);c>>=1;a>c&&(b|=2,a-=c,e+=c);c>>=1;a>c&&(b|=1,e+=c);m=b&8?m-e:m+e;-32768>m?m=-32768:32767<m&&(m=32767);r+=f[b&7];0>r?r=0:88<r&&(r=
88);return b}function k(a){var b=0;a&4&&(b+=t);a&2&&(b+=t>>1);a&1&&(b+=t>>2);b+=t>>3;a&8&&(b=-b);p+=b;32767<p?p=32767:-32767>p&&(p=-32767);q+=f[a];0>q?q=0:88<q&&(q=88);t=d[q];return p}function e(a){var b=a[0];c(b);var e=[];e.push(l.pack(b,n)[0]);e.push(l.pack(b,n)[1]);e.push(r);e.push(0);for(b=3;b<a.length;b+=2){var d=c(a[b]),k=c(a[b+1]);e.push(k<<4|d)}for(;256>e.length;)e.push(0);return e}function b(a){p=l.unpack([a[0],a[1]],n);q=a[2];t=d[q];for(var b=[p,l.unpack([a[2],a[3]],n)],c=4;c<a.length;c++){var e=
a[c],f=e>>4;b.push(k(f<<4^e));b.push(k(f))}return b}var l=h(0),n=l.int16,f=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],d=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],m=0,r=
0,p=0,q=0,t=7;g.exports.encode=function(a){for(var b=[],c=[],d=0;d<a.length;d++)if(c.push(a[d]),0==d%505&&0!=d||d==a.length-1)b=b.concat(e(c)),c=[];return b};g.exports.decode=function(a,c){c=void 0===c?256:c;for(var e=[],d=[],f=0;f<a.length;f++)0==f%c&&0!=f&&(e=e.concat(b(d)),d=[]),d.push(a[f]);return e};g.exports.encodeBlock=e;g.exports.decodeBlock=b},function(g,a){function h(a){var c=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],b;a=-32768==a?-32767:a;(b=~a>>8&128)||(a*=-1);32635<a&&(a=32635);256<=a?(c=c[a>>8&127],a=c<<4|a>>c+3&15):a>>=4;return a^b^85}function c(a){var c=0;a^=85;a&128&&(a&=-129,c=-1);var b=((a&240)>>4)+4;a=4!=b?1<<b|(a&15)<<b-4|1<<b-5:a<<1|1;return-8*(0==c?a:-a)}g.exports.encodeSample=h;g.exports.decodeSample=c;g.exports.encode=function(a){for(var c=[],b=0;b<a.length;b++)c.push(h(a[b]));
return c};g.exports.decode=function(a){for(var e=[],b=0;b<a.length;b++)e.push(c(a[b]));return e}},function(g,a){function h(a){if(0>a){a=132-a;var c=127}else a+=132,c=255;32767<a&&(a=32767);var b=0;var g=a>>7;g&240&&(g>>=4,b+=4);g&12&&(g>>=2,b+=2);g&2&&(b+=1);g=b;return(g<<4|a>>g+3&15)^c}function c(a){a=~a;var c=((a&15)<<3)+132<<((a&112)>>4);return a&128?132-c:c-132}g.exports.encodeSample=h;g.exports.decodeSample=c;g.exports.encode=function(a){for(var c=[],b=0;b<a.length;b++)c.push(h(a[b]));return c};
g.exports.decode=function(a){for(var e=[],b=0;b<a.length;b++)e.push(c(a[b]));return e}}]);
